<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (18) -->
<title>HandshakeState (I2P Anonymous Network - Java Documentation - API Version 0.9.55)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: com.southernstorm.noise.protocol, class: HandshakeState">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon"></span><span class="nav-bar-toggle-icon"></span><span class="nav-bar-toggle-icon"></span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/HandshakeState.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li><a href="#field-summary">Field</a></li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li><a href="#field-detail">Field</a></li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">com.southernstorm.noise.protocol</a></div>
<h1 title="Class HandshakeState" class="title">Class HandshakeState</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">com.southernstorm.noise.protocol.HandshakeState</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="Destroyable.html" title="interface in com.southernstorm.noise.protocol">Destroyable</a></code>, <code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Cloneable.html" title="class or interface in java.lang" class="external-link">Cloneable</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">HandshakeState</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="Destroyable.html" title="interface in com.southernstorm.noise.protocol">Destroyable</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Cloneable.html" title="class or interface in java.lang" class="external-link">Cloneable</a></span></div>
<div class="block">Interface to a Noise handshake.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final int</code></div>
<div class="col-second even-row-color"><code><a href="#COMPLETE" class="member-name-link">COMPLETE</a></code></div>
<div class="col-last even-row-color">
<div class="block">The handshake is complete and the data session ciphers
 have been split() out successfully.</div>
</div>
<div class="col-first odd-row-color"><code>static final int</code></div>
<div class="col-second odd-row-color"><code><a href="#FAILED" class="member-name-link">FAILED</a></code></div>
<div class="col-last odd-row-color">
<div class="block">The handshake has failed due to some kind of error.</div>
</div>
<div class="col-first even-row-color"><code>static final int</code></div>
<div class="col-second even-row-color"><code><a href="#INITIATOR" class="member-name-link">INITIATOR</a></code></div>
<div class="col-last even-row-color">
<div class="block">Enumerated value that indicates that the handshake object
 is handling the initiator role.</div>
</div>
<div class="col-first odd-row-color"><code>static final int</code></div>
<div class="col-second odd-row-color"><code><a href="#NO_ACTION" class="member-name-link">NO_ACTION</a></code></div>
<div class="col-last odd-row-color">
<div class="block">No action is required of the application yet because the
 handshake has not started.</div>
</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#PATTERN_ID_IK" class="member-name-link">PATTERN_ID_IK</a></code></div>
<div class="col-last even-row-color">
<div class="block">Ratchet</div>
</div>
<div class="col-first odd-row-color"><code>static final <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#PATTERN_ID_N" class="member-name-link">PATTERN_ID_N</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Tunnels</div>
</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#PATTERN_ID_N_NO_RESPONSE" class="member-name-link">PATTERN_ID_N_NO_RESPONSE</a></code></div>
<div class="col-last even-row-color">
<div class="block">same as N but no post-mixHash needed</div>
</div>
<div class="col-first odd-row-color"><code>static final <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#PATTERN_ID_XK" class="member-name-link">PATTERN_ID_XK</a></code></div>
<div class="col-last odd-row-color">
<div class="block">NTCP2</div>
</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#PATTERN_ID_XK_SSU2" class="member-name-link">PATTERN_ID_XK_SSU2</a></code></div>
<div class="col-last even-row-color">
<div class="block">SSU2</div>
</div>
<div class="col-first odd-row-color"><code>static final <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#protocolName" class="member-name-link">protocolName</a></code></div>
<div class="col-last odd-row-color">
<div class="block">NTCP2</div>
</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#protocolName2" class="member-name-link">protocolName2</a></code></div>
<div class="col-last even-row-color">
<div class="block">Ratchet</div>
</div>
<div class="col-first odd-row-color"><code>static final <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#protocolName3" class="member-name-link">protocolName3</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Tunnels</div>
</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#protocolName4" class="member-name-link">protocolName4</a></code></div>
<div class="col-last even-row-color">
<div class="block">SSU2</div>
</div>
<div class="col-first odd-row-color"><code>static final int</code></div>
<div class="col-second odd-row-color"><code><a href="#READ_MESSAGE" class="member-name-link">READ_MESSAGE</a></code></div>
<div class="col-last odd-row-color">
<div class="block">The HandshakeState expects the application to read the
 next message payload from the handshake.</div>
</div>
<div class="col-first even-row-color"><code>static final int</code></div>
<div class="col-second even-row-color"><code><a href="#RESPONDER" class="member-name-link">RESPONDER</a></code></div>
<div class="col-last even-row-color">
<div class="block">Enumerated value that indicates that the handshake object
 is handling the responder role.</div>
</div>
<div class="col-first odd-row-color"><code>static final int</code></div>
<div class="col-second odd-row-color"><code><a href="#SPLIT" class="member-name-link">SPLIT</a></code></div>
<div class="col-last odd-row-color">
<div class="block">The handshake is over and the application is expected to call
 split() and begin data session communications.</div>
</div>
<div class="col-first even-row-color"><code>static final int</code></div>
<div class="col-second even-row-color"><code><a href="#WRITE_MESSAGE" class="member-name-link">WRITE_MESSAGE</a></code></div>
<div class="col-last even-row-color">
<div class="block">The HandshakeState expects the application to write the
 next message payload for the handshake.</div>
</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier</div>
<div class="table-header col-second">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>protected </code></div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(com.southernstorm.noise.protocol.HandshakeState)" class="member-name-link">HandshakeState</a><wbr>(<a href="HandshakeState.html" title="class in com.southernstorm.noise.protocol">HandshakeState</a>&nbsp;o)</code></div>
<div class="col-last even-row-color">
<div class="block">Copy constructor for cloning</div>
</div>
<div class="col-first odd-row-color"><code>&nbsp;</code></div>
<div class="col-constructor-name odd-row-color"><code><a href="#%3Cinit%3E(java.lang.String,int,net.i2p.crypto.KeyFactory)" class="member-name-link">HandshakeState</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;patternId,
 int&nbsp;role,
 <a href="../../../../net/i2p/crypto/KeyFactory.html" title="interface in net.i2p.crypto">KeyFactory</a>&nbsp;xdh)</code></div>
<div class="col-last odd-row-color">
<div class="block">Creates a new Noise handshake.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="HandshakeState.html" title="class in com.southernstorm.noise.protocol">HandshakeState</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#clone()" class="member-name-link">clone</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">I2P
  Must be called before both eph.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#destroy()" class="member-name-link">destroy</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Destroys all sensitive state in the current object.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getAction()" class="member-name-link">getAction</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the next action that the application should perform for
 the handshake part of the protocol.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>byte[]</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getChainingKey()" class="member-name-link">getChainingKey</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">I2P for getting chaining key for siphash calc</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>byte[]</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getHandshakeHash()" class="member-name-link">getHandshakeHash</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the current value of the handshake hash.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="DHState.html" title="interface in com.southernstorm.noise.protocol">DHState</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getLocalEphemeralKeyPair()" class="member-name-link">getLocalEphemeralKeyPair</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the keypair object for the local ephemeral key.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="DHState.html" title="interface in com.southernstorm.noise.protocol">DHState</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getLocalKeyPair()" class="member-name-link">getLocalKeyPair</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the keypair object for the local static key.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getProtocolName()" class="member-name-link">getProtocolName</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the name of the Noise protocol.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="DHState.html" title="interface in com.southernstorm.noise.protocol">DHState</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getRemotePublicKey()" class="member-name-link">getRemotePublicKey</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the public key object for the remote static key.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getRole()" class="member-name-link">getRole</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the role for this handshake.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#hasLocalKeyPair()" class="member-name-link">hasLocalKeyPair</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Determine if this handshake has already been configured
 with a local static key.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#hasRemotePublicKey()" class="member-name-link">hasRemotePublicKey</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Determine if this handshake has already been configured
 with a remote static key.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#mixHash(byte%5B%5D,int,int)" class="member-name-link">mixHash</a><wbr>(byte[]&nbsp;data,
 int&nbsp;offset,
 int&nbsp;length)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">I2P for mixing in padding in messages 1 and 2</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#needsLocalKeyPair()" class="member-name-link">needsLocalKeyPair</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Determine if this handshake requires a local static key.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#needsRemotePublicKey()" class="member-name-link">needsRemotePublicKey</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Determine if this handshake requires a remote static key.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#readMessage(byte%5B%5D,int,int,byte%5B%5D,int)" class="member-name-link">readMessage</a><wbr>(byte[]&nbsp;message,
 int&nbsp;messageOffset,
 int&nbsp;messageLength,
 byte[]&nbsp;payload,
 int&nbsp;payloadOffset)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Reads a message payload during the handshake.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="CipherStatePair.html" title="class in com.southernstorm.noise.protocol">CipherStatePair</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#split()" class="member-name-link">split</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Splits the transport encryption CipherState objects out of
 this HandshakeState object once the handshake completes.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="CipherStatePair.html" title="class in com.southernstorm.noise.protocol">CipherStatePair</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#split(byte%5B%5D,int,int)" class="member-name-link">split</a><wbr>(byte[]&nbsp;secondaryKey,
 int&nbsp;offset,
 int&nbsp;length)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Splits the transport encryption CipherState objects out of
 this HandshakeObject after mixing in a secondary symmetric key.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#start()" class="member-name-link">start</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Starts the handshake running.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toString()" class="member-name-link">toString</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">I2P debug</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#writeMessage(byte%5B%5D,int,byte%5B%5D,int,int)" class="member-name-link">writeMessage</a><wbr>(byte[]&nbsp;message,
 int&nbsp;messageOffset,
 byte[]&nbsp;payload,
 int&nbsp;payloadOffset,
 int&nbsp;payloadLength)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Writes a message payload during the handshake.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="INITIATOR">
<h3>INITIATOR</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">INITIATOR</span></div>
<div class="block">Enumerated value that indicates that the handshake object
 is handling the initiator role.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#com.southernstorm.noise.protocol.HandshakeState.INITIATOR">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="RESPONDER">
<h3>RESPONDER</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">RESPONDER</span></div>
<div class="block">Enumerated value that indicates that the handshake object
 is handling the responder role.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#com.southernstorm.noise.protocol.HandshakeState.RESPONDER">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="NO_ACTION">
<h3>NO_ACTION</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">NO_ACTION</span></div>
<div class="block">No action is required of the application yet because the
 handshake has not started.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#com.southernstorm.noise.protocol.HandshakeState.NO_ACTION">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="WRITE_MESSAGE">
<h3>WRITE_MESSAGE</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">WRITE_MESSAGE</span></div>
<div class="block">The HandshakeState expects the application to write the
 next message payload for the handshake.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#com.southernstorm.noise.protocol.HandshakeState.WRITE_MESSAGE">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="READ_MESSAGE">
<h3>READ_MESSAGE</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">READ_MESSAGE</span></div>
<div class="block">The HandshakeState expects the application to read the
 next message payload from the handshake.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#com.southernstorm.noise.protocol.HandshakeState.READ_MESSAGE">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="FAILED">
<h3>FAILED</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">FAILED</span></div>
<div class="block">The handshake has failed due to some kind of error.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#com.southernstorm.noise.protocol.HandshakeState.FAILED">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="SPLIT">
<h3>SPLIT</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">SPLIT</span></div>
<div class="block">The handshake is over and the application is expected to call
 split() and begin data session communications.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#com.southernstorm.noise.protocol.HandshakeState.SPLIT">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="COMPLETE">
<h3>COMPLETE</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">COMPLETE</span></div>
<div class="block">The handshake is complete and the data session ciphers
 have been split() out successfully.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#com.southernstorm.noise.protocol.HandshakeState.COMPLETE">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="protocolName">
<h3>protocolName</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">protocolName</span></div>
<div class="block">NTCP2</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#com.southernstorm.noise.protocol.HandshakeState.protocolName">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="protocolName2">
<h3>protocolName2</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">protocolName2</span></div>
<div class="block">Ratchet</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#com.southernstorm.noise.protocol.HandshakeState.protocolName2">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="protocolName3">
<h3>protocolName3</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">protocolName3</span></div>
<div class="block">Tunnels</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#com.southernstorm.noise.protocol.HandshakeState.protocolName3">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="protocolName4">
<h3>protocolName4</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">protocolName4</span></div>
<div class="block">SSU2</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#com.southernstorm.noise.protocol.HandshakeState.protocolName4">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="PATTERN_ID_XK">
<h3>PATTERN_ID_XK</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">PATTERN_ID_XK</span></div>
<div class="block">NTCP2</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#com.southernstorm.noise.protocol.HandshakeState.PATTERN_ID_XK">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="PATTERN_ID_IK">
<h3>PATTERN_ID_IK</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">PATTERN_ID_IK</span></div>
<div class="block">Ratchet</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#com.southernstorm.noise.protocol.HandshakeState.PATTERN_ID_IK">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="PATTERN_ID_N">
<h3>PATTERN_ID_N</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">PATTERN_ID_N</span></div>
<div class="block">Tunnels</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#com.southernstorm.noise.protocol.HandshakeState.PATTERN_ID_N">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="PATTERN_ID_N_NO_RESPONSE">
<h3>PATTERN_ID_N_NO_RESPONSE</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">PATTERN_ID_N_NO_RESPONSE</span></div>
<div class="block">same as N but no post-mixHash needed</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#com.southernstorm.noise.protocol.HandshakeState.PATTERN_ID_N_NO_RESPONSE">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="PATTERN_ID_XK_SSU2">
<h3>PATTERN_ID_XK_SSU2</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">PATTERN_ID_XK_SSU2</span></div>
<div class="block">SSU2</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#com.southernstorm.noise.protocol.HandshakeState.PATTERN_ID_XK_SSU2">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(java.lang.String,int,net.i2p.crypto.KeyFactory)">
<h3>HandshakeState</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">HandshakeState</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;patternId,
 int&nbsp;role,
 <a href="../../../../net/i2p/crypto/KeyFactory.html" title="interface in net.i2p.crypto">KeyFactory</a>&nbsp;xdh)</span>
               throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/security/NoSuchAlgorithmException.html" title="class or interface in java.security" class="external-link">NoSuchAlgorithmException</a></span></div>
<div class="block">Creates a new Noise handshake.
 Noise protocol name is hardcoded.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>patternId</code> - XK, IK, or N</dd>
<dd><code>role</code> - The role, HandshakeState.INITIATOR or HandshakeState.RESPONDER.</dd>
<dd><code>xdh</code> - The key pair factory for ephemeral keys</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - The protocolName is not
 formatted correctly, or the role is not recognized.</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/security/NoSuchAlgorithmException.html" title="class or interface in java.security" class="external-link">NoSuchAlgorithmException</a></code> - One of the cryptographic algorithms
 that is specified in the protocolName is not supported.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(com.southernstorm.noise.protocol.HandshakeState)">
<h3>HandshakeState</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="element-name">HandshakeState</span><wbr><span class="parameters">(<a href="HandshakeState.html" title="class in com.southernstorm.noise.protocol">HandshakeState</a>&nbsp;o)</span>
                  throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/CloneNotSupportedException.html" title="class or interface in java.lang" class="external-link">CloneNotSupportedException</a></span></div>
<div class="block">Copy constructor for cloning</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/CloneNotSupportedException.html" title="class or interface in java.lang" class="external-link">CloneNotSupportedException</a></code></dd>
<dt>Since:</dt>
<dd>0.9.44</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getProtocolName()">
<h3>getProtocolName</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">getProtocolName</span>()</div>
<div class="block">Gets the name of the Noise protocol.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The protocol name.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getRole()">
<h3>getRole</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getRole</span>()</div>
<div class="block">Gets the role for this handshake.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The role, HandshakeState.INITIATOR or HandshakeState.RESPONDER.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getLocalKeyPair()">
<h3>getLocalKeyPair</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="DHState.html" title="interface in com.southernstorm.noise.protocol">DHState</a></span>&nbsp;<span class="element-name">getLocalKeyPair</span>()</div>
<div class="block">Gets the keypair object for the local static key.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The keypair, or null if a local static key is not required.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getLocalEphemeralKeyPair()">
<h3>getLocalEphemeralKeyPair</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="DHState.html" title="interface in com.southernstorm.noise.protocol">DHState</a></span>&nbsp;<span class="element-name">getLocalEphemeralKeyPair</span>()</div>
<div class="block">Gets the keypair object for the local ephemeral key.
 
 I2P</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The keypair, or null if a local ephemeral key is not required or has not been generated.</dd>
<dt>Since:</dt>
<dd>0.9.44</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="needsLocalKeyPair()">
<h3>needsLocalKeyPair</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">needsLocalKeyPair</span>()</div>
<div class="block">Determine if this handshake requires a local static key.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if a local static key is needed; false if not.
 
 If the local static key has already been set, then this function
 will return false.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="hasLocalKeyPair()">
<h3>hasLocalKeyPair</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">hasLocalKeyPair</span>()</div>
<div class="block">Determine if this handshake has already been configured
 with a local static key.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if the local static key has been configured;
 false if not.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getRemotePublicKey()">
<h3>getRemotePublicKey</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="DHState.html" title="interface in com.southernstorm.noise.protocol">DHState</a></span>&nbsp;<span class="element-name">getRemotePublicKey</span>()</div>
<div class="block">Gets the public key object for the remote static key.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The public key, or null if a remote static key
 is not required.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="needsRemotePublicKey()">
<h3>needsRemotePublicKey</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">needsRemotePublicKey</span>()</div>
<div class="block">Determine if this handshake requires a remote static key.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if a remote static key is needed; false if not.
 
 If the remote static key has already been set, then this function
 will return false.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="hasRemotePublicKey()">
<h3>hasRemotePublicKey</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">hasRemotePublicKey</span>()</div>
<div class="block">Determine if this handshake has already been configured
 with a remote static key.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if the remote static key has been configured;
 false if not.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="start()">
<h3>start</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">start</span>()</div>
<div class="block">Starts the handshake running.
 
 This function is called after all of the handshake parameters have been
 provided to the HandshakeState object.  This function should be followed
 by calls to writeMessage() or readMessage() to process the handshake
 messages.  The getAction() function indicates the action to take next.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - The handshake has already started, or one or
 more of the required parameters has not been supplied.</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/UnsupportedOperationException.html" title="class or interface in java.lang" class="external-link">UnsupportedOperationException</a></code> - An attempt was made to start a
 fallback handshake pattern without first calling fallback() on a
 previous handshake.</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="#getAction()"><code>getAction()</code></a></li>
<li><a href="#writeMessage(byte%5B%5D,int,byte%5B%5D,int,int)"><code>writeMessage(byte[], int, byte[], int, int)</code></a></li>
<li><a href="#readMessage(byte%5B%5D,int,int,byte%5B%5D,int)"><code>see #fallback()</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAction()">
<h3>getAction</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getAction</span>()</div>
<div class="block">Gets the next action that the application should perform for
 the handshake part of the protocol.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>One of HandshakeState.NO_ACTION, HandshakeState.WRITE_MESSAGE,
 HandshakeState.READ_MESSAGE, HandshakeState.SPLIT, or
 HandshakeState.FAILED.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="writeMessage(byte[],int,byte[],int,int)">
<h3>writeMessage</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">writeMessage</span><wbr><span class="parameters">(byte[]&nbsp;message,
 int&nbsp;messageOffset,
 byte[]&nbsp;payload,
 int&nbsp;payloadOffset,
 int&nbsp;payloadLength)</span>
                 throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/javax/crypto/ShortBufferException.html" title="class or interface in javax.crypto" class="external-link">ShortBufferException</a></span></div>
<div class="block">Writes a message payload during the handshake.
 
 Payload (plaintext) and message (encrypted) may be in the same buffer if the payload
 if offset enough past the message offset to leave room for the
 key(s) and/or MAC. For 32 byte keys and 16 byte MACs,
 if message == payload, payloadOffset must be at least this much
 greater than messageOffset:

 XK: Message 1: 32; message 2: 32; message 3: 48

 IK: Message 1: 80; message 2: 48

 N: Message 1: 32</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>message</code> - The buffer that will be populated with the
 handshake packet to be written to the transport.</dd>
<dd><code>messageOffset</code> - First offset within the message buffer
 to be populated.</dd>
<dd><code>payload</code> - Buffer containing the payload to add to the
 handshake message; can be null if there is no payload.</dd>
<dd><code>payloadOffset</code> - Offset into the payload buffer of the
 first payload buffer.</dd>
<dd><code>payloadLength</code> - Length of the payload in bytes.</dd>
<dt>Returns:</dt>
<dd>The length of the data written to the message buffer.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - The action is not WRITE_MESSAGE.</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - The payload is null, but
 payloadOffset or payloadLength is non-zero.</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/javax/crypto/ShortBufferException.html" title="class or interface in javax.crypto" class="external-link">ShortBufferException</a></code> - The message buffer does not have
 enough space for the handshake message.</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="#getAction()"><code>getAction()</code></a></li>
<li><a href="#readMessage(byte%5B%5D,int,int,byte%5B%5D,int)"><code>readMessage(byte[], int, int, byte[], int)</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="readMessage(byte[],int,int,byte[],int)">
<h3>readMessage</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">readMessage</span><wbr><span class="parameters">(byte[]&nbsp;message,
 int&nbsp;messageOffset,
 int&nbsp;messageLength,
 byte[]&nbsp;payload,
 int&nbsp;payloadOffset)</span>
                throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/javax/crypto/ShortBufferException.html" title="class or interface in javax.crypto" class="external-link">ShortBufferException</a>,
<a href="https://docs.oracle.com/javase/8/docs/api/javax/crypto/BadPaddingException.html" title="class or interface in javax.crypto" class="external-link">BadPaddingException</a></span></div>
<div class="block">Reads a message payload during the handshake.

 Payload (plaintext) and message (encrypted) may be in the same buffer
 and have the same offset.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>message</code> - Buffer containing the incoming handshake
 that was read from the transport.</dd>
<dd><code>messageOffset</code> - Offset of the first message byte.</dd>
<dd><code>messageLength</code> - The length of the incoming message.</dd>
<dd><code>payload</code> - Buffer that will be populated with the message payload.</dd>
<dd><code>payloadOffset</code> - Offset of the first byte in the
 payload buffer to be populated with payload data.</dd>
<dt>Returns:</dt>
<dd>The length of the payload.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - The action is not READ_MESSAGE.</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/javax/crypto/ShortBufferException.html" title="class or interface in javax.crypto" class="external-link">ShortBufferException</a></code> - The message buffer does not have
 sufficient bytes for a valid message or the payload buffer does
 not have enough space for the decrypted payload.</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/javax/crypto/BadPaddingException.html" title="class or interface in javax.crypto" class="external-link">BadPaddingException</a></code> - A MAC value in the message failed
 to verify.</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="#getAction()"><code>getAction()</code></a></li>
<li><a href="#writeMessage(byte%5B%5D,int,byte%5B%5D,int,int)"><code>writeMessage(byte[], int, byte[], int, int)</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="split()">
<h3>split</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="CipherStatePair.html" title="class in com.southernstorm.noise.protocol">CipherStatePair</a></span>&nbsp;<span class="element-name">split</span>()</div>
<div class="block">Splits the transport encryption CipherState objects out of
 this HandshakeState object once the handshake completes.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The pair of ciphers for sending and receiving.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - The action is not SPLIT.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="split(byte[],int,int)">
<h3>split</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="CipherStatePair.html" title="class in com.southernstorm.noise.protocol">CipherStatePair</a></span>&nbsp;<span class="element-name">split</span><wbr><span class="parameters">(byte[]&nbsp;secondaryKey,
 int&nbsp;offset,
 int&nbsp;length)</span></div>
<div class="block">Splits the transport encryption CipherState objects out of
 this HandshakeObject after mixing in a secondary symmetric key.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>secondaryKey</code> - The buffer containing the secondary key.</dd>
<dd><code>offset</code> - The offset of the first secondary key byte.</dd>
<dd><code>length</code> - The length of the secondary key in bytes, which
 must be either 0 or 32.</dd>
<dt>Returns:</dt>
<dd>The pair of ciphers for sending and receiving.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - The action is not SPLIT.</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - The length is not 0 or 32.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getHandshakeHash()">
<h3>getHandshakeHash</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">byte[]</span>&nbsp;<span class="element-name">getHandshakeHash</span>()</div>
<div class="block">Gets the current value of the handshake hash.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>The handshake hash.  This must not be modified by the caller.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - The action is not SPLIT or COMPLETE.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="destroy()">
<h3>destroy</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">destroy</span>()</div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="Destroyable.html#destroy()">Destroyable</a></code></span></div>
<div class="block">Destroys all sensitive state in the current object.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="Destroyable.html#destroy()">destroy</a></code>&nbsp;in interface&nbsp;<code><a href="Destroyable.html" title="interface in com.southernstorm.noise.protocol">Destroyable</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="mixHash(byte[],int,int)">
<h3>mixHash</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">mixHash</span><wbr><span class="parameters">(byte[]&nbsp;data,
 int&nbsp;offset,
 int&nbsp;length)</span></div>
<div class="block">I2P for mixing in padding in messages 1 and 2</div>
</section>
</li>
<li>
<section class="detail" id="getChainingKey()">
<h3>getChainingKey</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">byte[]</span>&nbsp;<span class="element-name">getChainingKey</span>()</div>
<div class="block">I2P for getting chaining key for siphash calc</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a copy</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="clone()">
<h3>clone</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="HandshakeState.html" title="class in com.southernstorm.noise.protocol">HandshakeState</a></span>&nbsp;<span class="element-name">clone</span>()
                     throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/CloneNotSupportedException.html" title="class or interface in java.lang" class="external-link">CloneNotSupportedException</a></span></div>
<div class="block">I2P
  Must be called before both eph. keys set.</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/CloneNotSupportedException.html" title="class or interface in java.lang" class="external-link">CloneNotSupportedException</a></code></dd>
<dt>Since:</dt>
<dd>0.9.44</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="toString()">
<h3>toString</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">toString</span>()</div>
<div class="block">I2P debug</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
