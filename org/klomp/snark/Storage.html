<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>Storage (I2P Anonymous Network - Java Documentation - API Version 0.9.56)</title>
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Storage (I2P Anonymous Network - Java Documentation - API Version 0.9.56)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":9,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":9,"i28":10,"i29":10,"i30":10,"i31":10,"i32":10,"i33":10,"i34":10,"i35":10,"i36":10,"i37":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Storage.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/klomp/snark/StaticSnark.html" title="class in org.klomp.snark"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../org/klomp/snark/StorageListener.html" title="interface in org.klomp.snark"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/klomp/snark/Storage.html" target="_top">Frames</a></li>
<li><a href="Storage.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.klomp.snark</div>
<h2 title="Class Storage" class="title">Class Storage</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.klomp.snark.Storage</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="https://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang">AutoCloseable</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">Storage</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="https://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a></pre>
<div class="block">Maintains pieces on disk. Can be used to store and retrieve pieces.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#MAX_PIECE_SIZE">MAX_PIECE_SIZE</a></span></code>
<div class="block">bigger than this will be rejected</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#MAX_PIECES">MAX_PIECES</a></span></code>
<div class="block">The maximum number of pieces in a torrent.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#MAX_TOTAL_SIZE">MAX_TOTAL_SIZE</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#PRIORITY_NORMAL">PRIORITY_NORMAL</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#PRIORITY_SKIP">PRIORITY_SKIP</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#Storage-org.klomp.snark.I2PSnarkUtil-java.io.File-org.klomp.snark.MetaInfo-org.klomp.snark.StorageListener-boolean-">Storage</a></span>(<a href="../../../org/klomp/snark/I2PSnarkUtil.html" title="class in org.klomp.snark">I2PSnarkUtil</a>&nbsp;util,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;baseFile,
       <a href="../../../org/klomp/snark/MetaInfo.html" title="class in org.klomp.snark">MetaInfo</a>&nbsp;metainfo,
       <a href="../../../org/klomp/snark/StorageListener.html" title="interface in org.klomp.snark">StorageListener</a>&nbsp;listener,
       boolean&nbsp;preserveFileNames)</code>
<div class="block">Creates a new storage based on the supplied MetaInfo.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#Storage-org.klomp.snark.I2PSnarkUtil-java.io.File-java.lang.String-java.util.List-java.lang.String-boolean-java.util.List-java.lang.String-org.klomp.snark.StorageListener-">Storage</a></span>(<a href="../../../org/klomp/snark/I2PSnarkUtil.html" title="class in org.klomp.snark">I2PSnarkUtil</a>&nbsp;util,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;baseFile,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;announce,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&gt;&nbsp;announce_list,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;created_by,
       boolean&nbsp;privateTorrent,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;url_list,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;comment,
       <a href="../../../org/klomp/snark/StorageListener.html" title="interface in org.klomp.snark">StorageListener</a>&nbsp;listener)</code>
<div class="block">Creates a storage from the existing file or directory.</div>
</td>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#Storage-org.klomp.snark.I2PSnarkUtil-java.io.File-java.lang.String-java.util.List-java.lang.String-boolean-org.klomp.snark.StorageListener-">Storage</a></span>(<a href="../../../org/klomp/snark/I2PSnarkUtil.html" title="class in org.klomp.snark">I2PSnarkUtil</a>&nbsp;util,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;baseFile,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;announce,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&gt;&nbsp;announce_list,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;created_by,
       boolean&nbsp;privateTorrent,
       <a href="../../../org/klomp/snark/StorageListener.html" title="interface in org.klomp.snark">StorageListener</a>&nbsp;listener)</code>
<div class="block">Creates a storage from the existing file or directory.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#check--">check</a></span>()</code>
<div class="block">Creates (and/or checks) all files from the metainfo file list.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#check-long-org.klomp.snark.BitField-">check</a></span>(long&nbsp;savedTime,
     <a href="../../../org/klomp/snark/BitField.html" title="class in org.klomp.snark">BitField</a>&nbsp;savedBitField)</code>
<div class="block">Creates (and/or checks) all files from the metainfo file list.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#cleanRAFs--">cleanRAFs</a></span>()</code>
<div class="block">Close unused RAFs - call periodically</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#clearChanged--">clearChanged</a></span>()</code>
<div class="block">Clear the storage changed variable</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#close--">close</a></span>()</code>
<div class="block">Closes the Storage and makes sure that all RandomAccessFiles are
 closed.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#complete--">complete</a></span>()</code>
<div class="block">Whether or not this storage contains all pieces if the MetaInfo.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#filterName-java.lang.String-">filterName</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name)</code>
<div class="block">Removes 'suspicious' characters from the given file name.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#getActivity--">getActivity</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#getBase--">getBase</a></span>()</code>
<div class="block">The base file or directory.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#getBaseName--">getBaseName</a></span>()</code>
<div class="block">The base file or directory name of the data,
  as specified in the .torrent file, but filtered to remove
  illegal characters.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="../../../org/klomp/snark/BitField.html" title="class in org.klomp.snark">BitField</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#getBitField--">getBitField</a></span>()</code>
<div class="block">The BitField that tells which pieces this storage contains.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#getCheckingProgress--">getCheckingProgress</a></span>()</code>
<div class="block">If checking is in progress, return completion 0.0 ...</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/SortedSet.html?is-external=true" title="class or interface in java.util">SortedSet</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#getDirectories--">getDirectories</a></span>()</code>
<div class="block">Includes the base for a multi-file torrent.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#getFileCount--">getFileCount</a></span>()</code>
<div class="block">Does not include directories.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>int[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#getFilePriorities--">getFilePriorities</a></span>()</code>
<div class="block">Get the file priorities array.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#getFiles--">getFiles</a></span>()</code>
<div class="block">Does not include directories.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#getInOrder--">getInOrder</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code><a href="../../../org/klomp/snark/MetaInfo.html" title="class in org.klomp.snark">MetaInfo</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#getMetaInfo--">getMetaInfo</a></span>()</code>
<div class="block">Returns the MetaInfo associated with this Storage.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code><a href="../../../net/i2p/data/ByteArray.html" title="class in net.i2p.data">ByteArray</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#getPiece-int-int-int-">getPiece</a></span>(int&nbsp;piece,
        int&nbsp;off,
        int&nbsp;len)</code>
<div class="block">Returns a byte array containing a portion of the requested piece or null if
 the storage doesn't contain the piece yet.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>int[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#getPiecePriorities--">getPiecePriorities</a></span>()</code>
<div class="block">Call setPriority() for all changed files first,
  then call this.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#getPreserveFileNames--">getPreserveFileNames</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#getPriority-int-">getPriority</a></span>(int&nbsp;fileIndex)</code>&nbsp;</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#getSkippedLength--">getSkippedLength</a></span>()</code>
<div class="block">Call setPriority() for all changed files first,
  then call this.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#indexOf-java.io.File-">indexOf</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;file)</code>
<div class="block">Get index to pass to remaining(), getPriority(), setPriority()</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#isAllocating--">isAllocating</a></span>()</code>
<div class="block">Disk allocation (ballooning) in progress.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#isChanged--">isChanged</a></span>()</code>
<div class="block">Has the storage changed since instantiation?</div>
</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#isChecking--">isChecking</a></span>()</code>
<div class="block">File checking in progress.</div>
</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#main-java.lang.String:A-">main</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>[]&nbsp;args)</code>
<div class="block">Create a metainfo.</div>
</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#needed--">needed</a></span>()</code>
<div class="block">How many pieces are still missing from this storage.</div>
</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#putPiece-org.klomp.snark.PartialPiece-">putPiece</a></span>(<a href="../../../org/klomp/snark/PartialPiece.html" title="class in org.klomp.snark">PartialPiece</a>&nbsp;pp)</code>
<div class="block">Put the piece in the Storage if it is correct.</div>
</td>
</tr>
<tr id="i30" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#recheck--">recheck</a></span>()</code>
<div class="block">Blocking.</div>
</td>
</tr>
<tr id="i31" class="rowColor">
<td class="colFirst"><code>long[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#remaining--">remaining</a></span>()</code>
<div class="block">For efficiency, calculate remaining bytes for all files at once</div>
</td>
</tr>
<tr id="i32" class="altColor">
<td class="colFirst"><code>long[][]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#remaining2--">remaining2</a></span>()</code>
<div class="block">For efficiency, calculate remaining bytes for all files at once.</div>
</td>
</tr>
<tr id="i33" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#reopen--">reopen</a></span>()</code>
<div class="block">Doesn't really reopen the file descriptors for a restart.</div>
</td>
</tr>
<tr id="i34" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#setActivity-long-">setActivity</a></span>(long&nbsp;time)</code>&nbsp;</td>
</tr>
<tr id="i35" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#setFilePriorities-int:A-">setFilePriorities</a></span>(int[]&nbsp;p)</code>
<div class="block">Set the file priorities array.</div>
</td>
</tr>
<tr id="i36" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#setInOrder-boolean-">setInOrder</a></span>(boolean&nbsp;yes)</code>
<div class="block">Call AFTER setFilePriorites() so we know what's skipped</div>
</td>
</tr>
<tr id="i37" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/klomp/snark/Storage.html#setPriority-int-int-">setPriority</a></span>(int&nbsp;fileIndex,
           int&nbsp;pri)</code>
<div class="block">Must call Snark.updatePiecePriorities()
  (which calls getPiecePriorities()) after calling this.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="MAX_PIECE_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MAX_PIECE_SIZE</h4>
<pre>public static final&nbsp;int MAX_PIECE_SIZE</pre>
<div class="block">bigger than this will be rejected</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#org.klomp.snark.Storage.MAX_PIECE_SIZE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="MAX_PIECES">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MAX_PIECES</h4>
<pre>public static final&nbsp;int MAX_PIECES</pre>
<div class="block">The maximum number of pieces in a torrent.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#org.klomp.snark.Storage.MAX_PIECES">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="MAX_TOTAL_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MAX_TOTAL_SIZE</h4>
<pre>public static final&nbsp;long MAX_TOTAL_SIZE</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#org.klomp.snark.Storage.MAX_TOTAL_SIZE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="PRIORITY_SKIP">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PRIORITY_SKIP</h4>
<pre>public static final&nbsp;int PRIORITY_SKIP</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#org.klomp.snark.Storage.PRIORITY_SKIP">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="PRIORITY_NORMAL">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>PRIORITY_NORMAL</h4>
<pre>public static final&nbsp;int PRIORITY_NORMAL</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#org.klomp.snark.Storage.PRIORITY_NORMAL">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Storage-org.klomp.snark.I2PSnarkUtil-java.io.File-org.klomp.snark.MetaInfo-org.klomp.snark.StorageListener-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>Storage</h4>
<pre>public&nbsp;Storage(<a href="../../../org/klomp/snark/I2PSnarkUtil.html" title="class in org.klomp.snark">I2PSnarkUtil</a>&nbsp;util,
               <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;baseFile,
               <a href="../../../org/klomp/snark/MetaInfo.html" title="class in org.klomp.snark">MetaInfo</a>&nbsp;metainfo,
               <a href="../../../org/klomp/snark/StorageListener.html" title="interface in org.klomp.snark">StorageListener</a>&nbsp;listener,
               boolean&nbsp;preserveFileNames)</pre>
<div class="block">Creates a new storage based on the supplied MetaInfo.

 Does not check storage. Caller MUST call check(), which will
 try to create and/or check all needed files in the MetaInfo.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>baseFile</code> - the torrent data file or dir</dd>
<dd><code>preserveFileNames</code> - if true, do not remap names to a 'safe' charset</dd>
</dl>
</li>
</ul>
<a name="Storage-org.klomp.snark.I2PSnarkUtil-java.io.File-java.lang.String-java.util.List-java.lang.String-boolean-org.klomp.snark.StorageListener-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>Storage</h4>
<pre>public&nbsp;Storage(<a href="../../../org/klomp/snark/I2PSnarkUtil.html" title="class in org.klomp.snark">I2PSnarkUtil</a>&nbsp;util,
               <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;baseFile,
               <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;announce,
               <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&gt;&nbsp;announce_list,
               <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;created_by,
               boolean&nbsp;privateTorrent,
               <a href="../../../org/klomp/snark/StorageListener.html" title="interface in org.klomp.snark">StorageListener</a>&nbsp;listener)
        throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Creates a storage from the existing file or directory.
 Creates an in-memory metainfo but does not save it to
 a file, caller must do that.

 Creates the metainfo, this may take a LONG time. BLOCKING.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>announce</code> - may be null</dd>
<dd><code>listener</code> - may be null</dd>
<dd><code>created_by</code> - may be null</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - when creating and/or checking files fails.</dd>
</dl>
</li>
</ul>
<a name="Storage-org.klomp.snark.I2PSnarkUtil-java.io.File-java.lang.String-java.util.List-java.lang.String-boolean-java.util.List-java.lang.String-org.klomp.snark.StorageListener-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Storage</h4>
<pre>public&nbsp;Storage(<a href="../../../org/klomp/snark/I2PSnarkUtil.html" title="class in org.klomp.snark">I2PSnarkUtil</a>&nbsp;util,
               <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;baseFile,
               <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;announce,
               <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&gt;&nbsp;announce_list,
               <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;created_by,
               boolean&nbsp;privateTorrent,
               <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;url_list,
               <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;comment,
               <a href="../../../org/klomp/snark/StorageListener.html" title="interface in org.klomp.snark">StorageListener</a>&nbsp;listener)
        throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Creates a storage from the existing file or directory.
 Creates an in-memory metainfo but does not save it to
 a file, caller must do that.

 Creates the metainfo, this may take a LONG time. BLOCKING.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>announce</code> - may be null</dd>
<dd><code>listener</code> - may be null</dd>
<dd><code>created_by</code> - may be null</dd>
<dd><code>url_list</code> - may be null</dd>
<dd><code>comment</code> - may be null</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - when creating and/or checking files fails.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.48</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getMetaInfo--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMetaInfo</h4>
<pre>public&nbsp;<a href="../../../org/klomp/snark/MetaInfo.html" title="class in org.klomp.snark">MetaInfo</a>&nbsp;getMetaInfo()</pre>
<div class="block">Returns the MetaInfo associated with this Storage.</div>
</li>
</ul>
<a name="needed--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>needed</h4>
<pre>public&nbsp;int&nbsp;needed()</pre>
<div class="block">How many pieces are still missing from this storage.</div>
</li>
</ul>
<a name="complete--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>complete</h4>
<pre>public&nbsp;boolean&nbsp;complete()</pre>
<div class="block">Whether or not this storage contains all pieces if the MetaInfo.</div>
</li>
</ul>
<a name="isChanged--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isChanged</h4>
<pre>public&nbsp;boolean&nbsp;isChanged()</pre>
<div class="block">Has the storage changed since instantiation?</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.8.5</dd>
</dl>
</li>
</ul>
<a name="clearChanged--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearChanged</h4>
<pre>void&nbsp;clearChanged()</pre>
<div class="block">Clear the storage changed variable</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.30</dd>
</dl>
</li>
</ul>
<a name="getActivity--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getActivity</h4>
<pre>public&nbsp;long&nbsp;getActivity()</pre>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.42</dd>
</dl>
</li>
</ul>
<a name="setActivity-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setActivity</h4>
<pre>public&nbsp;void&nbsp;setActivity(long&nbsp;time)</pre>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.42</dd>
</dl>
</li>
</ul>
<a name="isChecking--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isChecking</h4>
<pre>public&nbsp;boolean&nbsp;isChecking()</pre>
<div class="block">File checking in progress.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.3</dd>
</dl>
</li>
</ul>
<a name="getCheckingProgress--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCheckingProgress</h4>
<pre>public&nbsp;double&nbsp;getCheckingProgress()</pre>
<div class="block">If checking is in progress, return completion 0.0 ... 1.0,
  else return 1.0.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.23</dd>
</dl>
</li>
</ul>
<a name="isAllocating--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isAllocating</h4>
<pre>public&nbsp;boolean&nbsp;isAllocating()</pre>
<div class="block">Disk allocation (ballooning) in progress.
  Always false on Windows.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.3</dd>
</dl>
</li>
</ul>
<a name="indexOf-java.io.File-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>indexOf</h4>
<pre>public&nbsp;int&nbsp;indexOf(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;file)</pre>
<div class="block">Get index to pass to remaining(), getPriority(), setPriority()</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>file</code> - non-canonical path (non-directory)</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>internal index of file; -1 if unknown file</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.15</dd>
</dl>
</li>
</ul>
<a name="remaining--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>remaining</h4>
<pre>public&nbsp;long[]&nbsp;remaining()</pre>
<div class="block">For efficiency, calculate remaining bytes for all files at once</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>number of bytes remaining for each file, use indexOf() to get index for a file</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.23</dd>
</dl>
</li>
</ul>
<a name="remaining2--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>remaining2</h4>
<pre>public&nbsp;long[][]&nbsp;remaining2()</pre>
<div class="block">For efficiency, calculate remaining bytes for all files at once.
  Remaining bytes is rv[0]. Preview bytes is rv[1].</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>number of bytes remaining and number of bytes available for a preview for each file, use indexOf() to get index for a file</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.45</dd>
</dl>
</li>
</ul>
<a name="getPriority-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPriority</h4>
<pre>public&nbsp;int&nbsp;getPriority(int&nbsp;fileIndex)</pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>fileIndex</code> - as obtained from indexOf</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.8.1</dd>
</dl>
</li>
</ul>
<a name="setPriority-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPriority</h4>
<pre>public&nbsp;void&nbsp;setPriority(int&nbsp;fileIndex,
                        int&nbsp;pri)</pre>
<div class="block">Must call Snark.updatePiecePriorities()
  (which calls getPiecePriorities()) after calling this.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>fileIndex</code> - as obtained from indexOf</dd>
<dd><code>pri</code> - default 0; &lt;0 to disable</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.8.1</dd>
</dl>
</li>
</ul>
<a name="getFilePriorities--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFilePriorities</h4>
<pre>public&nbsp;int[]&nbsp;getFilePriorities()</pre>
<div class="block">Get the file priorities array.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>null on error, if complete, or if only one file</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.8.1</dd>
</dl>
</li>
</ul>
<a name="setFilePriorities-int:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setFilePriorities</h4>
<pre>void&nbsp;setFilePriorities(int[]&nbsp;p)</pre>
<div class="block">Set the file priorities array.
  Only call this when stopped, but after check()</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>p</code> - may be null</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.8.1</dd>
</dl>
</li>
</ul>
<a name="getInOrder--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInOrder</h4>
<pre>public&nbsp;boolean&nbsp;getInOrder()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>as last set, default false</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.36</dd>
</dl>
</li>
</ul>
<a name="setInOrder-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setInOrder</h4>
<pre>public&nbsp;void&nbsp;setInOrder(boolean&nbsp;yes)</pre>
<div class="block">Call AFTER setFilePriorites() so we know what's skipped</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>yes</code> - enable or not</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.36</dd>
</dl>
</li>
</ul>
<a name="getPiecePriorities--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPiecePriorities</h4>
<pre>public&nbsp;int[]&nbsp;getPiecePriorities()</pre>
<div class="block">Call setPriority() for all changed files first,
  then call this.
  Set the piece priority to the highest priority
  of all files spanning the piece.
  Caller must pass array to the PeerCoordinator.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>null on error, if complete, or if only one file and inOrder not set.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.8.1</dd>
</dl>
</li>
</ul>
<a name="getSkippedLength--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSkippedLength</h4>
<pre>public&nbsp;long&nbsp;getSkippedLength()</pre>
<div class="block">Call setPriority() for all changed files first,
  then call this.
  The length of all the pieces that are not yet downloaded,
  and are set to skipped.
  This is not the same as the total of all skipped files,
  since pieces may span multiple files.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>0 on error, if complete, or if only one file</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.24</dd>
</dl>
</li>
</ul>
<a name="getBitField--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBitField</h4>
<pre>public&nbsp;<a href="../../../org/klomp/snark/BitField.html" title="class in org.klomp.snark">BitField</a>&nbsp;getBitField()</pre>
<div class="block">The BitField that tells which pieces this storage contains.
 Do not change this since this is the current state of the storage.</div>
</li>
</ul>
<a name="getBaseName--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBaseName</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getBaseName()</pre>
<div class="block">The base file or directory name of the data,
  as specified in the .torrent file, but filtered to remove
  illegal characters. This is where the data actually is,
  relative to the snark base dir.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.7.14</dd>
</dl>
</li>
</ul>
<a name="getPreserveFileNames--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPreserveFileNames</h4>
<pre>public&nbsp;boolean&nbsp;getPreserveFileNames()</pre>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.15</dd>
</dl>
</li>
</ul>
<a name="check--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>check</h4>
<pre>public&nbsp;void&nbsp;check()
           throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Creates (and/or checks) all files from the metainfo file list.
 Only call this once, and only after the constructor with the metainfo.
 Use recheck() to check again later.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if called more than once</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="check-long-org.klomp.snark.BitField-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>check</h4>
<pre>public&nbsp;void&nbsp;check(long&nbsp;savedTime,
                  <a href="../../../org/klomp/snark/BitField.html" title="class in org.klomp.snark">BitField</a>&nbsp;savedBitField)
           throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Creates (and/or checks) all files from the metainfo file list.
 Use a saved bitfield and timestamp from a config file.
 Only call this once, and only after the constructor with the metainfo.
 Use recheck() to check again later.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if called more than once</dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="reopen--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reopen</h4>
<pre>public&nbsp;void&nbsp;reopen()
            throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Doesn't really reopen the file descriptors for a restart.
 Just does an existence check but no length check or data reverification</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - on fail</dd>
</dl>
</li>
</ul>
<a name="filterName-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>filterName</h4>
<pre>public static&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;filterName(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name)</pre>
<div class="block">Removes 'suspicious' characters from the given file name.
 http://msdn.microsoft.com/en-us/library/aa365247%28VS.85%29.aspx
 Then replace chars not supported in the charset.

 This is called frequently and it can be pretty slow so cache the result.

 TODO: If multiple files in the same torrent map to the same filter name,
 the whole torrent will blow up. Check at torrent creation?</div>
</li>
</ul>
<a name="getBase--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBase</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;getBase()</pre>
<div class="block">The base file or directory.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the File</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.15</dd>
</dl>
</li>
</ul>
<a name="getFiles--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFiles</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&gt;&nbsp;getFiles()</pre>
<div class="block">Does not include directories. Unsorted.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a new List</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.15</dd>
</dl>
</li>
</ul>
<a name="getFileCount--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFileCount</h4>
<pre>public&nbsp;int&nbsp;getFileCount()</pre>
<div class="block">Does not include directories.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.23</dd>
</dl>
</li>
</ul>
<a name="getDirectories--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDirectories</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/SortedSet.html?is-external=true" title="class or interface in java.util">SortedSet</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&gt;&nbsp;getDirectories()</pre>
<div class="block">Includes the base for a multi-file torrent.
  Sorted bottom-up for easy deletion.
  Slow. Use for deletion only.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a new Set or null for a single-file torrent</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.15</dd>
</dl>
</li>
</ul>
<a name="recheck--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recheck</h4>
<pre>public&nbsp;boolean&nbsp;recheck()
                throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Blocking. Holds lock.
  Recommend running only when stopped.
  Caller should thread.
  Calls listener.setWantedPieces() on completion if anything changed.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if anything changed, false otherwise</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.23</dd>
</dl>
</li>
</ul>
<a name="close--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()
           throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Closes the Storage and makes sure that all RandomAccessFiles are
 closed. The Storage is unusable after this.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html?is-external=true#close--" title="class or interface in java.io">close</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a></code></dd>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html?is-external=true#close--" title="class or interface in java.lang">close</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang">AutoCloseable</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="getPiece-int-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPiece</h4>
<pre>public&nbsp;<a href="../../../net/i2p/data/ByteArray.html" title="class in net.i2p.data">ByteArray</a>&nbsp;getPiece(int&nbsp;piece,
                          int&nbsp;off,
                          int&nbsp;len)
                   throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Returns a byte array containing a portion of the requested piece or null if
 the storage doesn't contain the piece yet.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="putPiece-org.klomp.snark.PartialPiece-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>putPiece</h4>
<pre>public&nbsp;boolean&nbsp;putPiece(<a href="../../../org/klomp/snark/PartialPiece.html" title="class in org.klomp.snark">PartialPiece</a>&nbsp;pp)
                 throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Put the piece in the Storage if it is correct.
 Warning - takes a LONG time if complete as it does the recheck here.
 TODO thread the recheck?</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the piece was correct (sha metainfo hash
 matches), otherwise false.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - when some storage related error occurs.</dd>
</dl>
</li>
</ul>
<a name="cleanRAFs--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cleanRAFs</h4>
<pre>public&nbsp;void&nbsp;cleanRAFs()</pre>
<div class="block">Close unused RAFs - call periodically</div>
</li>
</ul>
<a name="main-java.lang.String:A-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>[]&nbsp;args)</pre>
<div class="block">Create a metainfo.
  Used in the installer build process; do not comment out.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.4</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Storage.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/klomp/snark/StaticSnark.html" title="class in org.klomp.snark"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../org/klomp/snark/StorageListener.html" title="interface in org.klomp.snark"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/klomp/snark/Storage.html" target="_top">Frames</a></li>
<li><a href="Storage.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
