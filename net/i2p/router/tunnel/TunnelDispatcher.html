<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (19) -->
<title>TunnelDispatcher (I2P Anonymous Network - Java Documentation - API Version 0.9.56)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: net.i2p.router.tunnel, class: TunnelDispatcher">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/TunnelDispatcher.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li><a href="#nested-class-summary">Nested</a></li>
<li>Field</li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">net.i2p.router.tunnel</a></div>
<h1 title="Class TunnelDispatcher" class="title">Class TunnelDispatcher</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">net.i2p.router.tunnel.TunnelDispatcher</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../Service.html" title="interface in net.i2p.router">Service</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">TunnelDispatcher</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="../Service.html" title="interface in net.i2p.router">Service</a></span></div>
<div class="block">Handle the actual processing and forwarding of messages through the
 various tunnels.

<pre>
  For each type of tunnel, it creates a chain of handlers, as follows:

  Following tunnels are created by us:

    Outbound Gateway &gt; 0 hops:
       PumpedTunnelGateway
         BatchedRouterPreprocessor -&gt; OutboundSender -&gt; OutboundReceiver -&gt; OutNetMessagePool

    Outbound zero-hop Gateway+Endpoint:
       TunnelGatewayZeroHop
         OutboundMessageDistributor -&gt; OutNetMessagePool

    Inbound Endpoint &gt; 0 hops:
       TunnelParticipant
        RouterFragmentHandler -&gt;  InboundEndpointProcessor -&gt; InboundMessageDistributor -&gt; InNetMessagePool

    Inbound zero-hop Gateway+Endpoint:
       TunnelGatewayZeroHop
         InboundMessageDistributor -&gt; InNetMessagePool


  Following tunnels are NOT created by us:

    Participant (not gateway or endpoint)
       TunnelParticipant
         HopProcessor -&gt; OutNetMessagePool

    Outbound Endpoint &gt; 0 hops:
       OutboundTunnelEndpoint
         RouterFragmentHandler -&gt; HopProcessor -&gt; OutboundMessageDistributor -&gt; OutNetMessagePool

    Inbound Gateway &gt; 0 hops:
       ThrottledPumpedTunnelGateway
         BatchedRouterPreprocessor -&gt; InboundSender -&gt; InboundGatewayReceiver -&gt; OutNetMessagePool

</pre></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>(package private) static enum&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="TunnelDispatcher.Location.html" class="type-name-link" title="enum in net.i2p.router.tunnel">TunnelDispatcher.Location</a></code></div>
<div class="col-last even-row-color">
<div class="block">for shouldDropParticipatingMessage()</div>
</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(net.i2p.router.RouterContext)" class="member-name-link">TunnelDispatcher</a><wbr>(<a href="../RouterContext.html" title="class in net.i2p.router">RouterContext</a>&nbsp;ctx)</code></div>
<div class="col-last even-row-color">
<div class="block">Creates a new instance of TunnelDispatcher</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button><button id="method-summary-table-tab6" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab6', 3)" class="table-tab">Deprecated Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#dispatch(net.i2p.data.i2np.TunnelDataMessage,net.i2p.data.Hash)" class="member-name-link">dispatch</a><wbr>(<a href="../../data/i2np/TunnelDataMessage.html" title="class in net.i2p.data.i2np">TunnelDataMessage</a>&nbsp;msg,
 <a href="../../data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;recvFrom)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">We are participating in a tunnel (perhaps we're even the endpoint), so 
 take the message and do what it says.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#dispatch(net.i2p.data.i2np.TunnelGatewayMessage)" class="member-name-link">dispatch</a><wbr>(<a href="../../data/i2np/TunnelGatewayMessage.html" title="class in net.i2p.data.i2np">TunnelGatewayMessage</a>&nbsp;msg)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">We are the inbound tunnel gateway, so encrypt it as necessary and forward
 it on.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#dispatchOutbound(net.i2p.data.i2np.I2NPMessage,net.i2p.data.TunnelId,net.i2p.data.Hash)" class="member-name-link">dispatchOutbound</a><wbr>(<a href="../../data/i2np/I2NPMessage.html" title="interface in net.i2p.data.i2np">I2NPMessage</a>&nbsp;msg,
 <a href="../../data/TunnelId.html" title="class in net.i2p.data">TunnelId</a>&nbsp;outboundTunnel,
 <a href="../../data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;targetPeer)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">We are the outbound tunnel gateway (we created it), so wrap up this message
 with instructions to be forwarded to the targetPeer when it reaches the 
 endpoint.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#dispatchOutbound(net.i2p.data.i2np.I2NPMessage,net.i2p.data.TunnelId,net.i2p.data.TunnelId,net.i2p.data.Hash)" class="member-name-link">dispatchOutbound</a><wbr>(<a href="../../data/i2np/I2NPMessage.html" title="interface in net.i2p.data.i2np">I2NPMessage</a>&nbsp;msg,
 <a href="../../data/TunnelId.html" title="class in net.i2p.data">TunnelId</a>&nbsp;outboundTunnel,
 <a href="../../data/TunnelId.html" title="class in net.i2p.data">TunnelId</a>&nbsp;targetTunnel,
 <a href="../../data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;targetPeer)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">We are the outbound tunnel gateway (we created it), so wrap up this message
 with instructions to be forwarded to the targetTunnel on the targetPeer when
 it reaches the endpoint.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getLastParticipatingExpiration()" class="member-name-link">getLastParticipatingExpiration</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">what is the date/time on which the last non-locally-created tunnel expires?</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../data/TunnelId.html" title="class in net.i2p.data">TunnelId</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getNewIBEPID()" class="member-name-link">getNewIBEPID</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get a new random receive tunnel ID that isn't a dup.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../data/TunnelId.html" title="class in net.i2p.data">TunnelId</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getNewIBZeroHopID()" class="member-name-link">getNewIBZeroHopID</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get a new random receive tunnel ID that isn't a dup.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../data/TunnelId.html" title="class in net.i2p.data">TunnelId</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getNewOBGWID()" class="member-name-link">getNewOBGWID</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get a new random send tunnel ID that isn't a dup.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getParticipatingCount()" class="member-name-link">getParticipatingCount</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getShareBandwidth(net.i2p.router.RouterContext)" class="member-name-link">getShareBandwidth</a><wbr>(<a href="../RouterContext.html" title="class in net.i2p.router">RouterContext</a>&nbsp;ctx)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#joinInbound(net.i2p.router.tunnel.TunnelCreatorConfig)" class="member-name-link">joinInbound</a><wbr>(<a href="TunnelCreatorConfig.html" title="class in net.i2p.router.tunnel">TunnelCreatorConfig</a>&nbsp;cfg)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">We are the inbound endpoint - we created this tunnel</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#joinInboundGateway(net.i2p.router.tunnel.HopConfig)" class="member-name-link">joinInboundGateway</a><wbr>(<a href="HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&nbsp;cfg)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">We are the inbound gateway in this tunnel, and did not create it</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#joinOutbound(net.i2p.router.tunnel.pool.PooledTunnelCreatorConfig)" class="member-name-link">joinOutbound</a><wbr>(<a href="pool/PooledTunnelCreatorConfig.html" title="class in net.i2p.router.tunnel.pool">PooledTunnelCreatorConfig</a>&nbsp;cfg)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">We are the outbound gateway - we created this tunnel</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#joinOutboundEndpoint(net.i2p.router.tunnel.HopConfig)" class="member-name-link">joinOutboundEndpoint</a><wbr>(<a href="HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&nbsp;cfg)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">We are the outbound endpoint in this tunnel, and did not create it</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#joinParticipant(net.i2p.router.tunnel.HopConfig)" class="member-name-link">joinParticipant</a><wbr>(<a href="HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&nbsp;cfg)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">We are a participant in this tunnel, but not as the endpoint or gateway</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#listParticipatingTunnels()" class="member-name-link">listParticipatingTunnels</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Only for console TunnelRenderer.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#remove(net.i2p.router.tunnel.HopConfig)" class="member-name-link">remove</a><wbr>(<a href="HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&nbsp;cfg)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">No longer participate in the tunnel that someone asked us to be a member of</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#remove(net.i2p.router.tunnel.TunnelCreatorConfig)" class="member-name-link">remove</a><wbr>(<a href="TunnelCreatorConfig.html" title="class in net.i2p.router.tunnel">TunnelCreatorConfig</a>&nbsp;cfg)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">We no longer want to participate in this tunnel that we created</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4 method-summary-table-tab6"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4 method-summary-table-tab6"><code><a href="#renderStatusHTML(java.io.Writer)" class="member-name-link">renderStatusHTML</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/Writer.html" title="class or interface in java.io" class="external-link">Writer</a>&nbsp;out)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4 method-summary-table-tab6">
<div class="block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">moved to router console</div>
</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#restart()" class="member-name-link">restart</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Perform a soft restart.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#shouldDropParticipatingMessage(net.i2p.router.tunnel.TunnelDispatcher.Location,int,int)" class="member-name-link">shouldDropParticipatingMessage</a><wbr>(<a href="TunnelDispatcher.Location.html" title="enum in net.i2p.router.tunnel">TunnelDispatcher.Location</a>&nbsp;loc,
 int&nbsp;type,
 int&nbsp;length)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Implement random early discard (RED) to enforce the share bandwidth limit.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#shutdown()" class="member-name-link">shutdown</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Instruct the service that the router is shutting down and that it should do
 whatever is necessary to go down gracefully.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#startup()" class="member-name-link">startup</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">startup</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateParticipatingStats(int)" class="member-name-link">updateParticipatingStats</a><wbr>(int&nbsp;ms)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Generate a current estimate of usage per-participating-tunnel lifetime.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(net.i2p.router.RouterContext)">
<h3>TunnelDispatcher</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">TunnelDispatcher</span><wbr><span class="parameters">(<a href="../RouterContext.html" title="class in net.i2p.router">RouterContext</a>&nbsp;ctx)</span></div>
<div class="block">Creates a new instance of TunnelDispatcher</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="joinOutbound(net.i2p.router.tunnel.pool.PooledTunnelCreatorConfig)">
<h3>joinOutbound</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">joinOutbound</span><wbr><span class="parameters">(<a href="pool/PooledTunnelCreatorConfig.html" title="class in net.i2p.router.tunnel.pool">PooledTunnelCreatorConfig</a>&nbsp;cfg)</span></div>
<div class="block">We are the outbound gateway - we created this tunnel</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>success; false if Tunnel ID is a duplicate</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="joinInbound(net.i2p.router.tunnel.TunnelCreatorConfig)">
<h3>joinInbound</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">joinInbound</span><wbr><span class="parameters">(<a href="TunnelCreatorConfig.html" title="class in net.i2p.router.tunnel">TunnelCreatorConfig</a>&nbsp;cfg)</span></div>
<div class="block">We are the inbound endpoint - we created this tunnel</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>success; false if Tunnel ID is a duplicate</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="joinParticipant(net.i2p.router.tunnel.HopConfig)">
<h3>joinParticipant</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">joinParticipant</span><wbr><span class="parameters">(<a href="HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&nbsp;cfg)</span></div>
<div class="block">We are a participant in this tunnel, but not as the endpoint or gateway</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>success; false if Tunnel ID is a duplicate</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="joinOutboundEndpoint(net.i2p.router.tunnel.HopConfig)">
<h3>joinOutboundEndpoint</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">joinOutboundEndpoint</span><wbr><span class="parameters">(<a href="HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&nbsp;cfg)</span></div>
<div class="block">We are the outbound endpoint in this tunnel, and did not create it</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>success; false if Tunnel ID is a duplicate</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="joinInboundGateway(net.i2p.router.tunnel.HopConfig)">
<h3>joinInboundGateway</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">joinInboundGateway</span><wbr><span class="parameters">(<a href="HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&nbsp;cfg)</span></div>
<div class="block">We are the inbound gateway in this tunnel, and did not create it</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>success; false if Tunnel ID is a duplicate</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getParticipatingCount()">
<h3>getParticipatingCount</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getParticipatingCount</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getNewOBGWID()">
<h3>getNewOBGWID</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../data/TunnelId.html" title="class in net.i2p.data">TunnelId</a></span>&nbsp;<span class="element-name">getNewOBGWID</span>()</div>
<div class="block">Get a new random send tunnel ID that isn't a dup.
  Note that we do not keep track of IDs for pending builds so this
  does not fully prevent joinOutbound() from failing later.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>0.9.5</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getNewIBEPID()">
<h3>getNewIBEPID</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../data/TunnelId.html" title="class in net.i2p.data">TunnelId</a></span>&nbsp;<span class="element-name">getNewIBEPID</span>()</div>
<div class="block">Get a new random receive tunnel ID that isn't a dup.
  Not for zero hop tunnels.
  Note that we do not keep track of IDs for pending builds so this
  does not fully prevent joinInbound() from failing later.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>0.9.5</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getNewIBZeroHopID()">
<h3>getNewIBZeroHopID</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../data/TunnelId.html" title="class in net.i2p.data">TunnelId</a></span>&nbsp;<span class="element-name">getNewIBZeroHopID</span>()</div>
<div class="block">Get a new random receive tunnel ID that isn't a dup.
  For zero hop tunnels only.
  Note that we do not keep track of IDs for pending builds so this
  does not fully prevent joinInbound() from failing later.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>0.9.5</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getLastParticipatingExpiration()">
<h3>getLastParticipatingExpiration</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getLastParticipatingExpiration</span>()</div>
<div class="block">what is the date/time on which the last non-locally-created tunnel expires?</div>
</section>
</li>
<li>
<section class="detail" id="remove(net.i2p.router.tunnel.TunnelCreatorConfig)">
<h3>remove</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">remove</span><wbr><span class="parameters">(<a href="TunnelCreatorConfig.html" title="class in net.i2p.router.tunnel">TunnelCreatorConfig</a>&nbsp;cfg)</span></div>
<div class="block">We no longer want to participate in this tunnel that we created</div>
</section>
</li>
<li>
<section class="detail" id="remove(net.i2p.router.tunnel.HopConfig)">
<h3>remove</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">remove</span><wbr><span class="parameters">(<a href="HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&nbsp;cfg)</span></div>
<div class="block">No longer participate in the tunnel that someone asked us to be a member of</div>
</section>
</li>
<li>
<section class="detail" id="dispatch(net.i2p.data.i2np.TunnelDataMessage,net.i2p.data.Hash)">
<h3>dispatch</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">dispatch</span><wbr><span class="parameters">(<a href="../../data/i2np/TunnelDataMessage.html" title="class in net.i2p.data.i2np">TunnelDataMessage</a>&nbsp;msg,
 <a href="../../data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;recvFrom)</span></div>
<div class="block">We are participating in a tunnel (perhaps we're even the endpoint), so 
 take the message and do what it says.  If there are later hops, that 
 means encrypt a layer and forward it on.  If there aren't later hops,
 how we handle it depends upon whether we created it or not.  If we didn't,
 simply honor the instructions.  If we did, unwrap all the layers of 
 encryption and honor those instructions (within reason).</div>
</section>
</li>
<li>
<section class="detail" id="dispatch(net.i2p.data.i2np.TunnelGatewayMessage)">
<h3>dispatch</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">dispatch</span><wbr><span class="parameters">(<a href="../../data/i2np/TunnelGatewayMessage.html" title="class in net.i2p.data.i2np">TunnelGatewayMessage</a>&nbsp;msg)</span></div>
<div class="block">We are the inbound tunnel gateway, so encrypt it as necessary and forward
 it on.</div>
</section>
</li>
<li>
<section class="detail" id="dispatchOutbound(net.i2p.data.i2np.I2NPMessage,net.i2p.data.TunnelId,net.i2p.data.Hash)">
<h3>dispatchOutbound</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">dispatchOutbound</span><wbr><span class="parameters">(<a href="../../data/i2np/I2NPMessage.html" title="interface in net.i2p.data.i2np">I2NPMessage</a>&nbsp;msg,
 <a href="../../data/TunnelId.html" title="class in net.i2p.data">TunnelId</a>&nbsp;outboundTunnel,
 <a href="../../data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;targetPeer)</span></div>
<div class="block">We are the outbound tunnel gateway (we created it), so wrap up this message
 with instructions to be forwarded to the targetPeer when it reaches the 
 endpoint.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>msg</code> - raw message to deliver to the target peer</dd>
<dd><code>outboundTunnel</code> - tunnel to send the message out, or null for direct</dd>
<dd><code>targetPeer</code> - peer to receive the message</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="dispatchOutbound(net.i2p.data.i2np.I2NPMessage,net.i2p.data.TunnelId,net.i2p.data.TunnelId,net.i2p.data.Hash)">
<h3>dispatchOutbound</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">dispatchOutbound</span><wbr><span class="parameters">(<a href="../../data/i2np/I2NPMessage.html" title="interface in net.i2p.data.i2np">I2NPMessage</a>&nbsp;msg,
 <a href="../../data/TunnelId.html" title="class in net.i2p.data">TunnelId</a>&nbsp;outboundTunnel,
 <a href="../../data/TunnelId.html" title="class in net.i2p.data">TunnelId</a>&nbsp;targetTunnel,
 <a href="../../data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;targetPeer)</span></div>
<div class="block">We are the outbound tunnel gateway (we created it), so wrap up this message
 with instructions to be forwarded to the targetTunnel on the targetPeer when
 it reaches the endpoint.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>msg</code> - raw message to deliver to the targetTunnel on the targetPeer</dd>
<dd><code>outboundTunnel</code> - tunnel to send the message out</dd>
<dd><code>targetTunnel</code> - tunnel on the targetPeer to deliver the message to, or null for direct</dd>
<dd><code>targetPeer</code> - gateway to the tunnel to receive the message</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="listParticipatingTunnels()">
<h3>listParticipatingTunnels</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&gt;</span>&nbsp;<span class="element-name">listParticipatingTunnels</span>()</div>
<div class="block">Only for console TunnelRenderer.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a copy</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateParticipatingStats(int)">
<h3>updateParticipatingStats</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">updateParticipatingStats</span><wbr><span class="parameters">(int&nbsp;ms)</span></div>
<div class="block">Generate a current estimate of usage per-participating-tunnel lifetime.
 The router code calls this every 'ms' millisecs.
 This is better than waiting until the tunnel expires to update the rate,
 as we want this to be current because it's an important part of
 the throttle code.
 Stay a little conservative by taking the counts only for tunnels 1-10m old
 and computing the average from that.</div>
</section>
</li>
<li>
<section class="detail" id="shouldDropParticipatingMessage(net.i2p.router.tunnel.TunnelDispatcher.Location,int,int)">
<h3>shouldDropParticipatingMessage</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">shouldDropParticipatingMessage</span><wbr><span class="parameters">(<a href="TunnelDispatcher.Location.html" title="enum in net.i2p.router.tunnel">TunnelDispatcher.Location</a>&nbsp;loc,
 int&nbsp;type,
 int&nbsp;length)</span></div>
<div class="block">Implement random early discard (RED) to enforce the share bandwidth limit.
 For now, this does not enforce the available bandwidth,
 we leave that to Throttle.
 This is similar to the code in ../RouterThrottleImpl.java
 We drop in proportion to how far over the limit we are.
 Perhaps an exponential function would be better?

 The drop probability is adjusted for the size of the message.
 At this stage, participants and IBGWs see a standard 1024 byte message.
 OBEPs however may see a wide variety of sizes.

 Network-wise, it's most efficient to drop OBEP messages, because they
 are unfragmented and we know their size. Therefore we drop the big ones
 and we drop a single wrapped I2CP message, not a fragment of one or more messages.
 Also, the OBEP is the earliest identifiable hop in the message's path
 (a plain participant could be earlier or later, but on average is later)</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>loc</code> - message hop location</dd>
<dd><code>type</code> - I2NP message type</dd>
<dd><code>length</code> - the length of the message</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="startup()">
<h3>startup</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">startup</span>()</div>
<div class="block">startup</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../Service.html#startup()">startup</a></code>&nbsp;in interface&nbsp;<code><a href="../Service.html" title="interface in net.i2p.router">Service</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getShareBandwidth(net.i2p.router.RouterContext)">
<h3>getShareBandwidth</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getShareBandwidth</span><wbr><span class="parameters">(<a href="../RouterContext.html" title="class in net.i2p.router">RouterContext</a>&nbsp;ctx)</span></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>in KBps</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="shutdown()">
<h3>shutdown</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">shutdown</span>()</div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="../Service.html#shutdown()">Service</a></code></span></div>
<div class="block">Instruct the service that the router is shutting down and that it should do
 whatever is necessary to go down gracefully.  It should not depend on other
 components at this point.  This call DOES block.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../Service.html#shutdown()">shutdown</a></code>&nbsp;in interface&nbsp;<code><a href="../Service.html" title="interface in net.i2p.router">Service</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="restart()">
<h3>restart</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">restart</span>()</div>
<div class="block"><span class="description-from-type-label">Description copied from interface:&nbsp;<code><a href="../Service.html#restart()">Service</a></code></span></div>
<div class="block">Perform a soft restart.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../Service.html#restart()">restart</a></code>&nbsp;in interface&nbsp;<code><a href="../Service.html" title="interface in net.i2p.router">Service</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="renderStatusHTML(java.io.Writer)">
<h3>renderStatusHTML</h3>
<div class="member-signature"><span class="annotations"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Deprecated.html" title="class or interface in java.lang" class="external-link">@Deprecated</a>
</span><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">renderStatusHTML</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/Writer.html" title="class or interface in java.io" class="external-link">Writer</a>&nbsp;out)</span>
                      throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="deprecation-block"><span class="deprecated-label">Deprecated.</span>
<div class="deprecation-comment">moved to router console</div>
</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../Service.html#renderStatusHTML(java.io.Writer)">renderStatusHTML</a></code>&nbsp;in interface&nbsp;<code><a href="../Service.html" title="interface in net.i2p.router">Service</a></code></dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
