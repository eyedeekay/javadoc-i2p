<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>TunnelDispatcher (I2P Anonymous Network - Java Documentation - API Version 0.9.56)</title>
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="TunnelDispatcher (I2P Anonymous Network - Java Documentation - API Version 0.9.56)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":9,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":42,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"],32:["t6","Deprecated Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TunnelDispatcher.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../net/i2p/router/tunnel/TunnelCreatorConfig.html" title="class in net.i2p.router.tunnel"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.Location.html" title="enum in net.i2p.router.tunnel"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?net/i2p/router/tunnel/TunnelDispatcher.html" target="_top">Frames</a></li>
<li><a href="TunnelDispatcher.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">net.i2p.router.tunnel</div>
<h2 title="Class TunnelDispatcher" class="title">Class TunnelDispatcher</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>net.i2p.router.tunnel.TunnelDispatcher</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../net/i2p/router/Service.html" title="interface in net.i2p.router">Service</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">TunnelDispatcher</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../net/i2p/router/Service.html" title="interface in net.i2p.router">Service</a></pre>
<div class="block">Handle the actual processing and forwarding of messages through the
 various tunnels.

<pre>
  For each type of tunnel, it creates a chain of handlers, as follows:

  Following tunnels are created by us:

    Outbound Gateway &gt; 0 hops:
       PumpedTunnelGateway
         BatchedRouterPreprocessor -&gt; OutboundSender -&gt; OutboundReceiver -&gt; OutNetMessagePool

    Outbound zero-hop Gateway+Endpoint:
       TunnelGatewayZeroHop
         OutboundMessageDistributor -&gt; OutNetMessagePool

    Inbound Endpoint &gt; 0 hops:
       TunnelParticipant
        RouterFragmentHandler -&gt;  InboundEndpointProcessor -&gt; InboundMessageDistributor -&gt; InNetMessagePool

    Inbound zero-hop Gateway+Endpoint:
       TunnelGatewayZeroHop
         InboundMessageDistributor -&gt; InNetMessagePool


  Following tunnels are NOT created by us:

    Participant (not gateway or endpoint)
       TunnelParticipant
         HopProcessor -&gt; OutNetMessagePool

    Outbound Endpoint &gt; 0 hops:
       OutboundTunnelEndpoint
         RouterFragmentHandler -&gt; HopProcessor -&gt; OutboundMessageDistributor -&gt; OutNetMessagePool

    Inbound Gateway &gt; 0 hops:
       ThrottledPumpedTunnelGateway
         BatchedRouterPreprocessor -&gt; InboundSender -&gt; InboundGatewayReceiver -&gt; OutNetMessagePool

</pre></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.Location.html" title="enum in net.i2p.router.tunnel">TunnelDispatcher.Location</a></span></code>
<div class="block">for shouldDropParticipatingMessage()</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.html#TunnelDispatcher-net.i2p.router.RouterContext-">TunnelDispatcher</a></span>(<a href="../../../../net/i2p/router/RouterContext.html" title="class in net.i2p.router">RouterContext</a>&nbsp;ctx)</code>
<div class="block">Creates a new instance of TunnelDispatcher</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t6" class="tableTab"><span><a href="javascript:show(32);">Deprecated Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.html#dispatch-net.i2p.data.i2np.TunnelDataMessage-net.i2p.data.Hash-">dispatch</a></span>(<a href="../../../../net/i2p/data/i2np/TunnelDataMessage.html" title="class in net.i2p.data.i2np">TunnelDataMessage</a>&nbsp;msg,
        <a href="../../../../net/i2p/data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;recvFrom)</code>
<div class="block">We are participating in a tunnel (perhaps we're even the endpoint), so 
 take the message and do what it says.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.html#dispatch-net.i2p.data.i2np.TunnelGatewayMessage-">dispatch</a></span>(<a href="../../../../net/i2p/data/i2np/TunnelGatewayMessage.html" title="class in net.i2p.data.i2np">TunnelGatewayMessage</a>&nbsp;msg)</code>
<div class="block">We are the inbound tunnel gateway, so encrypt it as necessary and forward
 it on.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.html#dispatchOutbound-net.i2p.data.i2np.I2NPMessage-net.i2p.data.TunnelId-net.i2p.data.Hash-">dispatchOutbound</a></span>(<a href="../../../../net/i2p/data/i2np/I2NPMessage.html" title="interface in net.i2p.data.i2np">I2NPMessage</a>&nbsp;msg,
                <a href="../../../../net/i2p/data/TunnelId.html" title="class in net.i2p.data">TunnelId</a>&nbsp;outboundTunnel,
                <a href="../../../../net/i2p/data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;targetPeer)</code>
<div class="block">We are the outbound tunnel gateway (we created it), so wrap up this message
 with instructions to be forwarded to the targetPeer when it reaches the 
 endpoint.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.html#dispatchOutbound-net.i2p.data.i2np.I2NPMessage-net.i2p.data.TunnelId-net.i2p.data.TunnelId-net.i2p.data.Hash-">dispatchOutbound</a></span>(<a href="../../../../net/i2p/data/i2np/I2NPMessage.html" title="interface in net.i2p.data.i2np">I2NPMessage</a>&nbsp;msg,
                <a href="../../../../net/i2p/data/TunnelId.html" title="class in net.i2p.data">TunnelId</a>&nbsp;outboundTunnel,
                <a href="../../../../net/i2p/data/TunnelId.html" title="class in net.i2p.data">TunnelId</a>&nbsp;targetTunnel,
                <a href="../../../../net/i2p/data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;targetPeer)</code>
<div class="block">We are the outbound tunnel gateway (we created it), so wrap up this message
 with instructions to be forwarded to the targetTunnel on the targetPeer when
 it reaches the endpoint.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.html#getLastParticipatingExpiration--">getLastParticipatingExpiration</a></span>()</code>
<div class="block">what is the date/time on which the last non-locally-created tunnel expires?</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/i2p/data/TunnelId.html" title="class in net.i2p.data">TunnelId</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.html#getNewIBEPID--">getNewIBEPID</a></span>()</code>
<div class="block">Get a new random receive tunnel ID that isn't a dup.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="../../../../net/i2p/data/TunnelId.html" title="class in net.i2p.data">TunnelId</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.html#getNewIBZeroHopID--">getNewIBZeroHopID</a></span>()</code>
<div class="block">Get a new random receive tunnel ID that isn't a dup.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="../../../../net/i2p/data/TunnelId.html" title="class in net.i2p.data">TunnelId</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.html#getNewOBGWID--">getNewOBGWID</a></span>()</code>
<div class="block">Get a new random send tunnel ID that isn't a dup.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.html#getParticipatingCount--">getParticipatingCount</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.html#getShareBandwidth-net.i2p.router.RouterContext-">getShareBandwidth</a></span>(<a href="../../../../net/i2p/router/RouterContext.html" title="class in net.i2p.router">RouterContext</a>&nbsp;ctx)</code>&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.html#joinInbound-net.i2p.router.tunnel.TunnelCreatorConfig-">joinInbound</a></span>(<a href="../../../../net/i2p/router/tunnel/TunnelCreatorConfig.html" title="class in net.i2p.router.tunnel">TunnelCreatorConfig</a>&nbsp;cfg)</code>
<div class="block">We are the inbound endpoint - we created this tunnel</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.html#joinInboundGateway-net.i2p.router.tunnel.HopConfig-">joinInboundGateway</a></span>(<a href="../../../../net/i2p/router/tunnel/HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&nbsp;cfg)</code>
<div class="block">We are the inbound gateway in this tunnel, and did not create it</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.html#joinOutbound-net.i2p.router.tunnel.pool.PooledTunnelCreatorConfig-">joinOutbound</a></span>(<a href="../../../../net/i2p/router/tunnel/pool/PooledTunnelCreatorConfig.html" title="class in net.i2p.router.tunnel.pool">PooledTunnelCreatorConfig</a>&nbsp;cfg)</code>
<div class="block">We are the outbound gateway - we created this tunnel</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.html#joinOutboundEndpoint-net.i2p.router.tunnel.HopConfig-">joinOutboundEndpoint</a></span>(<a href="../../../../net/i2p/router/tunnel/HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&nbsp;cfg)</code>
<div class="block">We are the outbound endpoint in this tunnel, and did not create it</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.html#joinParticipant-net.i2p.router.tunnel.HopConfig-">joinParticipant</a></span>(<a href="../../../../net/i2p/router/tunnel/HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&nbsp;cfg)</code>
<div class="block">We are a participant in this tunnel, but not as the endpoint or gateway</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../net/i2p/router/tunnel/HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.html#listParticipatingTunnels--">listParticipatingTunnels</a></span>()</code>
<div class="block">Only for console TunnelRenderer.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.html#remove-net.i2p.router.tunnel.HopConfig-">remove</a></span>(<a href="../../../../net/i2p/router/tunnel/HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&nbsp;cfg)</code>
<div class="block">No longer participate in the tunnel that someone asked us to be a member of</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.html#remove-net.i2p.router.tunnel.TunnelCreatorConfig-">remove</a></span>(<a href="../../../../net/i2p/router/tunnel/TunnelCreatorConfig.html" title="class in net.i2p.router.tunnel">TunnelCreatorConfig</a>&nbsp;cfg)</code>
<div class="block">We no longer want to participate in this tunnel that we created</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.html#renderStatusHTML-java.io.Writer-">renderStatusHTML</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/Writer.html?is-external=true" title="class or interface in java.io">Writer</a>&nbsp;out)</code>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;
<div class="block"><span class="deprecationComment">moved to router console</span></div>
</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.html#restart--">restart</a></span>()</code>
<div class="block">Perform a soft restart.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.html#shouldDropParticipatingMessage-net.i2p.router.tunnel.TunnelDispatcher.Location-int-int-">shouldDropParticipatingMessage</a></span>(<a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.Location.html" title="enum in net.i2p.router.tunnel">TunnelDispatcher.Location</a>&nbsp;loc,
                              int&nbsp;type,
                              int&nbsp;length)</code>
<div class="block">Implement random early discard (RED) to enforce the share bandwidth limit.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.html#shutdown--">shutdown</a></span>()</code>
<div class="block">Instruct the service that the router is shutting down and that it should do
 whatever is necessary to go down gracefully.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.html#startup--">startup</a></span>()</code>
<div class="block">startup</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.html#updateParticipatingStats-int-">updateParticipatingStats</a></span>(int&nbsp;ms)</code>
<div class="block">Generate a current estimate of usage per-participating-tunnel lifetime.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="TunnelDispatcher-net.i2p.router.RouterContext-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>TunnelDispatcher</h4>
<pre>public&nbsp;TunnelDispatcher(<a href="../../../../net/i2p/router/RouterContext.html" title="class in net.i2p.router">RouterContext</a>&nbsp;ctx)</pre>
<div class="block">Creates a new instance of TunnelDispatcher</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="joinOutbound-net.i2p.router.tunnel.pool.PooledTunnelCreatorConfig-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>joinOutbound</h4>
<pre>public&nbsp;boolean&nbsp;joinOutbound(<a href="../../../../net/i2p/router/tunnel/pool/PooledTunnelCreatorConfig.html" title="class in net.i2p.router.tunnel.pool">PooledTunnelCreatorConfig</a>&nbsp;cfg)</pre>
<div class="block">We are the outbound gateway - we created this tunnel</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>success; false if Tunnel ID is a duplicate</dd>
</dl>
</li>
</ul>
<a name="joinInbound-net.i2p.router.tunnel.TunnelCreatorConfig-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>joinInbound</h4>
<pre>public&nbsp;boolean&nbsp;joinInbound(<a href="../../../../net/i2p/router/tunnel/TunnelCreatorConfig.html" title="class in net.i2p.router.tunnel">TunnelCreatorConfig</a>&nbsp;cfg)</pre>
<div class="block">We are the inbound endpoint - we created this tunnel</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>success; false if Tunnel ID is a duplicate</dd>
</dl>
</li>
</ul>
<a name="joinParticipant-net.i2p.router.tunnel.HopConfig-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>joinParticipant</h4>
<pre>public&nbsp;boolean&nbsp;joinParticipant(<a href="../../../../net/i2p/router/tunnel/HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&nbsp;cfg)</pre>
<div class="block">We are a participant in this tunnel, but not as the endpoint or gateway</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>success; false if Tunnel ID is a duplicate</dd>
</dl>
</li>
</ul>
<a name="joinOutboundEndpoint-net.i2p.router.tunnel.HopConfig-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>joinOutboundEndpoint</h4>
<pre>public&nbsp;boolean&nbsp;joinOutboundEndpoint(<a href="../../../../net/i2p/router/tunnel/HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&nbsp;cfg)</pre>
<div class="block">We are the outbound endpoint in this tunnel, and did not create it</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>success; false if Tunnel ID is a duplicate</dd>
</dl>
</li>
</ul>
<a name="joinInboundGateway-net.i2p.router.tunnel.HopConfig-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>joinInboundGateway</h4>
<pre>public&nbsp;boolean&nbsp;joinInboundGateway(<a href="../../../../net/i2p/router/tunnel/HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&nbsp;cfg)</pre>
<div class="block">We are the inbound gateway in this tunnel, and did not create it</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>success; false if Tunnel ID is a duplicate</dd>
</dl>
</li>
</ul>
<a name="getParticipatingCount--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getParticipatingCount</h4>
<pre>public&nbsp;int&nbsp;getParticipatingCount()</pre>
</li>
</ul>
<a name="getNewOBGWID--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNewOBGWID</h4>
<pre>public&nbsp;<a href="../../../../net/i2p/data/TunnelId.html" title="class in net.i2p.data">TunnelId</a>&nbsp;getNewOBGWID()</pre>
<div class="block">Get a new random send tunnel ID that isn't a dup.
  Note that we do not keep track of IDs for pending builds so this
  does not fully prevent joinOutbound() from failing later.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.5</dd>
</dl>
</li>
</ul>
<a name="getNewIBEPID--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNewIBEPID</h4>
<pre>public&nbsp;<a href="../../../../net/i2p/data/TunnelId.html" title="class in net.i2p.data">TunnelId</a>&nbsp;getNewIBEPID()</pre>
<div class="block">Get a new random receive tunnel ID that isn't a dup.
  Not for zero hop tunnels.
  Note that we do not keep track of IDs for pending builds so this
  does not fully prevent joinInbound() from failing later.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.5</dd>
</dl>
</li>
</ul>
<a name="getNewIBZeroHopID--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNewIBZeroHopID</h4>
<pre>public&nbsp;<a href="../../../../net/i2p/data/TunnelId.html" title="class in net.i2p.data">TunnelId</a>&nbsp;getNewIBZeroHopID()</pre>
<div class="block">Get a new random receive tunnel ID that isn't a dup.
  For zero hop tunnels only.
  Note that we do not keep track of IDs for pending builds so this
  does not fully prevent joinInbound() from failing later.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.5</dd>
</dl>
</li>
</ul>
<a name="getLastParticipatingExpiration--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastParticipatingExpiration</h4>
<pre>public&nbsp;long&nbsp;getLastParticipatingExpiration()</pre>
<div class="block">what is the date/time on which the last non-locally-created tunnel expires?</div>
</li>
</ul>
<a name="remove-net.i2p.router.tunnel.TunnelCreatorConfig-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>remove</h4>
<pre>public&nbsp;void&nbsp;remove(<a href="../../../../net/i2p/router/tunnel/TunnelCreatorConfig.html" title="class in net.i2p.router.tunnel">TunnelCreatorConfig</a>&nbsp;cfg)</pre>
<div class="block">We no longer want to participate in this tunnel that we created</div>
</li>
</ul>
<a name="remove-net.i2p.router.tunnel.HopConfig-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>remove</h4>
<pre>public&nbsp;void&nbsp;remove(<a href="../../../../net/i2p/router/tunnel/HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&nbsp;cfg)</pre>
<div class="block">No longer participate in the tunnel that someone asked us to be a member of</div>
</li>
</ul>
<a name="dispatch-net.i2p.data.i2np.TunnelDataMessage-net.i2p.data.Hash-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dispatch</h4>
<pre>public&nbsp;void&nbsp;dispatch(<a href="../../../../net/i2p/data/i2np/TunnelDataMessage.html" title="class in net.i2p.data.i2np">TunnelDataMessage</a>&nbsp;msg,
                     <a href="../../../../net/i2p/data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;recvFrom)</pre>
<div class="block">We are participating in a tunnel (perhaps we're even the endpoint), so 
 take the message and do what it says.  If there are later hops, that 
 means encrypt a layer and forward it on.  If there aren't later hops,
 how we handle it depends upon whether we created it or not.  If we didn't,
 simply honor the instructions.  If we did, unwrap all the layers of 
 encryption and honor those instructions (within reason).</div>
</li>
</ul>
<a name="dispatch-net.i2p.data.i2np.TunnelGatewayMessage-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dispatch</h4>
<pre>public&nbsp;void&nbsp;dispatch(<a href="../../../../net/i2p/data/i2np/TunnelGatewayMessage.html" title="class in net.i2p.data.i2np">TunnelGatewayMessage</a>&nbsp;msg)</pre>
<div class="block">We are the inbound tunnel gateway, so encrypt it as necessary and forward
 it on.</div>
</li>
</ul>
<a name="dispatchOutbound-net.i2p.data.i2np.I2NPMessage-net.i2p.data.TunnelId-net.i2p.data.Hash-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dispatchOutbound</h4>
<pre>public&nbsp;void&nbsp;dispatchOutbound(<a href="../../../../net/i2p/data/i2np/I2NPMessage.html" title="interface in net.i2p.data.i2np">I2NPMessage</a>&nbsp;msg,
                             <a href="../../../../net/i2p/data/TunnelId.html" title="class in net.i2p.data">TunnelId</a>&nbsp;outboundTunnel,
                             <a href="../../../../net/i2p/data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;targetPeer)</pre>
<div class="block">We are the outbound tunnel gateway (we created it), so wrap up this message
 with instructions to be forwarded to the targetPeer when it reaches the 
 endpoint.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>msg</code> - raw message to deliver to the target peer</dd>
<dd><code>outboundTunnel</code> - tunnel to send the message out, or null for direct</dd>
<dd><code>targetPeer</code> - peer to receive the message</dd>
</dl>
</li>
</ul>
<a name="dispatchOutbound-net.i2p.data.i2np.I2NPMessage-net.i2p.data.TunnelId-net.i2p.data.TunnelId-net.i2p.data.Hash-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dispatchOutbound</h4>
<pre>public&nbsp;void&nbsp;dispatchOutbound(<a href="../../../../net/i2p/data/i2np/I2NPMessage.html" title="interface in net.i2p.data.i2np">I2NPMessage</a>&nbsp;msg,
                             <a href="../../../../net/i2p/data/TunnelId.html" title="class in net.i2p.data">TunnelId</a>&nbsp;outboundTunnel,
                             <a href="../../../../net/i2p/data/TunnelId.html" title="class in net.i2p.data">TunnelId</a>&nbsp;targetTunnel,
                             <a href="../../../../net/i2p/data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;targetPeer)</pre>
<div class="block">We are the outbound tunnel gateway (we created it), so wrap up this message
 with instructions to be forwarded to the targetTunnel on the targetPeer when
 it reaches the endpoint.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>msg</code> - raw message to deliver to the targetTunnel on the targetPeer</dd>
<dd><code>outboundTunnel</code> - tunnel to send the message out</dd>
<dd><code>targetTunnel</code> - tunnel on the targetPeer to deliver the message to, or null for direct</dd>
<dd><code>targetPeer</code> - gateway to the tunnel to receive the message</dd>
</dl>
</li>
</ul>
<a name="listParticipatingTunnels--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>listParticipatingTunnels</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../net/i2p/router/tunnel/HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&gt;&nbsp;listParticipatingTunnels()</pre>
<div class="block">Only for console TunnelRenderer.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a copy</dd>
</dl>
</li>
</ul>
<a name="updateParticipatingStats-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateParticipatingStats</h4>
<pre>public&nbsp;void&nbsp;updateParticipatingStats(int&nbsp;ms)</pre>
<div class="block">Generate a current estimate of usage per-participating-tunnel lifetime.
 The router code calls this every 'ms' millisecs.
 This is better than waiting until the tunnel expires to update the rate,
 as we want this to be current because it's an important part of
 the throttle code.
 Stay a little conservative by taking the counts only for tunnels 1-10m old
 and computing the average from that.</div>
</li>
</ul>
<a name="shouldDropParticipatingMessage-net.i2p.router.tunnel.TunnelDispatcher.Location-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shouldDropParticipatingMessage</h4>
<pre>public&nbsp;boolean&nbsp;shouldDropParticipatingMessage(<a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.Location.html" title="enum in net.i2p.router.tunnel">TunnelDispatcher.Location</a>&nbsp;loc,
                                              int&nbsp;type,
                                              int&nbsp;length)</pre>
<div class="block">Implement random early discard (RED) to enforce the share bandwidth limit.
 For now, this does not enforce the available bandwidth,
 we leave that to Throttle.
 This is similar to the code in ../RouterThrottleImpl.java
 We drop in proportion to how far over the limit we are.
 Perhaps an exponential function would be better?

 The drop probability is adjusted for the size of the message.
 At this stage, participants and IBGWs see a standard 1024 byte message.
 OBEPs however may see a wide variety of sizes.

 Network-wise, it's most efficient to drop OBEP messages, because they
 are unfragmented and we know their size. Therefore we drop the big ones
 and we drop a single wrapped I2CP message, not a fragment of one or more messages.
 Also, the OBEP is the earliest identifiable hop in the message's path
 (a plain participant could be earlier or later, but on average is later)</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>loc</code> - message hop location</dd>
<dd><code>type</code> - I2NP message type</dd>
<dd><code>length</code> - the length of the message</dd>
</dl>
</li>
</ul>
<a name="startup--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>startup</h4>
<pre>public&nbsp;void&nbsp;startup()</pre>
<div class="block">startup</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../net/i2p/router/Service.html#startup--">startup</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../net/i2p/router/Service.html" title="interface in net.i2p.router">Service</a></code></dd>
</dl>
</li>
</ul>
<a name="getShareBandwidth-net.i2p.router.RouterContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getShareBandwidth</h4>
<pre>public static&nbsp;int&nbsp;getShareBandwidth(<a href="../../../../net/i2p/router/RouterContext.html" title="class in net.i2p.router">RouterContext</a>&nbsp;ctx)</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>in KBps</dd>
</dl>
</li>
</ul>
<a name="shutdown--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutdown</h4>
<pre>public&nbsp;void&nbsp;shutdown()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../net/i2p/router/Service.html#shutdown--">Service</a></code></span></div>
<div class="block">Instruct the service that the router is shutting down and that it should do
 whatever is necessary to go down gracefully.  It should not depend on other
 components at this point.  This call DOES block.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../net/i2p/router/Service.html#shutdown--">shutdown</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../net/i2p/router/Service.html" title="interface in net.i2p.router">Service</a></code></dd>
</dl>
</li>
</ul>
<a name="restart--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restart</h4>
<pre>public&nbsp;void&nbsp;restart()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../net/i2p/router/Service.html#restart--">Service</a></code></span></div>
<div class="block">Perform a soft restart.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../net/i2p/router/Service.html#restart--">restart</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../net/i2p/router/Service.html" title="interface in net.i2p.router">Service</a></code></dd>
</dl>
</li>
</ul>
<a name="renderStatusHTML-java.io.Writer-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>renderStatusHTML</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Deprecated.html?is-external=true" title="class or interface in java.lang">@Deprecated</a>
public&nbsp;void&nbsp;renderStatusHTML(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/Writer.html?is-external=true" title="class or interface in java.io">Writer</a>&nbsp;out)
                                  throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;<span class="deprecationComment">moved to router console</span></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../net/i2p/router/Service.html#renderStatusHTML-java.io.Writer-">renderStatusHTML</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../net/i2p/router/Service.html" title="interface in net.i2p.router">Service</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TunnelDispatcher.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../net/i2p/router/tunnel/TunnelCreatorConfig.html" title="class in net.i2p.router.tunnel"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../net/i2p/router/tunnel/TunnelDispatcher.Location.html" title="enum in net.i2p.router.tunnel"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?net/i2p/router/tunnel/TunnelDispatcher.html" target="_top">Frames</a></li>
<li><a href="TunnelDispatcher.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
