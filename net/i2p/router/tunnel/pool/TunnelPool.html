<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (18) -->
<title>TunnelPool (I2P Anonymous Network - Java Documentation - API Version 0.9.55)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: net.i2p.router.tunnel.pool, class: TunnelPool">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon"></span><span class="nav-bar-toggle-icon"></span><span class="nav-bar-toggle-icon"></span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/TunnelPool.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li><a href="#field-summary">Field</a></li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li><a href="#field-detail">Field</a></li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">net.i2p.router.tunnel.pool</a></div>
<h1 title="Class TunnelPool" class="title">Class TunnelPool</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">net.i2p.router.tunnel.pool.TunnelPool</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="AliasedTunnelPool.html" title="class in net.i2p.router.tunnel.pool">AliasedTunnelPool</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">TunnelPool</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">A group of tunnels for the router or a particular client, in a single direction.
  Public only for TunnelRenderer in router console.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>protected boolean</code></div>
<div class="col-second even-row-color"><code><a href="#_alive" class="member-name-link">_alive</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected final <a href="../../RouterContext.html" title="class in net.i2p.router">RouterContext</a></code></div>
<div class="col-second odd-row-color"><code><a href="#_context" class="member-name-link">_context</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected final <a href="../../../util/Log.html" title="class in net.i2p.util">Log</a></code></div>
<div class="col-second even-row-color"><code><a href="#_log" class="member-name-link">_log</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(net.i2p.router.RouterContext,net.i2p.router.tunnel.pool.TunnelPoolManager,net.i2p.router.TunnelPoolSettings,net.i2p.router.tunnel.pool.TunnelPeerSelector)" class="member-name-link">TunnelPool</a><wbr>(<a href="../../RouterContext.html" title="class in net.i2p.router">RouterContext</a>&nbsp;ctx,
 <a href="TunnelPoolManager.html" title="class in net.i2p.router.tunnel.pool">TunnelPoolManager</a>&nbsp;mgr,
 <a href="../../TunnelPoolSettings.html" title="class in net.i2p.router">TunnelPoolSettings</a>&nbsp;settings,
 <a href="TunnelPeerSelector.html" title="class in net.i2p.router.tunnel.pool">TunnelPeerSelector</a>&nbsp;sel)</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addTunnel(net.i2p.router.TunnelInfo)" class="member-name-link">addTunnel</a><wbr>(<a href="../../TunnelInfo.html" title="interface in net.i2p.router">TunnelInfo</a>&nbsp;info)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Add to the pool.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#buildComplete(net.i2p.router.tunnel.pool.PooledTunnelCreatorConfig,net.i2p.router.tunnel.pool.BuildExecutor.Result)" class="member-name-link">buildComplete</a><wbr>(<a href="PooledTunnelCreatorConfig.html" title="class in net.i2p.router.tunnel.pool">PooledTunnelCreatorConfig</a>&nbsp;cfg,
 <a href="BuildExecutor.Result.html" title="enum in net.i2p.router.tunnel.pool">BuildExecutor.Result</a>&nbsp;result)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Remove from the _inprogress list and call addTunnel() if result is SUCCESS.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#buildFallback()" class="member-name-link">buildFallback</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This will build a fallback (zero-hop) tunnel ONLY if
 this pool is exploratory, or the settings allow it.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) <a href="PooledTunnelCreatorConfig.html" title="class in net.i2p.router.tunnel.pool">PooledTunnelCreatorConfig</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#configureNewTunnel()" class="member-name-link">configureNewTunnel</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This only sets the peers and creation/expiration times in the configuration.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#countHowManyToBuild()" class="member-name-link">countHowManyToBuild</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gather the data to see how many tunnels to build, and then actually compute that value (delegated to
 the countHowManyToBuild function below)</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getConsecutiveBuildTimeouts()" class="member-name-link">getConsecutiveBuildTimeouts</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getLifetimeProcessed()" class="member-name-link">getLifetimeProcessed</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getRateName()" class="member-name-link">getRateName</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">RateStat name for the bandwidth graph</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../TunnelPoolSettings.html" title="class in net.i2p.router">TunnelPoolSettings</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getSettings()" class="member-name-link">getSettings</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../TunnelInfo.html" title="interface in net.i2p.router">TunnelInfo</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getTunnel(net.i2p.data.TunnelId)" class="member-name-link">getTunnel</a><wbr>(<a href="../../../data/TunnelId.html" title="class in net.i2p.data">TunnelId</a>&nbsp;gatewayId)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getTunnelCount()" class="member-name-link">getTunnelCount</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">duplicate of size(), let's pick one</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isAlive()" class="member-name-link">isAlive</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Is this pool running AND either exploratory, or tracked by the client manager?
  A pool will be alive but not tracked after the client manager removes it
  but before all the tunnels have expired.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="PooledTunnelCreatorConfig.html" title="class in net.i2p.router.tunnel.pool">PooledTunnelCreatorConfig</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#listPending()" class="member-name-link">listPending</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">list of tunnelInfo instances of tunnels currently being built</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../TunnelInfo.html" title="interface in net.i2p.router">TunnelInfo</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#listTunnels()" class="member-name-link">listTunnels</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return a list of tunnels in the pool</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../../../data/LeaseSet.html" title="class in net.i2p.data">LeaseSet</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#locked_buildNewLeaseSet()" class="member-name-link">locked_buildNewLeaseSet</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Build a leaseSet with the required tunnels that aren't about to expire.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#needFallback()" class="member-name-link">needFallback</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Do we really need more fallbacks?
 Used to prevent a zillion of them.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#refreshLeaseSet()" class="member-name-link">refreshLeaseSet</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">noop for outbound and exploratory</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#removeTunnel(net.i2p.router.TunnelInfo)" class="member-name-link">removeTunnel</a><wbr>(<a href="../../TunnelInfo.html" title="interface in net.i2p.router">TunnelInfo</a>&nbsp;info)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Remove from the pool.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) <a href="../../TunnelInfo.html" title="interface in net.i2p.router">TunnelInfo</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#selectTunnel()" class="member-name-link">selectTunnel</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Pull a random tunnel out of the pool.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) <a href="../../TunnelInfo.html" title="interface in net.i2p.router">TunnelInfo</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#selectTunnel(net.i2p.data.Hash)" class="member-name-link">selectTunnel</a><wbr>(<a href="../../../data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;closestTo)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Return the tunnel from the pool that is XOR-closet to the target.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setSettings(net.i2p.router.TunnelPoolSettings)" class="member-name-link">setSettings</a><wbr>(<a href="../../TunnelPoolSettings.html" title="class in net.i2p.router">TunnelPoolSettings</a>&nbsp;settings)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#shutdown()" class="member-name-link">shutdown</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#size()" class="member-name-link">size</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">duplicate of getTunnelCount(), let's pick one</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#startup()" class="member-name-link">startup</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Warning, this may be called more than once
  (without an intervening shutdown()) if the
  tunnel is stopped and then restarted by the client manager with the same
  Destination (i.e.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toString()" class="member-name-link">toString</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#tunnelFailed(net.i2p.router.TunnelInfo)" class="member-name-link">tunnelFailed</a><wbr>(<a href="../../TunnelInfo.html" title="interface in net.i2p.router">TunnelInfo</a>&nbsp;cfg)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Remove the tunnel and blame all the peers (not necessarily equally).</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>(package private) void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#tunnelFailed(net.i2p.router.TunnelInfo,net.i2p.data.Hash)" class="member-name-link">tunnelFailed</a><wbr>(<a href="../../TunnelInfo.html" title="interface in net.i2p.router">TunnelInfo</a>&nbsp;cfg,
 <a href="../../../data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;blamePeer)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Remove the tunnel and blame only one peer.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="_context">
<h3>_context</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="../../RouterContext.html" title="class in net.i2p.router">RouterContext</a></span>&nbsp;<span class="element-name">_context</span></div>
</section>
</li>
<li>
<section class="detail" id="_log">
<h3>_log</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="../../../util/Log.html" title="class in net.i2p.util">Log</a></span>&nbsp;<span class="element-name">_log</span></div>
</section>
</li>
<li>
<section class="detail" id="_alive">
<h3>_alive</h3>
<div class="member-signature"><span class="modifiers">protected volatile</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">_alive</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(net.i2p.router.RouterContext,net.i2p.router.tunnel.pool.TunnelPoolManager,net.i2p.router.TunnelPoolSettings,net.i2p.router.tunnel.pool.TunnelPeerSelector)">
<h3>TunnelPool</h3>
<div class="member-signature"><span class="element-name">TunnelPool</span><wbr><span class="parameters">(<a href="../../RouterContext.html" title="class in net.i2p.router">RouterContext</a>&nbsp;ctx,
 <a href="TunnelPoolManager.html" title="class in net.i2p.router.tunnel.pool">TunnelPoolManager</a>&nbsp;mgr,
 <a href="../../TunnelPoolSettings.html" title="class in net.i2p.router">TunnelPoolSettings</a>&nbsp;settings,
 <a href="TunnelPeerSelector.html" title="class in net.i2p.router.tunnel.pool">TunnelPeerSelector</a>&nbsp;sel)</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="startup()">
<h3>startup</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">startup</span>()</div>
<div class="block">Warning, this may be called more than once
  (without an intervening shutdown()) if the
  tunnel is stopped and then restarted by the client manager with the same
  Destination (i.e. for servers or clients w/ persistent key,
  or restarting close-on-idle clients)</div>
</section>
</li>
<li>
<section class="detail" id="shutdown()">
<h3>shutdown</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">shutdown</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getRateName()">
<h3>getRateName</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">getRateName</span>()</div>
<div class="block">RateStat name for the bandwidth graph</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>non-null</dd>
<dt>Since:</dt>
<dd>0.9.35</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="selectTunnel()">
<h3>selectTunnel</h3>
<div class="member-signature"><span class="return-type"><a href="../../TunnelInfo.html" title="interface in net.i2p.router">TunnelInfo</a></span>&nbsp;<span class="element-name">selectTunnel</span>()</div>
<div class="block">Pull a random tunnel out of the pool.  If there are none available but
 the pool is configured to allow 0hop tunnels, this builds a fake one
 and returns it.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>null on failure, but it should always build and return a fallback</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="selectTunnel(net.i2p.data.Hash)">
<h3>selectTunnel</h3>
<div class="member-signature"><span class="return-type"><a href="../../TunnelInfo.html" title="interface in net.i2p.router">TunnelInfo</a></span>&nbsp;<span class="element-name">selectTunnel</span><wbr><span class="parameters">(<a href="../../../data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;closestTo)</span></div>
<div class="block">Return the tunnel from the pool that is XOR-closet to the target.
 By using this instead of the random selectTunnel(),
 we force some locality in OBEP-IBGW connections to minimize
 those connections network-wide.

 Does not check for backlogged next peer.
 Does not return an expired tunnel.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>null on failure</dd>
<dt>Since:</dt>
<dd>0.8.10</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getTunnel(net.i2p.data.TunnelId)">
<h3>getTunnel</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../TunnelInfo.html" title="interface in net.i2p.router">TunnelInfo</a></span>&nbsp;<span class="element-name">getTunnel</span><wbr><span class="parameters">(<a href="../../../data/TunnelId.html" title="class in net.i2p.data">TunnelId</a>&nbsp;gatewayId)</span></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>gatewayId</code> - for inbound, the GW rcv tunnel ID; for outbound, the GW send tunnel ID.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="listTunnels()">
<h3>listTunnels</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../../TunnelInfo.html" title="interface in net.i2p.router">TunnelInfo</a>&gt;</span>&nbsp;<span class="element-name">listTunnels</span>()</div>
<div class="block">Return a list of tunnels in the pool</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>A copy of the list of TunnelInfo objects</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="needFallback()">
<h3>needFallback</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">needFallback</span>()</div>
<div class="block">Do we really need more fallbacks?
 Used to prevent a zillion of them.
 Does not check config, only call if config allows zero hop.</div>
</section>
</li>
<li>
<section class="detail" id="listPending()">
<h3>listPending</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="PooledTunnelCreatorConfig.html" title="class in net.i2p.router.tunnel.pool">PooledTunnelCreatorConfig</a>&gt;</span>&nbsp;<span class="element-name">listPending</span>()</div>
<div class="block">list of tunnelInfo instances of tunnels currently being built</div>
</section>
</li>
<li>
<section class="detail" id="getTunnelCount()">
<h3>getTunnelCount</h3>
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name">getTunnelCount</span>()</div>
<div class="block">duplicate of size(), let's pick one</div>
</section>
</li>
<li>
<section class="detail" id="getSettings()">
<h3>getSettings</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../TunnelPoolSettings.html" title="class in net.i2p.router">TunnelPoolSettings</a></span>&nbsp;<span class="element-name">getSettings</span>()</div>
</section>
</li>
<li>
<section class="detail" id="setSettings(net.i2p.router.TunnelPoolSettings)">
<h3>setSettings</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">setSettings</span><wbr><span class="parameters">(<a href="../../TunnelPoolSettings.html" title="class in net.i2p.router">TunnelPoolSettings</a>&nbsp;settings)</span></div>
</section>
</li>
<li>
<section class="detail" id="isAlive()">
<h3>isAlive</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isAlive</span>()</div>
<div class="block">Is this pool running AND either exploratory, or tracked by the client manager?
  A pool will be alive but not tracked after the client manager removes it
  but before all the tunnels have expired.</div>
</section>
</li>
<li>
<section class="detail" id="size()">
<h3>size</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">size</span>()</div>
<div class="block">duplicate of getTunnelCount(), let's pick one</div>
</section>
</li>
<li>
<section class="detail" id="addTunnel(net.i2p.router.TunnelInfo)">
<h3>addTunnel</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">addTunnel</span><wbr><span class="parameters">(<a href="../../TunnelInfo.html" title="interface in net.i2p.router">TunnelInfo</a>&nbsp;info)</span></div>
<div class="block">Add to the pool.</div>
</section>
</li>
<li>
<section class="detail" id="removeTunnel(net.i2p.router.TunnelInfo)">
<h3>removeTunnel</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">removeTunnel</span><wbr><span class="parameters">(<a href="../../TunnelInfo.html" title="interface in net.i2p.router">TunnelInfo</a>&nbsp;info)</span></div>
<div class="block">Remove from the pool.</div>
</section>
</li>
<li>
<section class="detail" id="tunnelFailed(net.i2p.router.TunnelInfo)">
<h3>tunnelFailed</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">tunnelFailed</span><wbr><span class="parameters">(<a href="../../TunnelInfo.html" title="interface in net.i2p.router">TunnelInfo</a>&nbsp;cfg)</span></div>
<div class="block">Remove the tunnel and blame all the peers (not necessarily equally).
  This may be called multiple times from TestJob.</div>
</section>
</li>
<li>
<section class="detail" id="tunnelFailed(net.i2p.router.TunnelInfo,net.i2p.data.Hash)">
<h3>tunnelFailed</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">tunnelFailed</span><wbr><span class="parameters">(<a href="../../TunnelInfo.html" title="interface in net.i2p.router">TunnelInfo</a>&nbsp;cfg,
 <a href="../../../data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;blamePeer)</span></div>
<div class="block">Remove the tunnel and blame only one peer.
  This may be called multiple times.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>0.8.13</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="refreshLeaseSet()">
<h3>refreshLeaseSet</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">refreshLeaseSet</span>()</div>
<div class="block">noop for outbound and exploratory</div>
</section>
</li>
<li>
<section class="detail" id="buildFallback()">
<h3>buildFallback</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">buildFallback</span>()</div>
<div class="block">This will build a fallback (zero-hop) tunnel ONLY if
 this pool is exploratory, or the settings allow it.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if a fallback tunnel is built</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="locked_buildNewLeaseSet()">
<h3>locked_buildNewLeaseSet</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../../../data/LeaseSet.html" title="class in net.i2p.data">LeaseSet</a></span>&nbsp;<span class="element-name">locked_buildNewLeaseSet</span>()</div>
<div class="block">Build a leaseSet with the required tunnels that aren't about to expire.
 Caller must synchronize on _tunnels.
 The returned LeaseSet will be incomplete; it will not have the destination
 set and will not be signed. Only the leases will be included.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>null on failure</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getLifetimeProcessed()">
<h3>getLifetimeProcessed</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getLifetimeProcessed</span>()</div>
</section>
</li>
<li>
<section class="detail" id="countHowManyToBuild()">
<h3>countHowManyToBuild</h3>
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name">countHowManyToBuild</span>()</div>
<div class="block">Gather the data to see how many tunnels to build, and then actually compute that value (delegated to
 the countHowManyToBuild function below)</div>
</section>
</li>
<li>
<section class="detail" id="configureNewTunnel()">
<h3>configureNewTunnel</h3>
<div class="member-signature"><span class="return-type"><a href="PooledTunnelCreatorConfig.html" title="class in net.i2p.router.tunnel.pool">PooledTunnelCreatorConfig</a></span>&nbsp;<span class="element-name">configureNewTunnel</span>()</div>
<div class="block">This only sets the peers and creation/expiration times in the configuration.
  For the crypto, see BuildRequestor and BuildMessageGenerator.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>null on failure</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="buildComplete(net.i2p.router.tunnel.pool.PooledTunnelCreatorConfig,net.i2p.router.tunnel.pool.BuildExecutor.Result)">
<h3>buildComplete</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">buildComplete</span><wbr><span class="parameters">(<a href="PooledTunnelCreatorConfig.html" title="class in net.i2p.router.tunnel.pool">PooledTunnelCreatorConfig</a>&nbsp;cfg,
 <a href="BuildExecutor.Result.html" title="enum in net.i2p.router.tunnel.pool">BuildExecutor.Result</a>&nbsp;result)</span></div>
<div class="block">Remove from the _inprogress list and call addTunnel() if result is SUCCESS.
  Updates consecutive build timeout count.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>0.9.53 added result parameter</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getConsecutiveBuildTimeouts()">
<h3>getConsecutiveBuildTimeouts</h3>
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name">getConsecutiveBuildTimeouts</span>()</div>
<dl class="notes">
<dt>Since:</dt>
<dd>0.9.53</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="toString()">
<h3>toString</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">toString</span>()</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
