<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>PeerState (I2P Anonymous Network - Java Documentation - API Version 0.9.56)</title>
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="PeerState (I2P Anonymous Network - Java Documentation - API Version 0.9.56)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10,"i28":10,"i29":10,"i30":10,"i31":10,"i32":10,"i33":10,"i34":10,"i35":10,"i36":10,"i37":10,"i38":10,"i39":10,"i40":10,"i41":10,"i42":10,"i43":10,"i44":10,"i45":10,"i46":10,"i47":10,"i48":10,"i49":10,"i50":10,"i51":10,"i52":10,"i53":10,"i54":10,"i55":10,"i56":10,"i57":10,"i58":10,"i59":10,"i60":10,"i61":10,"i62":10,"i63":10,"i64":10,"i65":10,"i66":10,"i67":10,"i68":10,"i69":10,"i70":10,"i71":10,"i72":10,"i73":10,"i74":10,"i75":10,"i76":10,"i77":10,"i78":10,"i79":10,"i80":10,"i81":10,"i82":10,"i83":10,"i84":10,"i85":10,"i86":10,"i87":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/PeerState.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../net/i2p/router/transport/udp/PacketPusher.html" title="class in net.i2p.router.transport.udp"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../net/i2p/router/transport/udp/PeerState2.html" title="class in net.i2p.router.transport.udp"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?net/i2p/router/transport/udp/PeerState.html" target="_top">Frames</a></li>
<li><a href="PeerState.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">net.i2p.router.transport.udp</div>
<h2 title="Class PeerState" class="title">Class PeerState</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>net.i2p.router.transport.udp.PeerState</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../../net/i2p/router/transport/udp/PeerState2.html" title="class in net.i2p.router.transport.udp">PeerState2</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">PeerState</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">Contain all of the state about a UDP connection to a peer.
 This is instantiated only after a connection is fully established.

 Public only for UI peers page. Not a public API, not for external use.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../net/i2p/router/RouterContext.html" title="class in net.i2p.router">RouterContext</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#Z:Z_context">_context</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#Z:Z_dead">_dead</a></span></code>
<div class="block">have we migrated away from this peer to another newer one?</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>,<a href="../../../../../net/i2p/router/transport/udp/InboundMessageState.html" title="class in net.i2p.router.transport.udp">InboundMessageState</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#Z:Z_inboundMessages">_inboundMessages</a></span></code>
<div class="block">list of InboundMessageState for active message</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#Z:Z_isInbound">_isInbound</a></span></code>
<div class="block">is it inbound?</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#Z:Z_keyEstablishedTime">_keyEstablishedTime</a></span></code>
<div class="block">when were the current cipher and MAC keys established/rekeyed?</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#Z:Z_lastACKSend">_lastACKSend</a></span></code>
<div class="block">when did we last send ACKs to the peer?</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../net/i2p/util/Log.html" title="class in net.i2p.util">Log</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#Z:Z_log">_log</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#Z:Z_mtu">_mtu</a></span></code>
<div class="block">what is the largest packet we can currently send to the peer?</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#Z:Z_packetsReceivedDuplicate">_packetsReceivedDuplicate</a></span></code>
<div class="block">how many dup packets were received within the last RETRANSMISSION_PERIOD_WIDTH packets</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../net/i2p/router/transport/udp/RemoteHostId.html" title="class in net.i2p.router.transport.udp">RemoteHostId</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#Z:Z_remoteHostId">_remoteHostId</a></span></code>
<div class="block">cached RemoteHostId, used to find the peerState by remote info</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected byte[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#Z:Z_remoteIP">_remoteIP</a></span></code>
<div class="block">what IP is the peer sending and receiving packets on?</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="https://docs.oracle.com/javase/8/docs/api/java/net/InetAddress.html?is-external=true" title="class or interface in java.net">InetAddress</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#Z:Z_remoteIPAddress">_remoteIPAddress</a></span></code>
<div class="block">cached IP address</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../net/i2p/data/Hash.html" title="class in net.i2p.data">Hash</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#Z:Z_remotePeer">_remotePeer</a></span></code>
<div class="block">The peer are we talking to.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#Z:Z_remotePort">_remotePort</a></span></code>
<div class="block">what port is the peer sending and receiving packets on?</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#Z:Z_rtt">_rtt</a></span></code>
<div class="block">current round trip time estimate</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../net/i2p/router/transport/udp/UDPTransport.html" title="class in net.i2p.router.transport.udp">UDPTransport</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#Z:Z_transport">_transport</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#Z:Z_wantACKSendSince">_wantACKSendSince</a></span></code>
<div class="block">when did we decide we need to ACK to this peer?</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#ACK_FREQUENCY">ACK_FREQUENCY</a></span></code>
<div class="block">how frequently do we want to send ACKs to a peer?</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#CLOCK_SKEW_FUDGE">CLOCK_SKEW_FUDGE</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#LARGE_MTU">LARGE_MTU</a></span></code>
<div class="block">IPv4 Max MTU

 based on measurements, 1350 fits nearly all reasonably small I2NP messages
 (larger I2NP messages may be up to 1900B-4500B, which isn't going to fit
 into a live network MTU anyway)

 TODO
 VTBM is 2646, it would be nice to fit in two large
 2646 / 2 = 1323
 1323 + 74 + 46 + 1 + (4 * 9) = 1480
 So why not make it 1492 (old ethernet is 1492, new is 1500)
 Changed to 1492 in 0.8.9

 BUT through 0.8.11,
 size estimate was bad, actual packet was up to 48 bytes bigger
 To be figured out.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#MAX_IPV6_MTU">MAX_IPV6_MTU</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#MAX_MTU">MAX_MTU</a></span></code>
<div class="block">Max of IPv4 and IPv6 max MTUs</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#MIN_IPV6_MTU">MIN_IPV6_MTU</a></span></code>
<div class="block">IPv6/UDP header is 48 bytes, so we want MTU % 16 == 0.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#MIN_MTU">MIN_MTU</a></span></code>
<div class="block">IPv4 Min MTU

 596 gives us 588 IP byes, 568 UDP bytes, and with an SSU data message,
 522 fragment bytes, which is enough to send a tunnel data message in 2
 packets.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#RETRANSMISSION_PERIOD_WIDTH">RETRANSMISSION_PERIOD_WIDTH</a></span></code>
<div class="block">how many packets will be considered within the retransmission rate calculation</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#PeerState-net.i2p.router.RouterContext-net.i2p.router.transport.udp.UDPTransport-byte:A-int-net.i2p.data.Hash-boolean-int-net.i2p.data.SessionKey-net.i2p.data.SessionKey-">PeerState</a></span>(<a href="../../../../../net/i2p/router/RouterContext.html" title="class in net.i2p.router">RouterContext</a>&nbsp;ctx,
         <a href="../../../../../net/i2p/router/transport/udp/UDPTransport.html" title="class in net.i2p.router.transport.udp">UDPTransport</a>&nbsp;transport,
         byte[]&nbsp;remoteIP,
         int&nbsp;remotePort,
         <a href="../../../../../net/i2p/data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;remotePeer,
         boolean&nbsp;isInbound,
         int&nbsp;rtt,
         <a href="../../../../../net/i2p/data/SessionKey.html" title="class in net.i2p.data">SessionKey</a>&nbsp;cipherKey,
         <a href="../../../../../net/i2p/data/SessionKey.html" title="class in net.i2p.data">SessionKey</a>&nbsp;macKey)</code>
<div class="block">SSU 1 only.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected </code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#PeerState-net.i2p.router.RouterContext-net.i2p.router.transport.udp.UDPTransport-java.net.InetSocketAddress-net.i2p.data.Hash-boolean-int-">PeerState</a></span>(<a href="../../../../../net/i2p/router/RouterContext.html" title="class in net.i2p.router">RouterContext</a>&nbsp;ctx,
         <a href="../../../../../net/i2p/router/transport/udp/UDPTransport.html" title="class in net.i2p.router.transport.udp">UDPTransport</a>&nbsp;transport,
         <a href="https://docs.oracle.com/javase/8/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</a>&nbsp;addr,
         <a href="../../../../../net/i2p/data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;remotePeer,
         boolean&nbsp;isInbound,
         int&nbsp;rtt)</code>
<div class="block">For SSU2</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#acked-net.i2p.router.transport.udp.ACKBitfield-net.i2p.router.transport.udp.InboundMessageFragments.ModifiableLong-">acked</a></span>(<a href="../../../../../net/i2p/router/transport/udp/ACKBitfield.html" title="interface in net.i2p.router.transport.udp">ACKBitfield</a>&nbsp;bitfield,
     <a href="../../../../../net/i2p/router/transport/udp/InboundMessageFragments.ModifiableLong.html" title="class in net.i2p.router.transport.udp">InboundMessageFragments.ModifiableLong</a>&nbsp;highestSeqNumAcked)</code>
<div class="block">A partial ACK was received.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#acked-long-net.i2p.router.transport.udp.InboundMessageFragments.ModifiableLong-">acked</a></span>(long&nbsp;messageId,
     <a href="../../../../../net/i2p/router/transport/udp/InboundMessageFragments.ModifiableLong.html" title="class in net.i2p.router.transport.udp">InboundMessageFragments.ModifiableLong</a>&nbsp;highestSeqNumAcked)</code>
<div class="block">A full ACK was received.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#acked-net.i2p.router.transport.udp.PacketBuilder.Fragment-">acked</a></span>(<a href="../../../../../net/i2p/router/transport/udp/PacketBuilder.Fragment.html" title="class in net.i2p.router.transport.udp">PacketBuilder.Fragment</a>&nbsp;f)</code>
<div class="block">An ACK of a fragment was received.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#add-net.i2p.router.transport.udp.OutboundMessageState-">add</a></span>(<a href="../../../../../net/i2p/router/transport/udp/OutboundMessageState.html" title="class in net.i2p.router.transport.udp">OutboundMessageState</a>&nbsp;state)</code>
<div class="block">TODO should this use a queue, separate from the list of msgs pending an ack?
  TODO bring back tail drop?
  TODO priority queue? (we don't implement priorities in SSU now)
  TODO backlog / pushback / block instead of dropping? Can't really block here.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#adjustClockSkew-long-">adjustClockSkew</a></span>(long&nbsp;skew)</code>
<div class="block">Update the moving-average clock skew based on the current difference.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../net/i2p/router/transport/udp/OutboundMessageState.html" title="class in net.i2p.router.transport.udp">OutboundMessageState</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#allocateSend-long-">allocateSend</a></span>(long&nbsp;now)</code>
<div class="block">Pick one or more messages we want to send and allocate them out of our window
 Adjusts the retransmit timer if necessary.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#changePort-int-">changePort</a></span>(int&nbsp;newPort)</code>
<div class="block">Caller should sync; UDPTransport must remove and add to peersByRemoteHost map</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#clearWantedACKSendSince--">clearWantedACKSendSince</a></span>()</code>
<div class="block">All acks have been sent.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#dataReceived--">dataReceived</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#dropOutbound--">dropOutbound</a></span>()</code>
<div class="block">drop all outbound messages</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#ECNReceived--">ECNReceived</a></span>()</code>
<div class="block">We received a backoff request, so cut our send window.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#expireInboundMessages--">expireInboundMessages</a></span>()</code>
<div class="block">Expire partially received inbound messages, returning how many are still pending.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#fetchPartialACKs-java.util.List-">fetchPartialACKs</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../net/i2p/router/transport/udp/ACKBitfield.html" title="interface in net.i2p.router.transport.udp">ACKBitfield</a>&gt;&nbsp;rv)</code>
<div class="block">SSU 1 only.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#finishMessages-long-">finishMessages</a></span>(long&nbsp;now)</code>
<div class="block">Expire / complete any outbound messages
 High usage -
 OutboundMessageFragments.getNextVolley() calls this 1st.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#fragmentOverhead--">fragmentOverhead</a></span>()</code>
<div class="block">Packet overhead plus room for acks</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#fragmentSize--">fragmentSize</a></span>()</code>
<div class="block">how much payload data can we shove in there?</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getClockSkew--">getClockSkew</a></span>()</code>
<div class="block">How far off is the remote peer from our clock, in milliseconds?
  A positive number means our clock is ahead of theirs.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getConcurrentSends--">getConcurrentSends</a></span>()</code>
<div class="block">2nd stat in CWND column, otherwise unused,
  candidate for removal</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getConcurrentSendWindow--">getConcurrentSendWindow</a></span>()</code>
<div class="block">3rd stat in CWND column, otherwise unused,
  candidate for removal</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getConsecutiveFailedSends--">getConsecutiveFailedSends</a></span>()</code>
<div class="block">how many seconds have we sent packets without any ACKs received?</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getConsecutiveSendRejections--">getConsecutiveSendRejections</a></span>()</code>
<div class="block">4th stat in CWND column, otherwise unused,
  candidate for removal</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../../net/i2p/data/SessionKey.html" title="class in net.i2p.data">SessionKey</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getCurrentCipherKey--">getCurrentCipherKey</a></span>()</code>
<div class="block">The AES key used to encrypt/decrypt packets, set only after the
 connection is established.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getCurrentFullACKs--">getCurrentFullACKs</a></span>()</code>
<div class="block">Grab a list of message ids (Long) that we want to send to the remote
 peer, regardless of the packet size, but don't remove it from our
 "want to send" list.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../../net/i2p/data/SessionKey.html" title="class in net.i2p.data">SessionKey</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getCurrentMACKey--">getCurrentMACKey</a></span>()</code>
<div class="block">The AES key used to verify packets, set only after the connection is
 established.</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getCurrentResendACKs--">getCurrentResendACKs</a></span>()</code>
<div class="block">Grab a list of message ids (Long) that we want to send to the remote
 peer, regardless of the packet size, but don't remove it from our
 "want to send" list.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getInactivityTime--">getInactivityTime</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>,<a href="../../../../../net/i2p/router/transport/udp/InboundMessageState.html" title="class in net.i2p.router.transport.udp">InboundMessageState</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getInboundMessages--">getInboundMessages</a></span>()</code>
<div class="block">Fetch the internal id (Long) to InboundMessageState for incomplete inbound messages.</div>
</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code>(package private) long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getIntroducerTime--">getIntroducerTime</a></span>()</code>
<div class="block">the last time we used them as an introducer, or 0</div>
</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getKeyEstablishedTime--">getKeyEstablishedTime</a></span>()</code>
<div class="block">When were the current cipher and MAC keys established/rekeyed?
 This is the connection uptime.</div>
</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getLastACKSend--">getLastACKSend</a></span>()</code>
<div class="block">when did we last send an ACK to the peer?</div>
</td>
</tr>
<tr id="i30" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getLastReceiveTime--">getLastReceiveTime</a></span>()</code>
<div class="block">when did we last receive a packet from them?</div>
</td>
</tr>
<tr id="i31" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getLastSendFullyTime--">getLastSendFullyTime</a></span>()</code>
<div class="block">when did we last send them a message that was ACKed?</div>
</td>
</tr>
<tr id="i32" class="altColor">
<td class="colFirst"><code>(package private) long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getLastSendOrPingTime--">getLastSendOrPingTime</a></span>()</code>
<div class="block">Latest of last sent, last ACK, last ping</div>
</td>
</tr>
<tr id="i33" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getLastSendTime--">getLastSendTime</a></span>()</code>
<div class="block">when did we last send them a packet?</div>
</td>
</tr>
<tr id="i34" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getMayDisconnect--">getMayDisconnect</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i35" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getMessagesReceived--">getMessagesReceived</a></span>()</code>
<div class="block">I2NP messages received.</div>
</td>
</tr>
<tr id="i36" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getMessagesSent--">getMessagesSent</a></span>()</code>
<div class="block">I2NP messages sent.</div>
</td>
</tr>
<tr id="i37" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getMTU--">getMTU</a></span>()</code>
<div class="block">what is the largest packet we can send to the peer?</div>
</td>
</tr>
<tr id="i38" class="altColor">
<td class="colFirst"><code>(package private) <a href="../../../../../net/i2p/data/SessionKey.html" title="class in net.i2p.data">SessionKey</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getNextCipherKey--">getNextCipherKey</a></span>()</code>
<div class="block">The pending AES key for encrypting/decrypting packets if we are
 rekeying the connection, or null if we are not in the process
 of rekeying.</div>
</td>
</tr>
<tr id="i39" class="rowColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getNextDelay-long-">getNextDelay</a></span>(long&nbsp;now)</code>
<div class="block">High usage -
 OutboundMessageFragments.getNextVolley() calls this 3rd, if allocateSend() returned null.</div>
</td>
</tr>
<tr id="i40" class="altColor">
<td class="colFirst"><code>(package private) <a href="../../../../../net/i2p/data/SessionKey.html" title="class in net.i2p.data">SessionKey</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getNextMACKey--">getNextMACKey</a></span>()</code>
<div class="block">The pending AES key for verifying packets if we are rekeying the
 connection, or null if we are not in the process of rekeying.</div>
</td>
</tr>
<tr id="i41" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getOutboundMessageCount--">getOutboundMessageCount</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i42" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getPacketsReceived--">getPacketsReceived</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i43" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getPacketsReceivedDuplicate--">getPacketsReceivedDuplicate</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i44" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getPacketsRetransmitted--">getPacketsRetransmitted</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i45" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getPacketsTransmitted--">getPacketsTransmitted</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i46" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getReceiveBps--">getReceiveBps</a></span>()</code>
<div class="block">An approximation, for display only</div>
</td>
</tr>
<tr id="i47" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getReceiveMTU--">getReceiveMTU</a></span>()</code>
<div class="block">Estimate how large the other side's MTU is.</div>
</td>
</tr>
<tr id="i48" class="altColor">
<td class="colFirst"><code>(package private) <a href="../../../../../net/i2p/router/transport/udp/RemoteHostId.html" title="class in net.i2p.router.transport.udp">RemoteHostId</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getRemoteHostId--">getRemoteHostId</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i49" class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getRemoteIP--">getRemoteIP</a></span>()</code>
<div class="block">what IP is the peer sending and receiving packets on?</div>
</td>
</tr>
<tr id="i50" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/net/InetAddress.html?is-external=true" title="class or interface in java.net">InetAddress</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getRemoteIPAddress--">getRemoteIPAddress</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i51" class="rowColor">
<td class="colFirst"><code><a href="../../../../../net/i2p/data/Hash.html" title="class in net.i2p.data">Hash</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getRemotePeer--">getRemotePeer</a></span>()</code>
<div class="block">The peer are we talking to.</div>
</td>
</tr>
<tr id="i52" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getRemotePort--">getRemotePort</a></span>()</code>
<div class="block">what port is the peer sending and receiving packets on?</div>
</td>
</tr>
<tr id="i53" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getRTO--">getRTO</a></span>()</code>
<div class="block">how soon should we retransmit an unacked packet?</div>
</td>
</tr>
<tr id="i54" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getRTT--">getRTT</a></span>()</code>
<div class="block">how long does it usually take to get a message ACKed?</div>
</td>
</tr>
<tr id="i55" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getRTTDeviation--">getRTTDeviation</a></span>()</code>
<div class="block">how skewed are the measured RTTs?</div>
</td>
</tr>
<tr id="i56" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getSendBps--">getSendBps</a></span>()</code>
<div class="block">The Westwood+ bandwidth estimate</div>
</td>
</tr>
<tr id="i57" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getSendWindowBytes--">getSendWindowBytes</a></span>()</code>
<div class="block">how many bytes should we send to the peer in a second
  1st stat in CWND column, otherwise unused,
  candidate for removal</div>
</td>
</tr>
<tr id="i58" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getSendWindowBytesRemaining--">getSendWindowBytesRemaining</a></span>()</code>
<div class="block">how many bytes can we send to the peer in the current second</div>
</td>
</tr>
<tr id="i59" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getSlowStartThreshold--">getSlowStartThreshold</a></span>()</code>
<div class="block">stat in SST column, otherwise unused,
  candidate for removal</div>
</td>
</tr>
<tr id="i60" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getTheyRelayToUsAs--">getTheyRelayToUsAs</a></span>()</code>
<div class="block">If they have offered to serve as an introducer to us, this is the tag
 we can use to publish that fact.</div>
</td>
</tr>
<tr id="i61" class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../../../../net/i2p/router/transport/udp/UDPTransport.html" title="class in net.i2p.router.transport.udp">UDPTransport</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getTransport--">getTransport</a></span>()</code>
<div class="block">Convenience for OutboundMessageState so it can fail itself</div>
</td>
</tr>
<tr id="i62" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getVersion--">getVersion</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i63" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#getWeRelayToThemAs--">getWeRelayToThemAs</a></span>()</code>
<div class="block">if we are serving as an introducer to them, this is the the tag that
 they can publish that, when presented to us, will cause us to send
 a relay introduction to the current peer</div>
</td>
</tr>
<tr id="i64" class="altColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#highestSeqNumAcked-long-">highestSeqNumAcked</a></span>(long&nbsp;highest)</code>
<div class="block">Enter or leave fast retransmit mode, and adjust
  SST and window variables accordingly.</div>
</td>
</tr>
<tr id="i65" class="rowColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#incrementConsecutiveFailedSends--">incrementConsecutiveFailedSends</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i66" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#isBacklogged--">isBacklogged</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i67" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#isInbound--">isInbound</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i68" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#isIPv6--">isIPv6</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i69" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#loadFrom-net.i2p.router.transport.udp.PeerState-">loadFrom</a></span>(<a href="../../../../../net/i2p/router/transport/udp/PeerState.html" title="class in net.i2p.router.transport.udp">PeerState</a>&nbsp;oldPeer)</code>
<div class="block">Transfer the basic activity/state from the old peer to the current peer

  SSU 1 or 2.</div>
</td>
</tr>
<tr id="i70" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#messageFullyReceived-java.lang.Long-int-">messageFullyReceived</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&nbsp;messageId,
                    int&nbsp;bytes)</code>
<div class="block">We received the message specified completely.</div>
</td>
</tr>
<tr id="i71" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#messagePartiallyReceived--">messagePartiallyReceived</a></span>()</code>
<div class="block">We received a partial message, or we want to send some acks.</div>
</td>
</tr>
<tr id="i72" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#messagePartiallyReceived-long-">messagePartiallyReceived</a></span>(long&nbsp;now)</code>
<div class="block">We received a partial message, or we want to send some acks.</div>
</td>
</tr>
<tr id="i73" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#messageRetransmitted-int-int-">messageRetransmitted</a></span>(int&nbsp;packets,
                    int&nbsp;maxPktSz)</code>
<div class="block">we are resending a packet, so lets jack up the rto</div>
</td>
</tr>
<tr id="i74" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#packetReceived-int-">packetReceived</a></span>(int&nbsp;size)</code>&nbsp;</td>
</tr>
<tr id="i75" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#packetsTransmitted-int-">packetsTransmitted</a></span>(int&nbsp;packets)</code>&nbsp;</td>
</tr>
<tr id="i76" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#removeACKMessage-java.lang.Long-">removeACKMessage</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&nbsp;messageId)</code>
<div class="block">The ack was sent.</div>
</td>
</tr>
<tr id="i77" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#setHisMTU-int-">setHisMTU</a></span>(int&nbsp;mtu)</code>&nbsp;</td>
</tr>
<tr id="i78" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#setIntroducerTime--">setIntroducerTime</a></span>()</code>
<div class="block">set the last time we used them as an introducer to now</div>
</td>
</tr>
<tr id="i79" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#setLastPingTime-long-">setLastPingTime</a></span>(long&nbsp;when)</code>
<div class="block">Note ping sent.</div>
</td>
</tr>
<tr id="i80" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#setLastReceiveTime-long-">setLastReceiveTime</a></span>(long&nbsp;when)</code>
<div class="block">when did we last receive a packet from them?</div>
</td>
</tr>
<tr id="i81" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#setLastSendTime-long-">setLastSendTime</a></span>(long&nbsp;when)</code>
<div class="block">when did we last send them a packet?</div>
</td>
</tr>
<tr id="i82" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#setMayDisconnect--">setMayDisconnect</a></span>()</code>
<div class="block">Sets to true.</div>
</td>
</tr>
<tr id="i83" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#setTheyRelayToUsAs-long-">setTheyRelayToUsAs</a></span>(long&nbsp;tag)</code>
<div class="block">If they have offered to serve as an introducer to us, this is the tag
 we can use to publish that fact.</div>
</td>
</tr>
<tr id="i84" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#setWeRelayToThemAs-long-">setWeRelayToThemAs</a></span>(long&nbsp;tag)</code>
<div class="block">if we are serving as an introducer to them, this is the the tag that
 they can publish that, when presented to us, will cause us to send
 a relay introduction to the current peer</div>
</td>
</tr>
<tr id="i85" class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#shouldRequestImmediateAck--">shouldRequestImmediateAck</a></span>()</code>
<div class="block">SSU 2 only</div>
</td>
</tr>
<tr id="i86" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#toString--">toString</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i87" class="rowColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/udp/PeerState.html#unsentACKThresholdReached--">unsentACKThresholdReached</a></span>()</code>
<div class="block">Are we out of room to send all the current unsent acks in a single packet?
  This is a huge threshold (134 for small MTU and 255 for large MTU)
  that is rarely if ever exceeded in practice.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="Z:Z_context">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_context</h4>
<pre>protected final&nbsp;<a href="../../../../../net/i2p/router/RouterContext.html" title="class in net.i2p.router">RouterContext</a> _context</pre>
</li>
</ul>
<a name="Z:Z_log">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_log</h4>
<pre>protected final&nbsp;<a href="../../../../../net/i2p/util/Log.html" title="class in net.i2p.util">Log</a> _log</pre>
</li>
</ul>
<a name="Z:Z_remotePeer">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_remotePeer</h4>
<pre>protected final&nbsp;<a href="../../../../../net/i2p/data/Hash.html" title="class in net.i2p.data">Hash</a> _remotePeer</pre>
<div class="block">The peer are we talking to.  This should be set as soon as this
 state is created if we are initiating a connection, but if we are
 receiving the connection this will be set only after the connection
 is established.</div>
</li>
</ul>
<a name="Z:Z_keyEstablishedTime">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_keyEstablishedTime</h4>
<pre>protected final&nbsp;long _keyEstablishedTime</pre>
<div class="block">when were the current cipher and MAC keys established/rekeyed?</div>
</li>
</ul>
<a name="Z:Z_lastACKSend">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_lastACKSend</h4>
<pre>protected volatile&nbsp;long _lastACKSend</pre>
<div class="block">when did we last send ACKs to the peer?</div>
</li>
</ul>
<a name="Z:Z_wantACKSendSince">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_wantACKSendSince</h4>
<pre>protected volatile&nbsp;long _wantACKSendSince</pre>
<div class="block">when did we decide we need to ACK to this peer?</div>
</li>
</ul>
<a name="Z:Z_remoteIP">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_remoteIP</h4>
<pre>protected final&nbsp;byte[] _remoteIP</pre>
<div class="block">what IP is the peer sending and receiving packets on?</div>
</li>
</ul>
<a name="Z:Z_remoteIPAddress">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_remoteIPAddress</h4>
<pre>protected volatile&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/net/InetAddress.html?is-external=true" title="class or interface in java.net">InetAddress</a> _remoteIPAddress</pre>
<div class="block">cached IP address</div>
</li>
</ul>
<a name="Z:Z_remotePort">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_remotePort</h4>
<pre>protected volatile&nbsp;int _remotePort</pre>
<div class="block">what port is the peer sending and receiving packets on?</div>
</li>
</ul>
<a name="Z:Z_remoteHostId">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_remoteHostId</h4>
<pre>protected volatile&nbsp;<a href="../../../../../net/i2p/router/transport/udp/RemoteHostId.html" title="class in net.i2p.router.transport.udp">RemoteHostId</a> _remoteHostId</pre>
<div class="block">cached RemoteHostId, used to find the peerState by remote info</div>
</li>
</ul>
<a name="Z:Z_mtu">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_mtu</h4>
<pre>protected&nbsp;int _mtu</pre>
<div class="block">what is the largest packet we can currently send to the peer?</div>
</li>
</ul>
<a name="Z:Z_rtt">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_rtt</h4>
<pre>protected&nbsp;int _rtt</pre>
<div class="block">current round trip time estimate</div>
</li>
</ul>
<a name="RETRANSMISSION_PERIOD_WIDTH">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>RETRANSMISSION_PERIOD_WIDTH</h4>
<pre>static final&nbsp;long RETRANSMISSION_PERIOD_WIDTH</pre>
<div class="block">how many packets will be considered within the retransmission rate calculation</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.udp.PeerState.RETRANSMISSION_PERIOD_WIDTH">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="Z:Z_packetsReceivedDuplicate">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_packetsReceivedDuplicate</h4>
<pre>protected&nbsp;int _packetsReceivedDuplicate</pre>
<div class="block">how many dup packets were received within the last RETRANSMISSION_PERIOD_WIDTH packets</div>
</li>
</ul>
<a name="Z:Z_inboundMessages">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_inboundMessages</h4>
<pre>protected final&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>,<a href="../../../../../net/i2p/router/transport/udp/InboundMessageState.html" title="class in net.i2p.router.transport.udp">InboundMessageState</a>&gt; _inboundMessages</pre>
<div class="block">list of InboundMessageState for active message</div>
</li>
</ul>
<a name="Z:Z_transport">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_transport</h4>
<pre>protected final&nbsp;<a href="../../../../../net/i2p/router/transport/udp/UDPTransport.html" title="class in net.i2p.router.transport.udp">UDPTransport</a> _transport</pre>
</li>
</ul>
<a name="Z:Z_dead">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_dead</h4>
<pre>protected volatile&nbsp;boolean _dead</pre>
<div class="block">have we migrated away from this peer to another newer one?</div>
</li>
</ul>
<a name="Z:Z_isInbound">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_isInbound</h4>
<pre>protected final&nbsp;boolean _isInbound</pre>
<div class="block">is it inbound?</div>
</li>
</ul>
<a name="MIN_MTU">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MIN_MTU</h4>
<pre>public static final&nbsp;int MIN_MTU</pre>
<div class="block">IPv4 Min MTU

 596 gives us 588 IP byes, 568 UDP bytes, and with an SSU data message,
 522 fragment bytes, which is enough to send a tunnel data message in 2
 packets. A tunnel data message sent over the wire is 1044 bytes, meaning
 we need 522 fragment bytes to fit it in 2 packets - add 46 for SSU, 20
 for UDP, and 8 for IP, giving us 596.  round up to mod 16, giving a total
 of 608

 Well, we really need to count the acks as well, especially
 1 + (4 * MAX_RESEND_ACKS_SMALL) which can take up a significant amount of space.
 We reduce the max acks when using the small MTU but it may not be enough...

 Goal: VTBM msg fragments 2646 / (620 - 87) fits nicely.

 Assuming that we can enforce an MTU correctly, this % 16 should be 12,
 as the IP/UDP header is 28 bytes and data max should be mulitple of 16 for padding efficiency,
 and so PacketBuilder.buildPacket() works correctly.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.udp.PeerState.MIN_MTU">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="MIN_IPV6_MTU">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MIN_IPV6_MTU</h4>
<pre>public static final&nbsp;int MIN_IPV6_MTU</pre>
<div class="block">IPv6/UDP header is 48 bytes, so we want MTU % 16 == 0.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.udp.PeerState.MIN_IPV6_MTU">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="MAX_IPV6_MTU">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MAX_IPV6_MTU</h4>
<pre>public static final&nbsp;int MAX_IPV6_MTU</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.udp.PeerState.MAX_IPV6_MTU">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="LARGE_MTU">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LARGE_MTU</h4>
<pre>public static final&nbsp;int LARGE_MTU</pre>
<div class="block">IPv4 Max MTU

 based on measurements, 1350 fits nearly all reasonably small I2NP messages
 (larger I2NP messages may be up to 1900B-4500B, which isn't going to fit
 into a live network MTU anyway)

 TODO
 VTBM is 2646, it would be nice to fit in two large
 2646 / 2 = 1323
 1323 + 74 + 46 + 1 + (4 * 9) = 1480
 So why not make it 1492 (old ethernet is 1492, new is 1500)
 Changed to 1492 in 0.8.9

 BUT through 0.8.11,
 size estimate was bad, actual packet was up to 48 bytes bigger
 To be figured out. Curse the ACKs.
 Assuming that we can enforce an MTU correctly, this % 16 should be 12,
 as the IP/UDP header is 28 bytes and data max should be mulitple of 16 for padding efficiency,
 and so PacketBuilder.buildPacket() works correctly.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.udp.PeerState.LARGE_MTU">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="MAX_MTU">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MAX_MTU</h4>
<pre>public static final&nbsp;int MAX_MTU</pre>
<div class="block">Max of IPv4 and IPv6 max MTUs</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.28</dd>
</dl>
</li>
</ul>
<a name="ACK_FREQUENCY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ACK_FREQUENCY</h4>
<pre>protected static final&nbsp;int ACK_FREQUENCY</pre>
<div class="block">how frequently do we want to send ACKs to a peer?</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.udp.PeerState.ACK_FREQUENCY">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="CLOCK_SKEW_FUDGE">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>CLOCK_SKEW_FUDGE</h4>
<pre>protected static final&nbsp;int CLOCK_SKEW_FUDGE</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.udp.PeerState.CLOCK_SKEW_FUDGE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="PeerState-net.i2p.router.RouterContext-net.i2p.router.transport.udp.UDPTransport-byte:A-int-net.i2p.data.Hash-boolean-int-net.i2p.data.SessionKey-net.i2p.data.SessionKey-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PeerState</h4>
<pre>public&nbsp;PeerState(<a href="../../../../../net/i2p/router/RouterContext.html" title="class in net.i2p.router">RouterContext</a>&nbsp;ctx,
                 <a href="../../../../../net/i2p/router/transport/udp/UDPTransport.html" title="class in net.i2p.router.transport.udp">UDPTransport</a>&nbsp;transport,
                 byte[]&nbsp;remoteIP,
                 int&nbsp;remotePort,
                 <a href="../../../../../net/i2p/data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;remotePeer,
                 boolean&nbsp;isInbound,
                 int&nbsp;rtt,
                 <a href="../../../../../net/i2p/data/SessionKey.html" title="class in net.i2p.data">SessionKey</a>&nbsp;cipherKey,
                 <a href="../../../../../net/i2p/data/SessionKey.html" title="class in net.i2p.data">SessionKey</a>&nbsp;macKey)</pre>
<div class="block">SSU 1 only.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rtt</code> - from the EstablishState, or 0 if not available</dd>
</dl>
</li>
</ul>
<a name="PeerState-net.i2p.router.RouterContext-net.i2p.router.transport.udp.UDPTransport-java.net.InetSocketAddress-net.i2p.data.Hash-boolean-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>PeerState</h4>
<pre>protected&nbsp;PeerState(<a href="../../../../../net/i2p/router/RouterContext.html" title="class in net.i2p.router">RouterContext</a>&nbsp;ctx,
                    <a href="../../../../../net/i2p/router/transport/udp/UDPTransport.html" title="class in net.i2p.router.transport.udp">UDPTransport</a>&nbsp;transport,
                    <a href="https://docs.oracle.com/javase/8/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</a>&nbsp;addr,
                    <a href="../../../../../net/i2p/data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;remotePeer,
                    boolean&nbsp;isInbound,
                    int&nbsp;rtt)</pre>
<div class="block">For SSU2</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.54</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getVersion--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVersion</h4>
<pre>public&nbsp;int&nbsp;getVersion()</pre>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.54</dd>
</dl>
</li>
</ul>
<a name="changePort-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>changePort</h4>
<pre>void&nbsp;changePort(int&nbsp;newPort)</pre>
<div class="block">Caller should sync; UDPTransport must remove and add to peersByRemoteHost map</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.3</dd>
</dl>
</li>
</ul>
<a name="getRemotePeer--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRemotePeer</h4>
<pre>public&nbsp;<a href="../../../../../net/i2p/data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;getRemotePeer()</pre>
<div class="block">The peer are we talking to. Non-null.</div>
</li>
</ul>
<a name="getCurrentMACKey--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentMACKey</h4>
<pre><a href="../../../../../net/i2p/data/SessionKey.html" title="class in net.i2p.data">SessionKey</a>&nbsp;getCurrentMACKey()</pre>
<div class="block">The AES key used to verify packets, set only after the connection is
 established.

 SSU 1 only.</div>
</li>
</ul>
<a name="getCurrentCipherKey--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentCipherKey</h4>
<pre><a href="../../../../../net/i2p/data/SessionKey.html" title="class in net.i2p.data">SessionKey</a>&nbsp;getCurrentCipherKey()</pre>
<div class="block">The AES key used to encrypt/decrypt packets, set only after the
 connection is established.

 SSU 1 only.</div>
</li>
</ul>
<a name="getNextMACKey--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNextMACKey</h4>
<pre><a href="../../../../../net/i2p/data/SessionKey.html" title="class in net.i2p.data">SessionKey</a>&nbsp;getNextMACKey()</pre>
<div class="block">The pending AES key for verifying packets if we are rekeying the
 connection, or null if we are not in the process of rekeying.

 SSU 1 only.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>null always, rekeying unimplemented</dd>
</dl>
</li>
</ul>
<a name="getNextCipherKey--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNextCipherKey</h4>
<pre><a href="../../../../../net/i2p/data/SessionKey.html" title="class in net.i2p.data">SessionKey</a>&nbsp;getNextCipherKey()</pre>
<div class="block">The pending AES key for encrypting/decrypting packets if we are
 rekeying the connection, or null if we are not in the process
 of rekeying.

 SSU 1 only.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>null always, rekeying unimplemented</dd>
</dl>
</li>
</ul>
<a name="getKeyEstablishedTime--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getKeyEstablishedTime</h4>
<pre>public&nbsp;long&nbsp;getKeyEstablishedTime()</pre>
<div class="block">When were the current cipher and MAC keys established/rekeyed?
 This is the connection uptime.</div>
</li>
</ul>
<a name="getClockSkew--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getClockSkew</h4>
<pre>public&nbsp;long&nbsp;getClockSkew()</pre>
<div class="block">How far off is the remote peer from our clock, in milliseconds?
  A positive number means our clock is ahead of theirs.</div>
</li>
</ul>
<a name="getLastSendTime--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastSendTime</h4>
<pre>public&nbsp;long&nbsp;getLastSendTime()</pre>
<div class="block">when did we last send them a packet?</div>
</li>
</ul>
<a name="getLastSendFullyTime--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastSendFullyTime</h4>
<pre>public&nbsp;long&nbsp;getLastSendFullyTime()</pre>
<div class="block">when did we last send them a message that was ACKed?</div>
</li>
</ul>
<a name="getLastReceiveTime--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastReceiveTime</h4>
<pre>public&nbsp;long&nbsp;getLastReceiveTime()</pre>
<div class="block">when did we last receive a packet from them?</div>
</li>
</ul>
<a name="getConsecutiveFailedSends--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getConsecutiveFailedSends</h4>
<pre>public&nbsp;int&nbsp;getConsecutiveFailedSends()</pre>
<div class="block">how many seconds have we sent packets without any ACKs received?</div>
</li>
</ul>
<a name="getSendWindowBytes--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSendWindowBytes</h4>
<pre>public&nbsp;int&nbsp;getSendWindowBytes()</pre>
<div class="block">how many bytes should we send to the peer in a second
  1st stat in CWND column, otherwise unused,
  candidate for removal</div>
</li>
</ul>
<a name="getSendWindowBytesRemaining--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSendWindowBytesRemaining</h4>
<pre>public&nbsp;int&nbsp;getSendWindowBytesRemaining()</pre>
<div class="block">how many bytes can we send to the peer in the current second</div>
</li>
</ul>
<a name="getRemoteIP--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRemoteIP</h4>
<pre>public&nbsp;byte[]&nbsp;getRemoteIP()</pre>
<div class="block">what IP is the peer sending and receiving packets on?</div>
</li>
</ul>
<a name="getRemoteIPAddress--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRemoteIPAddress</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/net/InetAddress.html?is-external=true" title="class or interface in java.net">InetAddress</a>&nbsp;getRemoteIPAddress()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>may be null if IP is invalid</dd>
</dl>
</li>
</ul>
<a name="getRemotePort--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRemotePort</h4>
<pre>public&nbsp;int&nbsp;getRemotePort()</pre>
<div class="block">what port is the peer sending and receiving packets on?</div>
</li>
</ul>
<a name="getWeRelayToThemAs--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getWeRelayToThemAs</h4>
<pre>public&nbsp;long&nbsp;getWeRelayToThemAs()</pre>
<div class="block">if we are serving as an introducer to them, this is the the tag that
 they can publish that, when presented to us, will cause us to send
 a relay introduction to the current peer</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>0 (no relay) if unset previously</dd>
</dl>
</li>
</ul>
<a name="getTheyRelayToUsAs--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTheyRelayToUsAs</h4>
<pre>public&nbsp;long&nbsp;getTheyRelayToUsAs()</pre>
<div class="block">If they have offered to serve as an introducer to us, this is the tag
 we can use to publish that fact.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>0 (no relay) if unset previously</dd>
</dl>
</li>
</ul>
<a name="getMTU--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMTU</h4>
<pre>public&nbsp;int&nbsp;getMTU()</pre>
<div class="block">what is the largest packet we can send to the peer?</div>
</li>
</ul>
<a name="getReceiveMTU--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReceiveMTU</h4>
<pre>public&nbsp;int&nbsp;getReceiveMTU()</pre>
<div class="block">Estimate how large the other side's MTU is.
  This could be wrong.
  It is used only for the HTML status.</div>
</li>
</ul>
<a name="adjustClockSkew-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>adjustClockSkew</h4>
<pre>void&nbsp;adjustClockSkew(long&nbsp;skew)</pre>
<div class="block">Update the moving-average clock skew based on the current difference.
  The raw skew will be adjusted for RTT/2 here.
  A positive number means our clock is ahead of theirs.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>skew</code> - milliseconds, NOT adjusted for RTT.</dd>
</dl>
</li>
</ul>
<a name="setLastSendTime-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setLastSendTime</h4>
<pre>void&nbsp;setLastSendTime(long&nbsp;when)</pre>
<div class="block">when did we last send them a packet?</div>
</li>
</ul>
<a name="setLastReceiveTime-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setLastReceiveTime</h4>
<pre>void&nbsp;setLastReceiveTime(long&nbsp;when)</pre>
<div class="block">when did we last receive a packet from them?</div>
</li>
</ul>
<a name="setLastPingTime-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setLastPingTime</h4>
<pre>void&nbsp;setLastPingTime(long&nbsp;when)</pre>
<div class="block">Note ping sent. Does not update last send time.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.3</dd>
</dl>
</li>
</ul>
<a name="getLastSendOrPingTime--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastSendOrPingTime</h4>
<pre>long&nbsp;getLastSendOrPingTime()</pre>
<div class="block">Latest of last sent, last ACK, last ping</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.3</dd>
</dl>
</li>
</ul>
<a name="getSendBps--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSendBps</h4>
<pre>public&nbsp;int&nbsp;getSendBps()</pre>
<div class="block">The Westwood+ bandwidth estimate</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the smoothed send transfer rate</dd>
</dl>
</li>
</ul>
<a name="getReceiveBps--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReceiveBps</h4>
<pre>public&nbsp;int&nbsp;getReceiveBps()</pre>
<div class="block">An approximation, for display only</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the smoothed receive transfer rate</dd>
</dl>
</li>
</ul>
<a name="incrementConsecutiveFailedSends--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>incrementConsecutiveFailedSends</h4>
<pre>int&nbsp;incrementConsecutiveFailedSends()</pre>
</li>
</ul>
<a name="getInactivityTime--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInactivityTime</h4>
<pre>public&nbsp;long&nbsp;getInactivityTime()</pre>
</li>
</ul>
<a name="setWeRelayToThemAs-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setWeRelayToThemAs</h4>
<pre>void&nbsp;setWeRelayToThemAs(long&nbsp;tag)</pre>
<div class="block">if we are serving as an introducer to them, this is the the tag that
 they can publish that, when presented to us, will cause us to send
 a relay introduction to the current peer</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>tag</code> - 1 to Integer.MAX_VALUE, or 0 if relaying disabled</dd>
</dl>
</li>
</ul>
<a name="setTheyRelayToUsAs-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setTheyRelayToUsAs</h4>
<pre>void&nbsp;setTheyRelayToUsAs(long&nbsp;tag)</pre>
<div class="block">If they have offered to serve as an introducer to us, this is the tag
 we can use to publish that fact.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>tag</code> - 1 to Integer.MAX_VALUE, or 0 if relaying disabled</dd>
</dl>
</li>
</ul>
<a name="getSlowStartThreshold--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSlowStartThreshold</h4>
<pre>public&nbsp;int&nbsp;getSlowStartThreshold()</pre>
<div class="block">stat in SST column, otherwise unused,
  candidate for removal</div>
</li>
</ul>
<a name="getConcurrentSends--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getConcurrentSends</h4>
<pre>public&nbsp;int&nbsp;getConcurrentSends()</pre>
<div class="block">2nd stat in CWND column, otherwise unused,
  candidate for removal</div>
</li>
</ul>
<a name="getConcurrentSendWindow--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getConcurrentSendWindow</h4>
<pre>public&nbsp;int&nbsp;getConcurrentSendWindow()</pre>
<div class="block">3rd stat in CWND column, otherwise unused,
  candidate for removal</div>
</li>
</ul>
<a name="getConsecutiveSendRejections--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getConsecutiveSendRejections</h4>
<pre>public&nbsp;int&nbsp;getConsecutiveSendRejections()</pre>
<div class="block">4th stat in CWND column, otherwise unused,
  candidate for removal</div>
</li>
</ul>
<a name="isInbound--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isInbound</h4>
<pre>public&nbsp;boolean&nbsp;isInbound()</pre>
</li>
</ul>
<a name="isIPv6--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isIPv6</h4>
<pre>public&nbsp;boolean&nbsp;isIPv6()</pre>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>IPv6</dd>
</dl>
</li>
</ul>
<a name="getIntroducerTime--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIntroducerTime</h4>
<pre>long&nbsp;getIntroducerTime()</pre>
<div class="block">the last time we used them as an introducer, or 0</div>
</li>
</ul>
<a name="setIntroducerTime--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setIntroducerTime</h4>
<pre>void&nbsp;setIntroducerTime()</pre>
<div class="block">set the last time we used them as an introducer to now</div>
</li>
</ul>
<a name="messageFullyReceived-java.lang.Long-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>messageFullyReceived</h4>
<pre>void&nbsp;messageFullyReceived(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&nbsp;messageId,
                          int&nbsp;bytes)</pre>
<div class="block">We received the message specified completely.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>bytes</code> - if less than or equal to zero, message is a duplicate.</dd>
</dl>
</li>
</ul>
<a name="messagePartiallyReceived--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>messagePartiallyReceived</h4>
<pre>void&nbsp;messagePartiallyReceived()</pre>
<div class="block">We received a partial message, or we want to send some acks.</div>
</li>
</ul>
<a name="messagePartiallyReceived-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>messagePartiallyReceived</h4>
<pre>protected&nbsp;void&nbsp;messagePartiallyReceived(long&nbsp;now)</pre>
<div class="block">We received a partial message, or we want to send some acks.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.52</dd>
</dl>
</li>
</ul>
<a name="getInboundMessages--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInboundMessages</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>,<a href="../../../../../net/i2p/router/transport/udp/InboundMessageState.html" title="class in net.i2p.router.transport.udp">InboundMessageState</a>&gt;&nbsp;getInboundMessages()</pre>
<div class="block">Fetch the internal id (Long) to InboundMessageState for incomplete inbound messages.
 Access to this map must be synchronized explicitly!</div>
</li>
</ul>
<a name="expireInboundMessages--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>expireInboundMessages</h4>
<pre>int&nbsp;expireInboundMessages()</pre>
<div class="block">Expire partially received inbound messages, returning how many are still pending.
 This should probably be fired periodically, in case a peer goes silent and we don't
 try to send them any messages (and don't receive any messages from them either)</div>
</li>
</ul>
<a name="getCurrentFullACKs--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentFullACKs</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;&nbsp;getCurrentFullACKs()</pre>
<div class="block">Grab a list of message ids (Long) that we want to send to the remote
 peer, regardless of the packet size, but don't remove it from our
 "want to send" list.  If the message id is transmitted to the peer,
 removeACKMessage(Long) should be called.

 The returned list contains acks not yet sent only.
 The caller should NOT transmit all of them all the time,
 even if there is room,
 or the packets will have way too much overhead.

 SSU 1 only.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a new list, do as you like with it</dd>
</dl>
</li>
</ul>
<a name="getCurrentResendACKs--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentResendACKs</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;&nbsp;getCurrentResendACKs()</pre>
<div class="block">Grab a list of message ids (Long) that we want to send to the remote
 peer, regardless of the packet size, but don't remove it from our
 "want to send" list.

 The returned list contains
 a random assortment of acks already sent.
 The caller should NOT transmit all of them all the time,
 even if there is room,
 or the packets will have way too much overhead.

 SSU 1 only.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a new list, do as you like with it</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.8.12 was included in getCurrentFullACKs()</dd>
</dl>
</li>
</ul>
<a name="removeACKMessage-java.lang.Long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeACKMessage</h4>
<pre>void&nbsp;removeACKMessage(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&nbsp;messageId)</pre>
<div class="block">The ack was sent.
 Side effect - sets _lastACKSend

 SSU 1 only.</div>
</li>
</ul>
<a name="fetchPartialACKs-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fetchPartialACKs</h4>
<pre>void&nbsp;fetchPartialACKs(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../net/i2p/router/transport/udp/ACKBitfield.html" title="interface in net.i2p.router.transport.udp">ACKBitfield</a>&gt;&nbsp;rv)</pre>
<div class="block">SSU 1 only.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rv</code> - out parameter, populated with true partial ACKBitfields.
            no full bitfields are included.</dd>
</dl>
</li>
</ul>
<a name="setHisMTU-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setHisMTU</h4>
<pre>void&nbsp;setHisMTU(int&nbsp;mtu)</pre>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.2</dd>
</dl>
</li>
</ul>
<a name="messageRetransmitted-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>messageRetransmitted</h4>
<pre>void&nbsp;messageRetransmitted(int&nbsp;packets,
                          int&nbsp;maxPktSz)</pre>
<div class="block">we are resending a packet, so lets jack up the rto</div>
</li>
</ul>
<a name="packetsTransmitted-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>packetsTransmitted</h4>
<pre>void&nbsp;packetsTransmitted(int&nbsp;packets)</pre>
</li>
</ul>
<a name="getRTT--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRTT</h4>
<pre>public&nbsp;int&nbsp;getRTT()</pre>
<div class="block">how long does it usually take to get a message ACKed?</div>
</li>
</ul>
<a name="getRTO--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRTO</h4>
<pre>public&nbsp;int&nbsp;getRTO()</pre>
<div class="block">how soon should we retransmit an unacked packet?</div>
</li>
</ul>
<a name="getRTTDeviation--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRTTDeviation</h4>
<pre>public&nbsp;int&nbsp;getRTTDeviation()</pre>
<div class="block">how skewed are the measured RTTs?</div>
</li>
</ul>
<a name="getMessagesSent--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMessagesSent</h4>
<pre>public&nbsp;int&nbsp;getMessagesSent()</pre>
<div class="block">I2NP messages sent.
  Does not include duplicates.
  As of 0.9.24, incremented when bandwidth is allocated just before sending, not when acked.</div>
</li>
</ul>
<a name="getMessagesReceived--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMessagesReceived</h4>
<pre>public&nbsp;int&nbsp;getMessagesReceived()</pre>
<div class="block">I2NP messages received.
  As of 0.9.24, does not include duplicates.</div>
</li>
</ul>
<a name="getPacketsTransmitted--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPacketsTransmitted</h4>
<pre>public&nbsp;int&nbsp;getPacketsTransmitted()</pre>
</li>
</ul>
<a name="getPacketsRetransmitted--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPacketsRetransmitted</h4>
<pre>public&nbsp;int&nbsp;getPacketsRetransmitted()</pre>
</li>
</ul>
<a name="getPacketsReceived--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPacketsReceived</h4>
<pre>public&nbsp;int&nbsp;getPacketsReceived()</pre>
</li>
</ul>
<a name="getPacketsReceivedDuplicate--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPacketsReceivedDuplicate</h4>
<pre>public&nbsp;int&nbsp;getPacketsReceivedDuplicate()</pre>
</li>
</ul>
<a name="packetReceived-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>packetReceived</h4>
<pre>void&nbsp;packetReceived(int&nbsp;size)</pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>size</code> - not including IP header, UDP header, MAC or IV</dd>
</dl>
</li>
</ul>
<a name="ECNReceived--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ECNReceived</h4>
<pre>void&nbsp;ECNReceived()</pre>
<div class="block">We received a backoff request, so cut our send window.
  NOTE: ECN sending is unimplemented, this is never called.</div>
</li>
</ul>
<a name="dataReceived--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dataReceived</h4>
<pre>void&nbsp;dataReceived()</pre>
</li>
</ul>
<a name="getLastACKSend--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastACKSend</h4>
<pre>public&nbsp;long&nbsp;getLastACKSend()</pre>
<div class="block">when did we last send an ACK to the peer?</div>
</li>
</ul>
<a name="clearWantedACKSendSince--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearWantedACKSendSince</h4>
<pre>void&nbsp;clearWantedACKSendSince()</pre>
<div class="block">All acks have been sent.

  SSU 1 only.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.52</dd>
</dl>
</li>
</ul>
<a name="unsentACKThresholdReached--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unsentACKThresholdReached</h4>
<pre>boolean&nbsp;unsentACKThresholdReached()</pre>
<div class="block">Are we out of room to send all the current unsent acks in a single packet?
  This is a huge threshold (134 for small MTU and 255 for large MTU)
  that is rarely if ever exceeded in practice.
  So just use a fixed threshold of half the resend acks, so that if the
  packet is lost the acks have a decent chance of getting retransmitted.
  Used only by ACKSender.

  SSU 1 only.</div>
</li>
</ul>
<a name="getRemoteHostId--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRemoteHostId</h4>
<pre><a href="../../../../../net/i2p/router/transport/udp/RemoteHostId.html" title="class in net.i2p.router.transport.udp">RemoteHostId</a>&nbsp;getRemoteHostId()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>non-null</dd>
</dl>
</li>
</ul>
<a name="add-net.i2p.router.transport.udp.OutboundMessageState-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>add</h4>
<pre>void&nbsp;add(<a href="../../../../../net/i2p/router/transport/udp/OutboundMessageState.html" title="class in net.i2p.router.transport.udp">OutboundMessageState</a>&nbsp;state)</pre>
<div class="block">TODO should this use a queue, separate from the list of msgs pending an ack?
  TODO bring back tail drop?
  TODO priority queue? (we don't implement priorities in SSU now)
  TODO backlog / pushback / block instead of dropping? Can't really block here.
  TODO SSU does not support isBacklogged() now</div>
</li>
</ul>
<a name="dropOutbound--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dropOutbound</h4>
<pre>void&nbsp;dropOutbound()</pre>
<div class="block">drop all outbound messages</div>
</li>
</ul>
<a name="getOutboundMessageCount--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOutboundMessageCount</h4>
<pre>public&nbsp;int&nbsp;getOutboundMessageCount()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>number of active outbound messages remaining (unsynchronized)</dd>
</dl>
</li>
</ul>
<a name="setMayDisconnect--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMayDisconnect</h4>
<pre>public&nbsp;void&nbsp;setMayDisconnect()</pre>
<div class="block">Sets to true.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.24</dd>
</dl>
</li>
</ul>
<a name="getMayDisconnect--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMayDisconnect</h4>
<pre>public&nbsp;boolean&nbsp;getMayDisconnect()</pre>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.24</dd>
</dl>
</li>
</ul>
<a name="finishMessages-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finishMessages</h4>
<pre>int&nbsp;finishMessages(long&nbsp;now)</pre>
<div class="block">Expire / complete any outbound messages
 High usage -
 OutboundMessageFragments.getNextVolley() calls this 1st.
 TODO combine finishMessages(), allocateSend(), and getNextDelay() so we don't iterate 3 times.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>number of active outbound messages remaining</dd>
</dl>
</li>
</ul>
<a name="allocateSend-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allocateSend</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../net/i2p/router/transport/udp/OutboundMessageState.html" title="class in net.i2p.router.transport.udp">OutboundMessageState</a>&gt;&nbsp;allocateSend(long&nbsp;now)</pre>
<div class="block">Pick one or more messages we want to send and allocate them out of our window
 Adjusts the retransmit timer if necessary.
 High usage -
 OutboundMessageFragments.getNextVolley() calls this 2nd, if finishMessages() returned &gt; 0.
 TODO combine finishMessages() and allocateSend() so we don't iterate 2 times.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>allocated messages to send (never empty), or null if no messages or no resources</dd>
</dl>
</li>
</ul>
<a name="getNextDelay-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNextDelay</h4>
<pre>int&nbsp;getNextDelay(long&nbsp;now)</pre>
<div class="block">High usage -
 OutboundMessageFragments.getNextVolley() calls this 3rd, if allocateSend() returned null.
 TODO combine finishMessages(), allocateSend() so we don't iterate 2 times.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>now</code> - what time it is now</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>how long to wait before sending, or Integer.MAX_VALUE if we have nothing to send.
         If ready now, will return 0.</dd>
</dl>
</li>
</ul>
<a name="isBacklogged--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isBacklogged</h4>
<pre>public&nbsp;boolean&nbsp;isBacklogged()</pre>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.3</dd>
</dl>
</li>
</ul>
<a name="fragmentSize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fragmentSize</h4>
<pre>int&nbsp;fragmentSize()</pre>
<div class="block">how much payload data can we shove in there?</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>MTU - 87, i.e. 533 or 1397 (IPv4), MTU - 107 (IPv6)</dd>
</dl>
</li>
</ul>
<a name="fragmentOverhead--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fragmentOverhead</h4>
<pre>int&nbsp;fragmentOverhead()</pre>
<div class="block">Packet overhead plus room for acks</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>87 (IPv4), 107 (IPv6)</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.49</dd>
</dl>
</li>
</ul>
<a name="acked-long-net.i2p.router.transport.udp.InboundMessageFragments.ModifiableLong-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acked</h4>
<pre>boolean&nbsp;acked(long&nbsp;messageId,
              <a href="../../../../../net/i2p/router/transport/udp/InboundMessageFragments.ModifiableLong.html" title="class in net.i2p.router.transport.udp">InboundMessageFragments.ModifiableLong</a>&nbsp;highestSeqNumAcked)</pre>
<div class="block">A full ACK was received.
  TODO if messages awaiting ack were a HashMap&lt;Long, OutboundMessageState&gt; this would be faster.

  SSU 1 only.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>highestSeqNumAcked</code> - in/out param, will modify if this seq. number is higher</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the message was acked for the first time</dd>
</dl>
</li>
</ul>
<a name="acked-net.i2p.router.transport.udp.ACKBitfield-net.i2p.router.transport.udp.InboundMessageFragments.ModifiableLong-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acked</h4>
<pre>boolean&nbsp;acked(<a href="../../../../../net/i2p/router/transport/udp/ACKBitfield.html" title="interface in net.i2p.router.transport.udp">ACKBitfield</a>&nbsp;bitfield,
              <a href="../../../../../net/i2p/router/transport/udp/InboundMessageFragments.ModifiableLong.html" title="class in net.i2p.router.transport.udp">InboundMessageFragments.ModifiableLong</a>&nbsp;highestSeqNumAcked)</pre>
<div class="block">A partial ACK was received. This is much less common than full ACKs.

  SSU 1 only.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>highestSeqNumAcked</code> - in/out param, will modify if this seq. number is higher</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if any fragment of the message was completely acked for the first time</dd>
</dl>
</li>
</ul>
<a name="acked-net.i2p.router.transport.udp.PacketBuilder.Fragment-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acked</h4>
<pre>protected&nbsp;boolean&nbsp;acked(<a href="../../../../../net/i2p/router/transport/udp/PacketBuilder.Fragment.html" title="class in net.i2p.router.transport.udp">PacketBuilder.Fragment</a>&nbsp;f)</pre>
<div class="block">An ACK of a fragment was received.

  SSU 2 only.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if this fragment of the message was acked for the first time</dd>
</dl>
</li>
</ul>
<a name="highestSeqNumAcked-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>highestSeqNumAcked</h4>
<pre>boolean&nbsp;highestSeqNumAcked(long&nbsp;highest)</pre>
<div class="block">Enter or leave fast retransmit mode, and adjust
  SST and window variables accordingly.
  See RFC 5681 sec. 2.4</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>highest</code> - the highest sequence number that was acked</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if we have something to fast-retransmit</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.49</dd>
</dl>
</li>
</ul>
<a name="shouldRequestImmediateAck--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shouldRequestImmediateAck</h4>
<pre>protected&nbsp;boolean&nbsp;shouldRequestImmediateAck()</pre>
<div class="block">SSU 2 only</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.56</dd>
</dl>
</li>
</ul>
<a name="loadFrom-net.i2p.router.transport.udp.PeerState-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadFrom</h4>
<pre>void&nbsp;loadFrom(<a href="../../../../../net/i2p/router/transport/udp/PeerState.html" title="class in net.i2p.router.transport.udp">PeerState</a>&nbsp;oldPeer)</pre>
<div class="block">Transfer the basic activity/state from the old peer to the current peer

  SSU 1 or 2.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>oldPeer</code> - non-null</dd>
</dl>
</li>
</ul>
<a name="getTransport--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTransport</h4>
<pre><a href="../../../../../net/i2p/router/transport/udp/UDPTransport.html" title="class in net.i2p.router.transport.udp">UDPTransport</a>&nbsp;getTransport()</pre>
<div class="block">Convenience for OutboundMessageState so it can fail itself</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.3</dd>
</dl>
</li>
</ul>
<a name="toString--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/PeerState.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../net/i2p/router/transport/udp/PacketPusher.html" title="class in net.i2p.router.transport.udp"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../net/i2p/router/transport/udp/PeerState2.html" title="class in net.i2p.router.transport.udp"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?net/i2p/router/transport/udp/PeerState.html" target="_top">Frames</a></li>
<li><a href="PeerState.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
