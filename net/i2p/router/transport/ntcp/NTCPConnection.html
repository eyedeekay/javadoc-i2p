<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>NTCPConnection (I2P Anonymous Network - Java Documentation - API Version 0.9.56)</title>
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="NTCPConnection (I2P Anonymous Network - Java Documentation - API Version 0.9.56)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10,"i28":10,"i29":10,"i30":10,"i31":10,"i32":10,"i33":10,"i34":10,"i35":10,"i36":10,"i37":10,"i38":10,"i39":10,"i40":10,"i41":10,"i42":10,"i43":10,"i44":10,"i45":10,"i46":9,"i47":10,"i48":10,"i49":10,"i50":10,"i51":10,"i52":10,"i53":10,"i54":10,"i55":10,"i56":10,"i57":10,"i58":10,"i59":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/NTCPConnection.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../net/i2p/router/transport/ntcp/NTCP2Payload.TerminationBlock.html" title="class in net.i2p.router.transport.ntcp"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.PrepBuffer.html" title="class in net.i2p.router.transport.ntcp"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?net/i2p/router/transport/ntcp/NTCPConnection.html" target="_top">Frames</a></li>
<li><a href="NTCPConnection.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">net.i2p.router.transport.ntcp</div>
<h2 title="Class NTCPConnection" class="title">Class NTCPConnection</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>net.i2p.router.transport.ntcp.NTCPConnection</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="https://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang">AutoCloseable</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">NTCPConnection</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="https://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a></pre>
<div class="block">Coordinate the connection to a single peer.
 NTCP 1 or 2.

 Public only for UI peers page. Not a public API, not for external use.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.PrepBuffer.html" title="class in net.i2p.router.transport.ntcp">NTCPConnection.PrepBuffer</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#BUFFER_SIZE">BUFFER_SIZE</a></span></code>
<div class="block">Why this is 16K, and where it is documented, good question?
  We claim we can do 32K datagrams so this is a problem.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#DELAY_DEFAULT">DELAY_DEFAULT</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#DUMMY_DEFAULT">DUMMY_DEFAULT</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#NTCP2_MAX_MSG_SIZE">NTCP2_MAX_MSG_SIZE</a></span></code>
<div class="block">See spec.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#PADDING_MAX_DEFAULT_INT">PADDING_MAX_DEFAULT_INT</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#PADDING_MIN_DEFAULT_INT">PADDING_MIN_DEFAULT_INT</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#REASON_AEAD">REASON_AEAD</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#REASON_BANNED">REASON_BANNED</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#REASON_FRAME_TIMEOUT">REASON_FRAME_TIMEOUT</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#REASON_FRAMING">REASON_FRAMING</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#REASON_MSG1">REASON_MSG1</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#REASON_MSG2">REASON_MSG2</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#REASON_MSG3">REASON_MSG3</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#REASON_OPTIONS">REASON_OPTIONS</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#REASON_PADDING">REASON_PADDING</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#REASON_PAYLOAD">REASON_PAYLOAD</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#REASON_S_MISMATCH">REASON_S_MISMATCH</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#REASON_SIGFAIL">REASON_SIGFAIL</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#REASON_SIGTYPE">REASON_SIGTYPE</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#REASON_SKEW">REASON_SKEW</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#REASON_TERMINATION">REASON_TERMINATION</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#REASON_TIMEOUT">REASON_TIMEOUT</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#REASON_UNSPEC">REASON_UNSPEC</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#NTCPConnection-net.i2p.router.RouterContext-net.i2p.router.transport.ntcp.NTCPTransport-net.i2p.data.router.RouterIdentity-net.i2p.data.router.RouterAddress-int-">NTCPConnection</a></span>(<a href="../../../../../net/i2p/router/RouterContext.html" title="class in net.i2p.router">RouterContext</a>&nbsp;ctx,
              <a href="../../../../../net/i2p/router/transport/ntcp/NTCPTransport.html" title="class in net.i2p.router.transport.ntcp">NTCPTransport</a>&nbsp;transport,
              <a href="../../../../../net/i2p/data/router/RouterIdentity.html" title="class in net.i2p.data.router">RouterIdentity</a>&nbsp;remotePeer,
              <a href="../../../../../net/i2p/data/router/RouterAddress.html" title="class in net.i2p.data.router">RouterAddress</a>&nbsp;remAddr,
              int&nbsp;version)</code>
<div class="block">Create an outbound unconnected NTCP connection.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#NTCPConnection-net.i2p.router.RouterContext-net.i2p.router.transport.ntcp.NTCPTransport-java.nio.channels.SocketChannel-java.nio.channels.SelectionKey-">NTCPConnection</a></span>(<a href="../../../../../net/i2p/router/RouterContext.html" title="class in net.i2p.router">RouterContext</a>&nbsp;ctx,
              <a href="../../../../../net/i2p/router/transport/ntcp/NTCPTransport.html" title="class in net.i2p.router.transport.ntcp">NTCPTransport</a>&nbsp;transport,
              <a href="https://docs.oracle.com/javase/8/docs/api/java/nio/channels/SocketChannel.html?is-external=true" title="class or interface in java.nio.channels">SocketChannel</a>&nbsp;chan,
              <a href="https://docs.oracle.com/javase/8/docs/api/java/nio/channels/SelectionKey.html?is-external=true" title="class or interface in java.nio.channels">SelectionKey</a>&nbsp;key)</code>
<div class="block">Create an inbound connected (though not established) NTCP connection.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#clearZeroRead--">clearZeroRead</a></span>()</code>
<div class="block">workaround for EventPumper</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#close--">close</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#close-boolean-">close</a></span>(boolean&nbsp;allowRequeue)</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#closeOnTimeout-java.lang.String-java.lang.Exception-">closeOnTimeout</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;cause,
              <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a>&nbsp;e)</code>
<div class="block">Close and release EstablishState resources.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#enqueueInfoMessage--">enqueueInfoMessage</a></span>()</code>
<div class="block">Inject a DatabaseStoreMessage with our RouterInfo.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#failInboundEstablishment-com.southernstorm.noise.protocol.CipherState-byte:A-int-">failInboundEstablishment</a></span>(<a href="../../../../../com/southernstorm/noise/protocol/CipherState.html" title="interface in com.southernstorm.noise.protocol">CipherState</a>&nbsp;sender,
                        byte[]&nbsp;sip_ba,
                        int&nbsp;reason)</code>
<div class="block">We are Bob.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#finishInboundEstablishment-com.southernstorm.noise.protocol.CipherState-com.southernstorm.noise.protocol.CipherState-byte:A-byte:A-long-net.i2p.router.transport.ntcp.NTCP2Options-">finishInboundEstablishment</a></span>(<a href="../../../../../com/southernstorm/noise/protocol/CipherState.html" title="interface in com.southernstorm.noise.protocol">CipherState</a>&nbsp;sender,
                          <a href="../../../../../com/southernstorm/noise/protocol/CipherState.html" title="interface in com.southernstorm.noise.protocol">CipherState</a>&nbsp;receiver,
                          byte[]&nbsp;sip_ba,
                          byte[]&nbsp;sip_ab,
                          long&nbsp;clockSkew,
                          <a href="../../../../../net/i2p/router/transport/ntcp/NTCP2Options.html" title="class in net.i2p.router.transport.ntcp">NTCP2Options</a>&nbsp;hisPadding)</code>
<div class="block">We are Bob.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#finishOutboundEstablishment-com.southernstorm.noise.protocol.CipherState-com.southernstorm.noise.protocol.CipherState-byte:A-byte:A-long-">finishOutboundEstablishment</a></span>(<a href="../../../../../com/southernstorm/noise/protocol/CipherState.html" title="interface in com.southernstorm.noise.protocol">CipherState</a>&nbsp;sender,
                           <a href="../../../../../com/southernstorm/noise/protocol/CipherState.html" title="interface in com.southernstorm.noise.protocol">CipherState</a>&nbsp;receiver,
                           byte[]&nbsp;sip_ab,
                           byte[]&nbsp;sip_ba,
                           long&nbsp;clockSkew)</code>
<div class="block">We are Alice.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/nio/channels/SocketChannel.html?is-external=true" title="class or interface in java.nio.channels">SocketChannel</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#getChannel--">getChannel</a></span>()</code>
<div class="block">Valid for inbound; valid for outbound shortly after creation</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#getClockSkew--">getClockSkew</a></span>()</code>
<div class="block">A positive number means our clock is ahead of theirs.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#getCreated--">getCreated</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#getEstablishedOn--">getEstablishedOn</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>(package private) <a href="../../../../../net/i2p/router/transport/ntcp/EstablishState.html" title="interface in net.i2p.router.transport.ntcp">EstablishState</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#getEstablishState--">getEstablishState</a></span>()</code>
<div class="block">Only valid during establishment;
  replaced with EstablishState.VERIFIED or FAILED afterward</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/nio/channels/SelectionKey.html?is-external=true" title="class or interface in java.nio.channels">SelectionKey</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#getKey--">getKey</a></span>()</code>
<div class="block">Valid for inbound; valid for outbound shortly after creation</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#getMayDisconnect--">getMayDisconnect</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#getMessagesReceived--">getMessagesReceived</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#getMessagesSent--">getMessagesSent</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#getNextReadBuf--">getNextReadBuf</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#getNextWriteBuf--">getNextWriteBuf</a></span>()</code>
<div class="block">Returns but does not remove the buffer.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#getOutboundQueueSize--">getOutboundQueueSize</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>float</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#getRecvRate--">getRecvRate</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code><a href="../../../../../net/i2p/data/router/RouterAddress.html" title="class in net.i2p.data.router">RouterAddress</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#getRemoteAddress--">getRemoteAddress</a></span>()</code>
<div class="block">Only valid for outbound; null for inbound</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#getRemoteIP--">getRemoteIP</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code><a href="../../../../../net/i2p/data/router/RouterIdentity.html" title="class in net.i2p.data.router">RouterIdentity</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#getRemotePeer--">getRemotePeer</a></span>()</code>
<div class="block">Valid for outbound; valid for inbound after handshake</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>float</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#getSendRate--">getSendRate</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#getTimeSinceCreated--">getTimeSinceCreated</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#getTimeSinceCreated-long-">getTimeSinceCreated</a></span>(long&nbsp;now)</code>&nbsp;</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#getTimeSinceReceive--">getTimeSinceReceive</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#getTimeSinceReceive-long-">getTimeSinceReceive</a></span>(long&nbsp;now)</code>&nbsp;</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#getTimeSinceSend--">getTimeSinceSend</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i30" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#getTimeSinceSend-long-">getTimeSinceSend</a></span>(long&nbsp;now)</code>&nbsp;</td>
</tr>
<tr id="i31" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#getUptime--">getUptime</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i32" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#getVersion--">getVersion</a></span>()</code>
<div class="block">The NTCP2 version, for the console.</div>
</td>
</tr>
<tr id="i33" class="rowColor">
<td class="colFirst"><code>(package private) <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#getWriteLock--">getWriteLock</a></span>()</code>
<div class="block">Write lock for pumper delayed writes</div>
</td>
</tr>
<tr id="i34" class="altColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#gotZeroRead--">gotZeroRead</a></span>()</code>
<div class="block">workaround for EventPumper</div>
</td>
</tr>
<tr id="i35" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#isBacklogged--">isBacklogged</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i36" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#isClosed--">isClosed</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i37" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#isEstablished--">isEstablished</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i38" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#isInbound--">isInbound</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i39" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#isIPv6--">isIPv6</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i40" class="altColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#isWriteBufEmpty--">isWriteBufEmpty</a></span>()</code>
<div class="block">Replaces getWriteBufCount().</div>
</td>
</tr>
<tr id="i41" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#outboundConnected--">outboundConnected</a></span>()</code>
<div class="block">async callback after the outbound connection was completed (this should NOT block, 
 as it occurs in the selector thread)</div>
</td>
</tr>
<tr id="i42" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#prepareNextWrite-net.i2p.router.transport.ntcp.NTCPConnection.PrepBuffer-">prepareNextWrite</a></span>(<a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.PrepBuffer.html" title="class in net.i2p.router.transport.ntcp">NTCPConnection.PrepBuffer</a>&nbsp;prep)</code>
<div class="block">Prepare the next I2NP message for transmission.</div>
</td>
</tr>
<tr id="i43" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#queuedRecv-java.nio.ByteBuffer-net.i2p.router.transport.FIFOBandwidthLimiter.Request-">queuedRecv</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buf,
          <a href="../../../../../net/i2p/router/transport/FIFOBandwidthLimiter.Request.html" title="interface in net.i2p.router.transport">FIFOBandwidthLimiter.Request</a>&nbsp;req)</code>
<div class="block">We have read the data in the buffer, but we can't process it locally yet,
 because we're choked by the bandwidth limiter.</div>
</td>
</tr>
<tr id="i44" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#recv-java.nio.ByteBuffer-">recv</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buf)</code>
<div class="block">The contents of the buffer have been read and can be processed asap.</div>
</td>
</tr>
<tr id="i45" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#recvEncryptedI2NP-java.nio.ByteBuffer-">recvEncryptedI2NP</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buf)</code>
<div class="block">Connection must be established!

 The contents of the buffer include some fraction of one or more
 encrypted and encoded I2NP messages.</div>
</td>
</tr>
<tr id="i46" class="altColor">
<td class="colFirst"><code>(package private) static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#releaseResources--">releaseResources</a></span>()</code>
<div class="block">Call at transport shutdown</div>
</td>
</tr>
<tr id="i47" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#removeWriteBuf-java.nio.ByteBuffer-">removeWriteBuf</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buf)</code>
<div class="block">Remove the buffer, which _should_ be the one at the head of _writeBufs.</div>
</td>
</tr>
<tr id="i48" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#send-net.i2p.router.OutNetMessage-">send</a></span>(<a href="../../../../../net/i2p/router/OutNetMessage.html" title="class in net.i2p.router">OutNetMessage</a>&nbsp;msg)</code>
<div class="block">toss the message onto the connection's send queue</div>
</td>
</tr>
<tr id="i49" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#sendOurRouterInfo-boolean-">sendOurRouterInfo</a></span>(boolean&nbsp;shouldFlood)</code>
<div class="block">NTCP2 only</div>
</td>
</tr>
<tr id="i50" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#sendTerminationAndClose--">sendTerminationAndClose</a></span>()</code>
<div class="block">NTCP 1 or 2.</div>
</td>
</tr>
<tr id="i51" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#setChannel-java.nio.channels.SocketChannel-">setChannel</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/channels/SocketChannel.html?is-external=true" title="class or interface in java.nio.channels">SocketChannel</a>&nbsp;chan)</code>&nbsp;</td>
</tr>
<tr id="i52" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#setKey-java.nio.channels.SelectionKey-">setKey</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/channels/SelectionKey.html?is-external=true" title="class or interface in java.nio.channels">SelectionKey</a>&nbsp;key)</code>&nbsp;</td>
</tr>
<tr id="i53" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#setMayDisconnect--">setMayDisconnect</a></span>()</code>
<div class="block">Sets to true.</div>
</td>
</tr>
<tr id="i54" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#setRemotePeer-net.i2p.data.router.RouterIdentity-">setRemotePeer</a></span>(<a href="../../../../../net/i2p/data/router/RouterIdentity.html" title="class in net.i2p.data.router">RouterIdentity</a>&nbsp;ident)</code>
<div class="block">Valid for outbound; valid for inbound after handshake</div>
</td>
</tr>
<tr id="i55" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#setVersion-int-">setVersion</a></span>(int&nbsp;ver)</code>
<div class="block">Set version 2 from InboundEstablishState.</div>
</td>
</tr>
<tr id="i56" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#tooBacklogged--">tooBacklogged</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i57" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#toString--">toString</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i58" class="altColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#wantsWrite-byte:A-">wantsWrite</a></span>(byte[]&nbsp;data)</code>
<div class="block">Call when there is data ready to write.</div>
</td>
</tr>
<tr id="i59" class="rowColor">
<td class="colFirst"><code>(package private) void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.html#wantsWrite-byte:A-int-int-">wantsWrite</a></span>(byte[]&nbsp;data,
          int&nbsp;off,
          int&nbsp;len)</code>
<div class="block">Call when there is data ready to write.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="BUFFER_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BUFFER_SIZE</h4>
<pre>static final&nbsp;int BUFFER_SIZE</pre>
<div class="block">Why this is 16K, and where it is documented, good question?
  We claim we can do 32K datagrams so this is a problem.
  Needs to be fixed. But SSU can handle it?
  In the meantime, don't let the transport bid on big messages.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.ntcp.NTCPConnection.BUFFER_SIZE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="NTCP2_MAX_MSG_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NTCP2_MAX_MSG_SIZE</h4>
<pre>static final&nbsp;int NTCP2_MAX_MSG_SIZE</pre>
<div class="block">See spec. Max Noise payload 65535,
  minus 16 byte MAC and 3 byte block header.
  Includes 9-byte I2NP header.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.ntcp.NTCPConnection.NTCP2_MAX_MSG_SIZE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="REASON_UNSPEC">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>REASON_UNSPEC</h4>
<pre>static final&nbsp;int REASON_UNSPEC</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.ntcp.NTCPConnection.REASON_UNSPEC">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="REASON_TERMINATION">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>REASON_TERMINATION</h4>
<pre>static final&nbsp;int REASON_TERMINATION</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.ntcp.NTCPConnection.REASON_TERMINATION">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="REASON_TIMEOUT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>REASON_TIMEOUT</h4>
<pre>static final&nbsp;int REASON_TIMEOUT</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.ntcp.NTCPConnection.REASON_TIMEOUT">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="REASON_AEAD">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>REASON_AEAD</h4>
<pre>static final&nbsp;int REASON_AEAD</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.ntcp.NTCPConnection.REASON_AEAD">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="REASON_OPTIONS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>REASON_OPTIONS</h4>
<pre>static final&nbsp;int REASON_OPTIONS</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.ntcp.NTCPConnection.REASON_OPTIONS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="REASON_SIGTYPE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>REASON_SIGTYPE</h4>
<pre>static final&nbsp;int REASON_SIGTYPE</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.ntcp.NTCPConnection.REASON_SIGTYPE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="REASON_SKEW">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>REASON_SKEW</h4>
<pre>static final&nbsp;int REASON_SKEW</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.ntcp.NTCPConnection.REASON_SKEW">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="REASON_PADDING">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>REASON_PADDING</h4>
<pre>static final&nbsp;int REASON_PADDING</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.ntcp.NTCPConnection.REASON_PADDING">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="REASON_FRAMING">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>REASON_FRAMING</h4>
<pre>static final&nbsp;int REASON_FRAMING</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.ntcp.NTCPConnection.REASON_FRAMING">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="REASON_PAYLOAD">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>REASON_PAYLOAD</h4>
<pre>static final&nbsp;int REASON_PAYLOAD</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.ntcp.NTCPConnection.REASON_PAYLOAD">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="REASON_MSG1">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>REASON_MSG1</h4>
<pre>static final&nbsp;int REASON_MSG1</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.ntcp.NTCPConnection.REASON_MSG1">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="REASON_MSG2">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>REASON_MSG2</h4>
<pre>static final&nbsp;int REASON_MSG2</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.ntcp.NTCPConnection.REASON_MSG2">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="REASON_MSG3">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>REASON_MSG3</h4>
<pre>static final&nbsp;int REASON_MSG3</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.ntcp.NTCPConnection.REASON_MSG3">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="REASON_FRAME_TIMEOUT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>REASON_FRAME_TIMEOUT</h4>
<pre>static final&nbsp;int REASON_FRAME_TIMEOUT</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.ntcp.NTCPConnection.REASON_FRAME_TIMEOUT">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="REASON_SIGFAIL">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>REASON_SIGFAIL</h4>
<pre>static final&nbsp;int REASON_SIGFAIL</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.ntcp.NTCPConnection.REASON_SIGFAIL">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="REASON_S_MISMATCH">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>REASON_S_MISMATCH</h4>
<pre>static final&nbsp;int REASON_S_MISMATCH</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.ntcp.NTCPConnection.REASON_S_MISMATCH">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="REASON_BANNED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>REASON_BANNED</h4>
<pre>static final&nbsp;int REASON_BANNED</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.ntcp.NTCPConnection.REASON_BANNED">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="PADDING_MIN_DEFAULT_INT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PADDING_MIN_DEFAULT_INT</h4>
<pre>static final&nbsp;int PADDING_MIN_DEFAULT_INT</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.ntcp.NTCPConnection.PADDING_MIN_DEFAULT_INT">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="PADDING_MAX_DEFAULT_INT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PADDING_MAX_DEFAULT_INT</h4>
<pre>static final&nbsp;int PADDING_MAX_DEFAULT_INT</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.ntcp.NTCPConnection.PADDING_MAX_DEFAULT_INT">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="DUMMY_DEFAULT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DUMMY_DEFAULT</h4>
<pre>static final&nbsp;int DUMMY_DEFAULT</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.ntcp.NTCPConnection.DUMMY_DEFAULT">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="DELAY_DEFAULT">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DELAY_DEFAULT</h4>
<pre>static final&nbsp;int DELAY_DEFAULT</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.ntcp.NTCPConnection.DELAY_DEFAULT">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="NTCPConnection-net.i2p.router.RouterContext-net.i2p.router.transport.ntcp.NTCPTransport-java.nio.channels.SocketChannel-java.nio.channels.SelectionKey-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NTCPConnection</h4>
<pre>public&nbsp;NTCPConnection(<a href="../../../../../net/i2p/router/RouterContext.html" title="class in net.i2p.router">RouterContext</a>&nbsp;ctx,
                      <a href="../../../../../net/i2p/router/transport/ntcp/NTCPTransport.html" title="class in net.i2p.router.transport.ntcp">NTCPTransport</a>&nbsp;transport,
                      <a href="https://docs.oracle.com/javase/8/docs/api/java/nio/channels/SocketChannel.html?is-external=true" title="class or interface in java.nio.channels">SocketChannel</a>&nbsp;chan,
                      <a href="https://docs.oracle.com/javase/8/docs/api/java/nio/channels/SelectionKey.html?is-external=true" title="class or interface in java.nio.channels">SelectionKey</a>&nbsp;key)</pre>
<div class="block">Create an inbound connected (though not established) NTCP connection.
 Caller MUST call transport.establishing(this) after construction.
 Caller MUST key.attach(this) after construction.</div>
</li>
</ul>
<a name="NTCPConnection-net.i2p.router.RouterContext-net.i2p.router.transport.ntcp.NTCPTransport-net.i2p.data.router.RouterIdentity-net.i2p.data.router.RouterAddress-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>NTCPConnection</h4>
<pre>public&nbsp;NTCPConnection(<a href="../../../../../net/i2p/router/RouterContext.html" title="class in net.i2p.router">RouterContext</a>&nbsp;ctx,
                      <a href="../../../../../net/i2p/router/transport/ntcp/NTCPTransport.html" title="class in net.i2p.router.transport.ntcp">NTCPTransport</a>&nbsp;transport,
                      <a href="../../../../../net/i2p/data/router/RouterIdentity.html" title="class in net.i2p.data.router">RouterIdentity</a>&nbsp;remotePeer,
                      <a href="../../../../../net/i2p/data/router/RouterAddress.html" title="class in net.i2p.data.router">RouterAddress</a>&nbsp;remAddr,
                      int&nbsp;version)
               throws <a href="../../../../../net/i2p/data/DataFormatException.html" title="class in net.i2p.data">DataFormatException</a></pre>
<div class="block">Create an outbound unconnected NTCP connection.
 Caller MUST call transport.establishing(this) after construction.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>version</code> - must be 1 or 2</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../net/i2p/data/DataFormatException.html" title="class in net.i2p.data">DataFormatException</a></code> - if there's a problem with the address</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getChannel--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getChannel</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/channels/SocketChannel.html?is-external=true" title="class or interface in java.nio.channels">SocketChannel</a>&nbsp;getChannel()</pre>
<div class="block">Valid for inbound; valid for outbound shortly after creation</div>
</li>
</ul>
<a name="getKey--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getKey</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/channels/SelectionKey.html?is-external=true" title="class or interface in java.nio.channels">SelectionKey</a>&nbsp;getKey()</pre>
<div class="block">Valid for inbound; valid for outbound shortly after creation</div>
</li>
</ul>
<a name="setChannel-java.nio.channels.SocketChannel-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setChannel</h4>
<pre>public&nbsp;void&nbsp;setChannel(<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/channels/SocketChannel.html?is-external=true" title="class or interface in java.nio.channels">SocketChannel</a>&nbsp;chan)</pre>
</li>
</ul>
<a name="setKey-java.nio.channels.SelectionKey-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setKey</h4>
<pre>public&nbsp;void&nbsp;setKey(<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/channels/SelectionKey.html?is-external=true" title="class or interface in java.nio.channels">SelectionKey</a>&nbsp;key)</pre>
</li>
</ul>
<a name="isInbound--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isInbound</h4>
<pre>public&nbsp;boolean&nbsp;isInbound()</pre>
</li>
</ul>
<a name="isEstablished--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isEstablished</h4>
<pre>public&nbsp;boolean&nbsp;isEstablished()</pre>
</li>
</ul>
<a name="isIPv6--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isIPv6</h4>
<pre>public&nbsp;boolean&nbsp;isIPv6()</pre>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>IPv6</dd>
</dl>
</li>
</ul>
<a name="getRemoteIP--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRemoteIP</h4>
<pre>public&nbsp;byte[]&nbsp;getRemoteIP()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>null if unknown</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.53</dd>
</dl>
</li>
</ul>
<a name="getEstablishState--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEstablishState</h4>
<pre><a href="../../../../../net/i2p/router/transport/ntcp/EstablishState.html" title="interface in net.i2p.router.transport.ntcp">EstablishState</a>&nbsp;getEstablishState()</pre>
<div class="block">Only valid during establishment;
  replaced with EstablishState.VERIFIED or FAILED afterward</div>
</li>
</ul>
<a name="getRemoteAddress--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRemoteAddress</h4>
<pre>public&nbsp;<a href="../../../../../net/i2p/data/router/RouterAddress.html" title="class in net.i2p.data.router">RouterAddress</a>&nbsp;getRemoteAddress()</pre>
<div class="block">Only valid for outbound; null for inbound</div>
</li>
</ul>
<a name="getRemotePeer--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRemotePeer</h4>
<pre>public&nbsp;<a href="../../../../../net/i2p/data/router/RouterIdentity.html" title="class in net.i2p.data.router">RouterIdentity</a>&nbsp;getRemotePeer()</pre>
<div class="block">Valid for outbound; valid for inbound after handshake</div>
</li>
</ul>
<a name="setRemotePeer-net.i2p.data.router.RouterIdentity-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setRemotePeer</h4>
<pre>public&nbsp;void&nbsp;setRemotePeer(<a href="../../../../../net/i2p/data/router/RouterIdentity.html" title="class in net.i2p.data.router">RouterIdentity</a>&nbsp;ident)</pre>
<div class="block">Valid for outbound; valid for inbound after handshake</div>
</li>
</ul>
<a name="getClockSkew--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getClockSkew</h4>
<pre>public&nbsp;long&nbsp;getClockSkew()</pre>
<div class="block">A positive number means our clock is ahead of theirs.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>seconds</dd>
</dl>
</li>
</ul>
<a name="getUptime--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUptime</h4>
<pre>public&nbsp;long&nbsp;getUptime()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>milliseconds</dd>
</dl>
</li>
</ul>
<a name="getEstablishedOn--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEstablishedOn</h4>
<pre>public&nbsp;long&nbsp;getEstablishedOn()</pre>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.55</dd>
</dl>
</li>
</ul>
<a name="getMessagesSent--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMessagesSent</h4>
<pre>public&nbsp;int&nbsp;getMessagesSent()</pre>
</li>
</ul>
<a name="getMessagesReceived--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMessagesReceived</h4>
<pre>public&nbsp;int&nbsp;getMessagesReceived()</pre>
</li>
</ul>
<a name="getOutboundQueueSize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOutboundQueueSize</h4>
<pre>public&nbsp;int&nbsp;getOutboundQueueSize()</pre>
</li>
</ul>
<a name="getTimeSinceSend--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTimeSinceSend</h4>
<pre>public&nbsp;long&nbsp;getTimeSinceSend()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>milliseconds</dd>
</dl>
</li>
</ul>
<a name="getTimeSinceSend-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTimeSinceSend</h4>
<pre>public&nbsp;long&nbsp;getTimeSinceSend(long&nbsp;now)</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>milliseconds</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.38</dd>
</dl>
</li>
</ul>
<a name="getTimeSinceReceive--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTimeSinceReceive</h4>
<pre>public&nbsp;long&nbsp;getTimeSinceReceive()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>milliseconds</dd>
</dl>
</li>
</ul>
<a name="getTimeSinceReceive-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTimeSinceReceive</h4>
<pre>public&nbsp;long&nbsp;getTimeSinceReceive(long&nbsp;now)</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>milliseconds</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.38</dd>
</dl>
</li>
</ul>
<a name="getTimeSinceCreated--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTimeSinceCreated</h4>
<pre>public&nbsp;long&nbsp;getTimeSinceCreated()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>milliseconds</dd>
</dl>
</li>
</ul>
<a name="getTimeSinceCreated-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTimeSinceCreated</h4>
<pre>public&nbsp;long&nbsp;getTimeSinceCreated(long&nbsp;now)</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>milliseconds</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.38</dd>
</dl>
</li>
</ul>
<a name="getCreated--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCreated</h4>
<pre>public&nbsp;long&nbsp;getCreated()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>when this connection was created (not established)</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.20</dd>
</dl>
</li>
</ul>
<a name="getVersion--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVersion</h4>
<pre>public&nbsp;int&nbsp;getVersion()</pre>
<div class="block">The NTCP2 version, for the console.
  For outbound, will not change.
  For inbound, defaults to 1, may change to 2 after establishment.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the version, 1 or 2</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.36</dd>
</dl>
</li>
</ul>
<a name="setVersion-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setVersion</h4>
<pre>public&nbsp;void&nbsp;setVersion(int&nbsp;ver)</pre>
<div class="block">Set version 2 from InboundEstablishState.
  Just for logging, so we know before finishInboundEstablish() is called.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.36</dd>
</dl>
</li>
</ul>
<a name="setMayDisconnect--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMayDisconnect</h4>
<pre>public&nbsp;void&nbsp;setMayDisconnect()</pre>
<div class="block">Sets to true.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.24</dd>
</dl>
</li>
</ul>
<a name="getMayDisconnect--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMayDisconnect</h4>
<pre>public&nbsp;boolean&nbsp;getMayDisconnect()</pre>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.24</dd>
</dl>
</li>
</ul>
<a name="clearZeroRead--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearZeroRead</h4>
<pre>void&nbsp;clearZeroRead()</pre>
<div class="block">workaround for EventPumper</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.8.12</dd>
</dl>
</li>
</ul>
<a name="gotZeroRead--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>gotZeroRead</h4>
<pre>int&nbsp;gotZeroRead()</pre>
<div class="block">workaround for EventPumper</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>value after incrementing</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.8.12</dd>
</dl>
</li>
</ul>
<a name="isClosed--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isClosed</h4>
<pre>public&nbsp;boolean&nbsp;isClosed()</pre>
</li>
</ul>
<a name="close--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html?is-external=true#close--" title="class or interface in java.io">close</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a></code></dd>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html?is-external=true#close--" title="class or interface in java.lang">close</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang">AutoCloseable</a></code></dd>
</dl>
</li>
</ul>
<a name="close-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close(boolean&nbsp;allowRequeue)</pre>
</li>
</ul>
<a name="closeOnTimeout-java.lang.String-java.lang.Exception-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>closeOnTimeout</h4>
<pre>void&nbsp;closeOnTimeout(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;cause,
                    <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a>&nbsp;e)</pre>
<div class="block">Close and release EstablishState resources.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>e</code> - may be null</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.16</dd>
</dl>
</li>
</ul>
<a name="send-net.i2p.router.OutNetMessage-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>send</h4>
<pre>public&nbsp;void&nbsp;send(<a href="../../../../../net/i2p/router/OutNetMessage.html" title="class in net.i2p.router">OutNetMessage</a>&nbsp;msg)</pre>
<div class="block">toss the message onto the connection's send queue</div>
</li>
</ul>
<a name="isBacklogged--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isBacklogged</h4>
<pre>public&nbsp;boolean&nbsp;isBacklogged()</pre>
</li>
</ul>
<a name="tooBacklogged--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tooBacklogged</h4>
<pre>public&nbsp;boolean&nbsp;tooBacklogged()</pre>
</li>
</ul>
<a name="enqueueInfoMessage--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>enqueueInfoMessage</h4>
<pre>void&nbsp;enqueueInfoMessage()</pre>
<div class="block">Inject a DatabaseStoreMessage with our RouterInfo. NTCP 1 or 2.

  Externally, this is only called by NTCPTransport for outbound cons,
  before the con is established, but we know what version it is.

  Internally, may be called for outbound or inbound, but only after the
  con is established, so we know what the version is.</div>
</li>
</ul>
<a name="prepareNextWrite-net.i2p.router.transport.ntcp.NTCPConnection.PrepBuffer-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prepareNextWrite</h4>
<pre>void&nbsp;prepareNextWrite(<a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.PrepBuffer.html" title="class in net.i2p.router.transport.ntcp">NTCPConnection.PrepBuffer</a>&nbsp;prep)</pre>
<div class="block">Prepare the next I2NP message for transmission.  This should be run from
 the Writer thread pool. NTCP 1 or 2.
 
 This is the entry point as called from Writer.Runner.run()</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>prep</code> - an instance of PrepBuffer to use as scratch space</dd>
</dl>
</li>
</ul>
<a name="sendOurRouterInfo-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendOurRouterInfo</h4>
<pre>void&nbsp;sendOurRouterInfo(boolean&nbsp;shouldFlood)</pre>
<div class="block">NTCP2 only</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.36, pkg private since 0.9.55 for EventPumper</dd>
</dl>
</li>
</ul>
<a name="sendTerminationAndClose--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendTerminationAndClose</h4>
<pre>void&nbsp;sendTerminationAndClose()</pre>
<div class="block">NTCP 1 or 2.
  For NTCP1, simply closes the connection immediately.
  For NTCP2, sends termination and then closes the connection after a brief delay.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.36</dd>
</dl>
</li>
</ul>
<a name="outboundConnected--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>outboundConnected</h4>
<pre>void&nbsp;outboundConnected()</pre>
<div class="block">async callback after the outbound connection was completed (this should NOT block, 
 as it occurs in the selector thread)</div>
</li>
</ul>
<a name="wantsWrite-byte:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>wantsWrite</h4>
<pre>void&nbsp;wantsWrite(byte[]&nbsp;data)</pre>
<div class="block">Call when there is data ready to write.
  If we have bandwidth, calls write() which calls EventPumnper.wantsWrite(con).
  If no bandwidth, calls queuedWrite().</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>moved from EventPumper in 0.9.52</dd>
</dl>
</li>
</ul>
<a name="wantsWrite-byte:A-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>wantsWrite</h4>
<pre>void&nbsp;wantsWrite(byte[]&nbsp;data,
                int&nbsp;off,
                int&nbsp;len)</pre>
<div class="block">Call when there is data ready to write.
  If we have bandwidth, calls write() which calls EventPumnper.wantsWrite(con).
  If no bandwidth, calls queuedWrite().</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.35 off/len version, moved from EventPumper in 0.9.52</dd>
</dl>
</li>
</ul>
<a name="queuedRecv-java.nio.ByteBuffer-net.i2p.router.transport.FIFOBandwidthLimiter.Request-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>queuedRecv</h4>
<pre>void&nbsp;queuedRecv(<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buf,
                <a href="../../../../../net/i2p/router/transport/FIFOBandwidthLimiter.Request.html" title="interface in net.i2p.router.transport">FIFOBandwidthLimiter.Request</a>&nbsp;req)</pre>
<div class="block">We have read the data in the buffer, but we can't process it locally yet,
 because we're choked by the bandwidth limiter.  Cache the contents of
 the buffer (not copy) and register ourselves to be notified when the 
 contents have been fully allocated</div>
</li>
</ul>
<a name="recv-java.nio.ByteBuffer-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recv</h4>
<pre>void&nbsp;recv(<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buf)</pre>
<div class="block">The contents of the buffer have been read and can be processed asap.
 This should not block, and the NTCP connection now owns the buffer
 to do with as it pleases BUT it should eventually copy out the data
 and call EventPumper.releaseBuf().</div>
</li>
</ul>
<a name="getWriteLock--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getWriteLock</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;getWriteLock()</pre>
<div class="block">Write lock for pumper delayed writes</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.53</dd>
</dl>
</li>
</ul>
<a name="getNextReadBuf--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNextReadBuf</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;getNextReadBuf()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>null if none available</dd>
</dl>
</li>
</ul>
<a name="isWriteBufEmpty--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isWriteBufEmpty</h4>
<pre>boolean&nbsp;isWriteBufEmpty()</pre>
<div class="block">Replaces getWriteBufCount().
 Caller should sync on getWriteLock()</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.8.12</dd>
</dl>
</li>
</ul>
<a name="getNextWriteBuf--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNextWriteBuf</h4>
<pre><a href="https://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;getNextWriteBuf()</pre>
<div class="block">Returns but does not remove the buffer.
 Call removeWriteBuf() after write complete.
 Caller should sync on getWriteLock()</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>null if none available</dd>
</dl>
</li>
</ul>
<a name="removeWriteBuf-java.nio.ByteBuffer-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeWriteBuf</h4>
<pre>void&nbsp;removeWriteBuf(<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buf)</pre>
<div class="block">Remove the buffer, which _should_ be the one at the head of _writeBufs.
  Caller must sync on _writeLock</div>
</li>
</ul>
<a name="getSendRate--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSendRate</h4>
<pre>public&nbsp;float&nbsp;getSendRate()</pre>
</li>
</ul>
<a name="getRecvRate--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRecvRate</h4>
<pre>public&nbsp;float&nbsp;getRecvRate()</pre>
</li>
</ul>
<a name="recvEncryptedI2NP-java.nio.ByteBuffer-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recvEncryptedI2NP</h4>
<pre>void&nbsp;recvEncryptedI2NP(<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buf)</pre>
<div class="block">Connection must be established!

 The contents of the buffer include some fraction of one or more
 encrypted and encoded I2NP messages.  individual i2np messages are
 encoded as "sizeof(data)+data+pad+crc", and those are encrypted
 with the session key and the last 16 bytes of the previous encrypted
 i2np message.

 The NTCP connection now owns the buffer
 BUT it must copy out the data
 as reader will call EventPumper.releaseBuf().

 This is the entry point as called from Reader.processRead()</div>
</li>
</ul>
<a name="releaseResources--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>releaseResources</h4>
<pre>static&nbsp;void&nbsp;releaseResources()</pre>
<div class="block">Call at transport shutdown</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.8.8</dd>
</dl>
</li>
</ul>
<a name="finishOutboundEstablishment-com.southernstorm.noise.protocol.CipherState-com.southernstorm.noise.protocol.CipherState-byte:A-byte:A-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finishOutboundEstablishment</h4>
<pre>void&nbsp;finishOutboundEstablishment(<a href="../../../../../com/southernstorm/noise/protocol/CipherState.html" title="interface in com.southernstorm.noise.protocol">CipherState</a>&nbsp;sender,
                                 <a href="../../../../../com/southernstorm/noise/protocol/CipherState.html" title="interface in com.southernstorm.noise.protocol">CipherState</a>&nbsp;receiver,
                                 byte[]&nbsp;sip_ab,
                                 byte[]&nbsp;sip_ba,
                                 long&nbsp;clockSkew)</pre>
<div class="block">We are Alice. NTCP2 only.

 Caller MUST call recvEncryptedI2NP() after, for any remaining bytes in receive buffer</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>clockSkew</code> - OUR clock minus BOB's clock in seconds (may be negative, obviously, but |val| should
                  be under 1 minute)</dd>
<dd><code>sender</code> - use to send to Bob</dd>
<dd><code>receiver</code> - use to receive from Bob</dd>
<dd><code>sip_ab</code> - 24 bytes to init SipHash to Bob</dd>
<dd><code>sip_ba</code> - 24 bytes to init SipHash from Bob</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.36</dd>
</dl>
</li>
</ul>
<a name="finishInboundEstablishment-com.southernstorm.noise.protocol.CipherState-com.southernstorm.noise.protocol.CipherState-byte:A-byte:A-long-net.i2p.router.transport.ntcp.NTCP2Options-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finishInboundEstablishment</h4>
<pre>void&nbsp;finishInboundEstablishment(<a href="../../../../../com/southernstorm/noise/protocol/CipherState.html" title="interface in com.southernstorm.noise.protocol">CipherState</a>&nbsp;sender,
                                <a href="../../../../../com/southernstorm/noise/protocol/CipherState.html" title="interface in com.southernstorm.noise.protocol">CipherState</a>&nbsp;receiver,
                                byte[]&nbsp;sip_ba,
                                byte[]&nbsp;sip_ab,
                                long&nbsp;clockSkew,
                                <a href="../../../../../net/i2p/router/transport/ntcp/NTCP2Options.html" title="class in net.i2p.router.transport.ntcp">NTCP2Options</a>&nbsp;hisPadding)</pre>
<div class="block">We are Bob. NTCP2 only.

 Caller MUST call recvEncryptedI2NP() after, for any remaining bytes in receive buffer</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>clockSkew</code> - OUR clock minus ALICE's clock in seconds (may be negative, obviously, but |val| should
                  be under 1 minute)</dd>
<dd><code>sender</code> - use to send to Alice</dd>
<dd><code>receiver</code> - use to receive from Alice</dd>
<dd><code>sip_ba</code> - 24 bytes to init SipHash to Alice</dd>
<dd><code>sip_ab</code> - 24 bytes to init SipHash from Alice</dd>
<dd><code>hisPadding</code> - may be null</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.36</dd>
</dl>
</li>
</ul>
<a name="failInboundEstablishment-com.southernstorm.noise.protocol.CipherState-byte:A-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>failInboundEstablishment</h4>
<pre>void&nbsp;failInboundEstablishment(<a href="../../../../../com/southernstorm/noise/protocol/CipherState.html" title="interface in com.southernstorm.noise.protocol">CipherState</a>&nbsp;sender,
                              byte[]&nbsp;sip_ba,
                              int&nbsp;reason)</pre>
<div class="block">We are Bob. NTCP2 only.
 This is only for invalid payload received in message 3. We send a termination and close.
 There will be no receiving.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sender</code> - use to send to Alice</dd>
<dd><code>sip_ba</code> - 24 bytes to init SipHash to Alice</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.36</dd>
</dl>
</li>
</ul>
<a name="toString--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/NTCPConnection.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../net/i2p/router/transport/ntcp/NTCP2Payload.TerminationBlock.html" title="class in net.i2p.router.transport.ntcp"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../net/i2p/router/transport/ntcp/NTCPConnection.PrepBuffer.html" title="class in net.i2p.router.transport.ntcp"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?net/i2p/router/transport/ntcp/NTCPConnection.html" target="_top">Frames</a></li>
<li><a href="NTCPConnection.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
