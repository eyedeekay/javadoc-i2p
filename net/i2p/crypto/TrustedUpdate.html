<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>TrustedUpdate (I2P Anonymous Network - Java Documentation - API Version 0.9.56)</title>
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="TrustedUpdate (I2P Anonymous Network - Java Documentation - API Version 0.9.56)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":9,"i4":9,"i5":10,"i6":10,"i7":9,"i8":10,"i9":10,"i10":9,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TrustedUpdate.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../net/i2p/crypto/TagSetHandle.html" title="interface in net.i2p.crypto"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../net/i2p/crypto/YKGenerator.html" title="class in net.i2p.crypto"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?net/i2p/crypto/TrustedUpdate.html" target="_top">Frames</a></li>
<li><a href="TrustedUpdate.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">net.i2p.crypto</div>
<h2 title="Class TrustedUpdate" class="title">Class TrustedUpdate</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>net.i2p.crypto.TrustedUpdate</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">TrustedUpdate</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block"><p>Handles DSA signing and verification of update files.
 </p>
 <p>For convenience this class also makes certain operations available via the
 command line. These can be invoked as follows:
 </p>
 <pre>
 java net.i2p.crypto.TrustedUpdate keygen       <i>publicKeyFile privateKeyFile</i>
 java net.i2p.crypto.TrustedUpdate showversion  <i>signedFile</i>
 java net.i2p.crypto.TrustedUpdate sign         <i>inputFile signedFile privateKeyFile version</i>
 java net.i2p.crypto.TrustedUpdate verifysig    <i>signedFile</i>
 java net.i2p.crypto.TrustedUpdate verifyupdate <i>signedFile</i>
 java net.i2p.crypto.TrustedUpdate verifyversion <i>signedFile</i>
 </pre></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>jrandom and smeghead</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/i2p/crypto/TrustedUpdate.html#HEADER_BYTES">HEADER_BYTES</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../net/i2p/crypto/TrustedUpdate.html#TrustedUpdate--">TrustedUpdate</a></span>()</code>
<div class="block">Constructs a new <code>TrustedUpdate</code> with the default global
 context.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../net/i2p/crypto/TrustedUpdate.html#TrustedUpdate-net.i2p.I2PAppContext-">TrustedUpdate</a></span>(<a href="../../../net/i2p/I2PAppContext.html" title="class in net.i2p">I2PAppContext</a>&nbsp;context)</code>
<div class="block">Constructs a new <code>TrustedUpdate</code> with the given
 <a href="../../../net/i2p/I2PAppContext.html" title="class in net.i2p"><code>I2PAppContext</code></a>.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/i2p/crypto/TrustedUpdate.html#addKey-java.lang.String-java.lang.String-">addKey</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;key,
      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name)</code>
<div class="block">Duplicate keys or names rejected,
  except that duplicate empty names are allowed</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="../../../net/i2p/data/SigningPublicKey.html" title="class in net.i2p.data">SigningPublicKey</a>,<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/i2p/crypto/TrustedUpdate.html#getKeys--">getKeys</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/i2p/crypto/TrustedUpdate.html#getTrustedKeysString--">getTrustedKeysString</a></span>()</code>
<div class="block">Fetches the trusted keys for the current instance.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/i2p/crypto/TrustedUpdate.html#getVersionString-java.io.File-">getVersionString</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;signedFile)</code>
<div class="block">Reads the version string from a signed update file.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/i2p/crypto/TrustedUpdate.html#getVersionString-java.io.InputStream-">getVersionString</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</a>&nbsp;inputStream)</code>
<div class="block">Reads the version string from an input stream</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/i2p/crypto/TrustedUpdate.html#haveKey-java.lang.String-">haveKey</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;key)</code>
<div class="block">Do we know about the following key?</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/i2p/crypto/TrustedUpdate.html#isUpdatedVersion-java.lang.String-java.io.File-">isUpdatedVersion</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;currentVersion,
                <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;signedFile)</code>
<div class="block">Verifies that the version of the given signed update file is newer than
 <code>currentVersion</code>.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/i2p/crypto/TrustedUpdate.html#main-java.lang.String:A-">main</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>[]&nbsp;args)</code>
<div class="block">Parses command line arguments when this class is used from the command
 line.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/i2p/crypto/TrustedUpdate.html#migrateFile-java.io.File-java.io.File-">migrateFile</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;signedFile,
           <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;outputFile)</code>
<div class="block">Extract the file.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/i2p/crypto/TrustedUpdate.html#migrateVerified-java.lang.String-java.io.File-java.io.File-">migrateVerified</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;currentVersion,
               <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;signedFile,
               <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;outputFile)</code>
<div class="block">Verifies the signature of a signed update file, and if it's valid and the
 file's version is newer than the given current version, migrates the data
 out of <code>signedFile</code> and into <code>outputFile</code>.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/i2p/crypto/TrustedUpdate.html#needsUpdate-java.lang.String-java.lang.String-">needsUpdate</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;currentVersion,
           <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;newVersion)</code>
<div class="block">Checks if the given version is newer than the given current version.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/i2p/crypto/TrustedUpdate.html#newVersion--">newVersion</a></span>()</code>
<div class="block">version in the .sud file, valid only after calling migrateVerified()</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code><a href="../../../net/i2p/data/Signature.html" title="class in net.i2p.data">Signature</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/i2p/crypto/TrustedUpdate.html#sign-java.lang.String-java.lang.String-net.i2p.data.SigningPrivateKey-java.lang.String-">sign</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;inputFile,
    <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;signedFile,
    <a href="../../../net/i2p/data/SigningPrivateKey.html" title="class in net.i2p.data">SigningPrivateKey</a>&nbsp;signingPrivateKey,
    <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;version)</code>
<div class="block">Uses the given <a href="../../../net/i2p/data/SigningPrivateKey.html" title="class in net.i2p.data"><code>SigningPrivateKey</code></a> to sign the given
 input file along with its version string using DSA.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code><a href="../../../net/i2p/data/Signature.html" title="class in net.i2p.data">Signature</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/i2p/crypto/TrustedUpdate.html#sign-java.lang.String-java.lang.String-java.lang.String-java.lang.String-">sign</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;inputFile,
    <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;signedFile,
    <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;privateKeyFile,
    <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;version)</code>
<div class="block">Uses the given private key to sign the given input file along with its
 version string using DSA.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/i2p/crypto/TrustedUpdate.html#verify-java.io.File-">verify</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;signedFile)</code>
<div class="block">Verifies the DSA signature of a signed update file.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/i2p/crypto/TrustedUpdate.html#verify-java.io.File-net.i2p.data.SigningPublicKey-">verify</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;signedFile,
      <a href="../../../net/i2p/data/SigningPublicKey.html" title="class in net.i2p.data">SigningPublicKey</a>&nbsp;signingPublicKey)</code>
<div class="block">Verifies the DSA signature of a signed update file.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/i2p/crypto/TrustedUpdate.html#verify-java.lang.String-java.lang.String-">verify</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;signedFile,
      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;publicKeyFile)</code>
<div class="block">Verifies the DSA signature of a signed update file.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../net/i2p/crypto/TrustedUpdate.html#verifyAndGetSigner-java.io.File-">verifyAndGetSigner</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;signedFile)</code>
<div class="block">Verifies the DSA signature of a signed update file.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="HEADER_BYTES">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>HEADER_BYTES</h4>
<pre>public static final&nbsp;int HEADER_BYTES</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="TrustedUpdate--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TrustedUpdate</h4>
<pre>public&nbsp;TrustedUpdate()</pre>
<div class="block">Constructs a new <code>TrustedUpdate</code> with the default global
 context.</div>
</li>
</ul>
<a name="TrustedUpdate-net.i2p.I2PAppContext-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>TrustedUpdate</h4>
<pre>public&nbsp;TrustedUpdate(<a href="../../../net/i2p/I2PAppContext.html" title="class in net.i2p">I2PAppContext</a>&nbsp;context)</pre>
<div class="block">Constructs a new <code>TrustedUpdate</code> with the given
 <a href="../../../net/i2p/I2PAppContext.html" title="class in net.i2p"><code>I2PAppContext</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - An instance of <code>I2PAppContext</code>.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getKeys--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getKeys</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="../../../net/i2p/data/SigningPublicKey.html" title="class in net.i2p.data">SigningPublicKey</a>,<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;getKeys()</pre>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.8, public since 0.9.14.1</dd>
</dl>
</li>
</ul>
<a name="addKey-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addKey</h4>
<pre>public&nbsp;boolean&nbsp;addKey(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;key,
                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name)</pre>
<div class="block">Duplicate keys or names rejected,
  except that duplicate empty names are allowed</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - 172 character base64 string</dd>
<dd><code>name</code> - non-null but "" ok</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if successful</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.7.12</dd>
</dl>
</li>
</ul>
<a name="haveKey-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>haveKey</h4>
<pre>public&nbsp;boolean&nbsp;haveKey(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;key)</pre>
<div class="block">Do we know about the following key?</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.7.12</dd>
</dl>
</li>
</ul>
<a name="main-java.lang.String:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>[]&nbsp;args)</pre>
<div class="block">Parses command line arguments when this class is used from the command
 line.
 Exits 1 on failure so this can be used in scripts.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>args</code> - Command line parameters.</dd>
</dl>
</li>
</ul>
<a name="needsUpdate-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>needsUpdate</h4>
<pre>public static final&nbsp;boolean&nbsp;needsUpdate(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;currentVersion,
                                        <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;newVersion)</pre>
<div class="block">Checks if the given version is newer than the given current version.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>currentVersion</code> - The current version.</dd>
<dd><code>newVersion</code> - The version to test.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the given version is newer than the current
         version, otherwise <code>false</code>.</dd>
</dl>
</li>
</ul>
<a name="getTrustedKeysString--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTrustedKeysString</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getTrustedKeysString()</pre>
<div class="block">Fetches the trusted keys for the current instance.
 We could sort it but don't bother.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A <code>String</code> containing the trusted keys,
 delimited by CR LF line breaks.</dd>
</dl>
</li>
</ul>
<a name="getVersionString-java.io.File-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVersionString</h4>
<pre>public static&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getVersionString(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;signedFile)</pre>
<div class="block">Reads the version string from a signed update file.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>signedFile</code> - A signed update file.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The version string read, or an empty string if no version string
         is present.</dd>
</dl>
</li>
</ul>
<a name="getVersionString-java.io.InputStream-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVersionString</h4>
<pre>public static&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getVersionString(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</a>&nbsp;inputStream)</pre>
<div class="block">Reads the version string from an input stream</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>inputStream</code> - containing at least 56 bytes</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The version string read, or an empty string if no version string
         is present.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.7.12</dd>
</dl>
</li>
</ul>
<a name="newVersion--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newVersion</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;newVersion()</pre>
<div class="block">version in the .sud file, valid only after calling migrateVerified()</div>
</li>
</ul>
<a name="isUpdatedVersion-java.lang.String-java.io.File-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isUpdatedVersion</h4>
<pre>public&nbsp;boolean&nbsp;isUpdatedVersion(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;currentVersion,
                                <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;signedFile)</pre>
<div class="block">Verifies that the version of the given signed update file is newer than
 <code>currentVersion</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>currentVersion</code> - The current version to check against.</dd>
<dd><code>signedFile</code> - The signed update file.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the signed update file's version is newer
         than the current version, otherwise <code>false</code>.</dd>
</dl>
</li>
</ul>
<a name="migrateVerified-java.lang.String-java.io.File-java.io.File-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>migrateVerified</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;migrateVerified(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;currentVersion,
                              <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;signedFile,
                              <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;outputFile)</pre>
<div class="block">Verifies the signature of a signed update file, and if it's valid and the
 file's version is newer than the given current version, migrates the data
 out of <code>signedFile</code> and into <code>outputFile</code>.
 
 As of 0.8.8, the embedded file must be a zip file with
 a standard zip header and a UTF-8 zip file comment
 matching the version in the sud header. This prevents spoofing the version,
 since the sud signature does NOT cover the version in the header.
 (We do this for sud/su2 files but not plugin xpi2p files -
 don't use this method for plugin files)</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>currentVersion</code> - The current version to check against.</dd>
<dd><code>signedFile</code> - A signed update file.</dd>
<dd><code>outputFile</code> - The file to write the verified data to.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>null</code> if the signature and version were valid and the
         data was moved, and an error <code>String</code> otherwise.</dd>
</dl>
</li>
</ul>
<a name="migrateFile-java.io.File-java.io.File-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>migrateFile</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;migrateFile(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;signedFile,
                          <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;outputFile)</pre>
<div class="block">Extract the file. Skips and ignores the signature and version. No verification.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>signedFile</code> - A signed update file.</dd>
<dd><code>outputFile</code> - The file to write the verified data to.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>null</code> if the
         data was moved, and an error <code>String</code> otherwise.</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.7.12</dd>
</dl>
</li>
</ul>
<a name="sign-java.lang.String-java.lang.String-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sign</h4>
<pre>public&nbsp;<a href="../../../net/i2p/data/Signature.html" title="class in net.i2p.data">Signature</a>&nbsp;sign(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;inputFile,
                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;signedFile,
                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;privateKeyFile,
                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;version)</pre>
<div class="block">Uses the given private key to sign the given input file along with its
 version string using DSA. The output will be a signed update file where
 the first 40 bytes are the resulting DSA signature, the next 16 bytes are
 the input file's version string encoded in UTF-8 (padded with trailing
 <code>0h</code> characters if necessary), and the remaining bytes are the
 raw bytes of the input file.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>inputFile</code> - The file to be signed.</dd>
<dd><code>signedFile</code> - The signed update file to write.</dd>
<dd><code>privateKeyFile</code> - The name of the file containing the private key to
                       sign <code>inputFile</code> with.</dd>
<dd><code>version</code> - The version string of the input file. If this is
                       longer than 16 characters it will be truncated.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>An instance of <a href="../../../net/i2p/data/Signature.html" title="class in net.i2p.data"><code>Signature</code></a>, or
         <code>null</code> if there was an error.</dd>
</dl>
</li>
</ul>
<a name="sign-java.lang.String-java.lang.String-net.i2p.data.SigningPrivateKey-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sign</h4>
<pre>public&nbsp;<a href="../../../net/i2p/data/Signature.html" title="class in net.i2p.data">Signature</a>&nbsp;sign(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;inputFile,
                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;signedFile,
                      <a href="../../../net/i2p/data/SigningPrivateKey.html" title="class in net.i2p.data">SigningPrivateKey</a>&nbsp;signingPrivateKey,
                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;version)</pre>
<div class="block">Uses the given <a href="../../../net/i2p/data/SigningPrivateKey.html" title="class in net.i2p.data"><code>SigningPrivateKey</code></a> to sign the given
 input file along with its version string using DSA. The output will be a
 signed update file where the first 40 bytes are the resulting DSA
 signature, the next 16 bytes are the input file's version string encoded
 in UTF-8 (padded with trailing <code>0h</code> characters if necessary),
 and the remaining bytes are the raw bytes of the input file.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>inputFile</code> - The file to be signed.</dd>
<dd><code>signedFile</code> - The signed update file to write.</dd>
<dd><code>signingPrivateKey</code> - An instance of <code>SigningPrivateKey</code>
                          to sign <code>inputFile</code> with.</dd>
<dd><code>version</code> - The version string of the input file. If this is
                          longer than 16 characters it will be truncated.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>An instance of <a href="../../../net/i2p/data/Signature.html" title="class in net.i2p.data"><code>Signature</code></a>, or
         <code>null</code> if there was an error.</dd>
</dl>
</li>
</ul>
<a name="verify-java.io.File-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verify</h4>
<pre>public&nbsp;boolean&nbsp;verify(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;signedFile)</pre>
<div class="block">Verifies the DSA signature of a signed update file.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>signedFile</code> - The signed update file to check.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the file has a valid signature, otherwise
         <code>false</code>.</dd>
</dl>
</li>
</ul>
<a name="verifyAndGetSigner-java.io.File-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verifyAndGetSigner</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;verifyAndGetSigner(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;signedFile)</pre>
<div class="block">Verifies the DSA signature of a signed update file.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>signedFile</code> - The signed update file to check.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>signer (could be empty string) or null if invalid</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.7.12</dd>
</dl>
</li>
</ul>
<a name="verify-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verify</h4>
<pre>public&nbsp;boolean&nbsp;verify(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;signedFile,
                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;publicKeyFile)</pre>
<div class="block">Verifies the DSA signature of a signed update file.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>signedFile</code> - The signed update file to check.</dd>
<dd><code>publicKeyFile</code> - A file containing the public key to use for
                      verification.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the file has a valid signature, otherwise
         <code>false</code>.</dd>
</dl>
</li>
</ul>
<a name="verify-java.io.File-net.i2p.data.SigningPublicKey-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>verify</h4>
<pre>public&nbsp;boolean&nbsp;verify(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;signedFile,
                      <a href="../../../net/i2p/data/SigningPublicKey.html" title="class in net.i2p.data">SigningPublicKey</a>&nbsp;signingPublicKey)</pre>
<div class="block">Verifies the DSA signature of a signed update file.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>signedFile</code> - The signed update file to check.</dd>
<dd><code>signingPublicKey</code> - An instance of
                         <a href="../../../net/i2p/data/SigningPublicKey.html" title="class in net.i2p.data"><code>SigningPublicKey</code></a> to use for
                         verification.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the file has a valid signature, otherwise
         <code>false</code>.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TrustedUpdate.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../net/i2p/crypto/TagSetHandle.html" title="interface in net.i2p.crypto"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../net/i2p/crypto/YKGenerator.html" title="class in net.i2p.crypto"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?net/i2p/crypto/TrustedUpdate.html" target="_top">Frames</a></li>
<li><a href="TrustedUpdate.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
