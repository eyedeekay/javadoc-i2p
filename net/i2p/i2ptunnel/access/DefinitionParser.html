<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (18) -->
<title>DefinitionParser (I2P Anonymous Network - Java Documentation - API Version 0.9.55)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: net.i2p.i2ptunnel.access, class: DefinitionParser">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon"></span><span class="nav-bar-toggle-icon"></span><span class="nav-bar-toggle-icon"></span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/DefinitionParser.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li>Field</li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">net.i2p.i2ptunnel.access</a></div>
<h1 title="Class DefinitionParser" class="title">Class DefinitionParser</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">net.i2p.i2ptunnel.access.DefinitionParser</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">class </span><span class="element-name type-name-label">DefinitionParser</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">Utility class for parsing filter definitions</div>
<dl class="notes">
<dt>Since:</dt>
<dd>0.9.40</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">DefinitionParser</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>(package private) static <a href="FilterDefinition.html" title="class in net.i2p.i2ptunnel.access">FilterDefinition</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#parse(java.lang.String%5B%5D)" class="member-name-link">parse</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]&nbsp;definition)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">
 Processes an array of String objects containing the human-readable definition of
 the filter.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>DefinitionParser</h3>
<div class="member-signature"><span class="element-name">DefinitionParser</span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="parse(java.lang.String[])">
<h3>parse</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type"><a href="FilterDefinition.html" title="class in net.i2p.i2ptunnel.access">FilterDefinition</a></span>&nbsp;<span class="element-name">parse</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]&nbsp;definition)</span>
                       throws <span class="exceptions"><a href="InvalidDefinitionException.html" title="class in net.i2p.i2ptunnel.access">InvalidDefinitionException</a></span></div>
<div class="block"><p>
 Processes an array of String objects containing the human-readable definition of
 the filter.
 </p>
 <p>
 The definition of a filter is a list of Strings.  Each line can represent one of 
 these items:
 </p>
 <ul>
 <li>definition of a default threshold to apply to any remote destinations not
   listed in this file or any of the referenced files</li>
 <li>definition of a threshold to apply to a specific remote destination</li>
 <li>definition of a threshold to apply to remote destinations listed in a file</li>
 <li>definition of a threshold that if breached will cause the offending remote
   destination to be recorded in a specified file</li>
 </ul>
 <p>
 The order of the definitions matters.  The first threshold for a given destination
 (whether explicit or listed in a file) overrides any future thresholds for the
 same destination, whether explicit or listed in a file.
 </p>
 <p>
 Thresholds:
 </p>
 <p>
 A threshold is defined by the number of connection attempts a remote destination is
 permitted to perform over a specified number of seconds before a "breach" occurs.
 For example the following threshold definition "15/5" means that the same remote
 destination is allowed to make 14 connection attempts over a 5 second period,  If
 it makes one more attempt within the same period, the threshold will be breached.
 </p>
 <p>
 The threshold format can be one of the following:
 </p>
 <ul>
 <li>Numeric definition of number of connections over number seconds - "15/5", 
   "30/60", and so on.  Note that if the number of connections is 1 (as for 
   example in "1/1") the first connection attempt will result in a breach.</li>
 <li>The word "allow".  This threshold is never breached, i.e. infinite number of 
   connection attempts is permitted.</li>
 <li>The word "deny".  This threshold is always breached, i.e. no connection attempts
   will be allowed.</li>
 </ul>

 The default threshold applies to any remote destinations that are not explicitly
 listed in the definition or in any of the referenced files.  To set a default 
 threshold use the keyword "default".  The following are examples of default thresholds:
 
 <pre>
 15/5 default
 allow default
 deny default
 </pre>

 Explicit thresholds are applied to a remote destination listed in the definition itself.
 Examples:
 
 <pre>
 15/5 explicit asdfasdfasdf.b32.i2p
 allow explicit fdsafdsafdsa.b32.i2p
 deny explicit qwerqwerqwer.b32.i2p
 </pre>

 For convenience it is possible to maintain a list of destinations in a file and define
 a threshold for all of them in bulk.  Examples:

 <pre>
 15/5 file /path/throttled_destinations.txt
 deny file /path/forbidden_destinations.txt
 allow file /path/unlimited_destinations.txt
 </pre>

 Recorders keep track of connection attempts made by a remote destination, and if that
 breaches a certain threshold, that destination gets recorded in a given file.  Examples:

 <pre>
 30/5 record /path/aggressive.txt
 60/5 record /path/very_aggressive.txt
 </pre>
 <p>
 It is possible to use a recorder to record aggressive destinations to a given file,
 and then use that same file to throttle them.  For example, the following snippet will
 define a filter that initially allows all connection attempts, but if any single
 destination exceeds 30 attempts per 5 seconds it gets throttled down to 15 attempts per 
 5 seconds:
 </p>
 <pre>
 # by default there are no limits
 allow default
 # but record overly aggressive destinations
 30/5 record /path/throttled.txt
 # and any that end up in that file will get throttled in the future
 15/5 file /path/throttled.txt
 </pre>
 <p>
 It is possible to use a recorder in one tunnel that writes to a file that throttles 
 another tunnel.  It is possible to reuse the same file with destinations in multiple
 tunnels.  And of course, it is possible to edit these files by hand.
 </p>
 <p>
 Here is an example filter definition that applies some throttling by default, no throttling
 for destinations in the file "friends.txt", forbids any connections from destinations
 in the file "enemies.txt" and records any aggressive behavior in a file called
 "suspicious.txt":
 </p>
 <pre>
 15/5 default
 allow file /path/friends.txt
 deny file /path/enemies.txt
 60/5 record /path/suspicious.txt
 </pre></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>a FilterDefinition POJO representation for internal use</dd>
<dt>Throws:</dt>
<dd><code><a href="InvalidDefinitionException.html" title="class in net.i2p.i2ptunnel.access">InvalidDefinitionException</a></code> - if the definition is malformed</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
